---
title: Hardening ‚Äî –£—Å–∏–ª–µ–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã
---

# üîí Hardening: –£—Å–∏–ª–µ–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã

**Hardening** ‚Äî —ç—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å —É–º–µ–Ω—å—à–µ–Ω–∏—è "–ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ –∞—Ç–∞–∫–∏" (attack surface) –∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π –≤ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ. –¶–µ–ª—å ‚Äî —Å–¥–µ–ª–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —É—Å—Ç–æ–π—á–∏–≤–æ–π –∫ –≤–∑–ª–æ–º—É, –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞–≤ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–µ–∫—Ç–æ—Ä–æ–≤ –¥–ª—è –∞—Ç–∞–∫–∏. –≠—Ç–æ –Ω–µ —Ä–∞–∑–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞, –∞ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å, –≤–∫–ª—é—á–∞—é—â–∏–π –≤ —Å–µ–±—è –∫–∞–∫ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –º–µ—Ä—ã, —Ç–∞–∫ –∏ —Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –ª—É—á—à–∏–º –ø—Ä–∞–∫—Ç–∏–∫–∞–º.

## üéØ –¶–µ–ª—å —Ä–∞–∑–¥–µ–ª–∞

- –û—Å–≤–æ–∏—Ç—å –∫–ª—é—á–µ–≤—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –ø–æ —É—Å–∏–ª–µ–Ω–∏—é –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ Linux.
- –ù–∞—É—á–∏—Ç—å—Å—è –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —è–¥—Ä–∞ —á–µ—Ä–µ–∑ `sysctl` –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç —Å–µ—Ç–µ–≤—ã—Ö –∏ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∞—Ç–∞–∫.
- –ò–∑—É—á–∏—Ç—å –º–µ—Ç–æ–¥—ã –∑–∞—â–∏—Ç—ã SSH-—Å–µ—Ä–≤–µ—Ä–∞.
- –ü–æ–Ω—è—Ç—å, –∫–∞–∫ –æ–±–µ–∑–æ–ø–∞—Å–∏—Ç—å —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É –∏ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø –∫ –≤–∞–∂–Ω—ã–º —Ñ–∞–π–ª–∞–º.
- –ü–æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∑–∞—â–∏—Ç–æ–π –æ—Ç –±—Ä—É—Ç—Ñ–æ—Ä—Å-–∞—Ç–∞–∫ —Å –ø–æ–º–æ—â—å—é `fail2ban`.

--- 

## üîë –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

1.  **–ü—Ä–∏–Ω—Ü–∏–ø –Ω–∞–∏–º–µ–Ω—å—à–∏—Ö –ø—Ä–∏–≤–∏–ª–µ–≥–∏–π:** –ö–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–∏—Å—Ç–µ–º—ã (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, —Å–µ—Ä–≤–∏—Å, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ) –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å —Ç–æ–ª—å–∫–æ —Ç–æ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä –ø—Ä–∞–≤, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ–æ–±—Ö–æ–¥–∏–º –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –µ–≥–æ –∑–∞–¥–∞—á. –ù–µ –∑–∞–ø—É—Å–∫–∞–π—Ç–µ —Å–µ—Ä–≤–∏—Å—ã –æ—Ç `root`, –µ—Å–ª–∏ —ç—Ç–æ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è.
2.  **–ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ –∞—Ç–∞–∫–∏:** –û—Ç–∫–ª—é—á–∞–π—Ç–µ –∏ —É–¥–∞–ª—è–π—Ç–µ –≤—Å—ë, —á—Ç–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è. –ö–∞–∂–¥—ã–π —Ä–∞–±–æ—Ç–∞—é—â–∏–π —Å–µ—Ä–≤–∏—Å, –æ—Ç–∫—Ä—ã—Ç—ã–π –ø–æ—Ä—Ç, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ ‚Äî —ç—Ç–æ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è –∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫–∞.
3.  **–†–µ–≥—É–ª—è—Ä–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–π—Ç–µ —Å–∏—Å—Ç–µ–º—É –≤ –∞–∫—Ç—É–∞–ª—å–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –∫–∞–∫ —Ç–æ–ª—å–∫–æ –æ–Ω–∏ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –¥–æ—Å—Ç—É–ø–Ω—ã.
4.  **–ì–ª—É–±–æ–∫–∞—è –∑–∞—â–∏—Ç–∞ (Defense in Depth):** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —É—Ä–æ–≤–Ω–µ–π –∑–∞—â–∏—Ç—ã. –§–∞–µ—Ä–≤–æ–ª + AppArmor + Fail2ban + Hardening —è–¥—Ä–∞ ‚Äî –≤–º–µ—Å—Ç–µ –æ–Ω–∏ —Å–æ–∑–¥–∞—é—Ç –≥–æ—Ä–∞–∑–¥–æ –±–æ–ª–µ–µ –Ω–∞–¥—ë–∂–Ω—É—é –∑–∞—â–∏—Ç—É, —á–µ–º –∫–∞–∂–¥—ã–π –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏.

--- 

## üõ†Ô∏è –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —à–∞–≥–∏

### 1. –ó–∞—â–∏—Ç–∞ SSH-—Å–µ—Ä–≤–µ—Ä–∞ (`/etc/ssh/sshd_config`)

SSH ‚Äî —ç—Ç–æ –æ—Å–Ω–æ–≤–Ω–æ–π —Å–ø–æ—Å–æ–± —É–¥–∞–ª—ë–Ω–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è, –∏ –æ–Ω —á–∞—Å—Ç–æ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Ü–µ–ª—å—é –∞—Ç–∞–∫.

```ini
# –ó–∞–ø—Ä–µ—Ç–∏—Ç—å –≤—Ö–æ–¥ –ø–æ–¥ root
PermitRootLogin no

# –û—Ç–∫–ª—é—á–∏—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –ø–æ –ø–∞—Ä–æ–ª—é (—Ç–æ–ª—å–∫–æ –ø–æ –∫–ª—é—á–∞–º)
PasswordAuthentication no
PubkeyAuthentication yes

# –ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—É—Å—Ç—ã–µ –ø–∞—Ä–æ–ª–∏
PermitEmptyPasswords no

# –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
AllowUsers user1 user2
# –∏–ª–∏ –≥—Ä—É–ø–ø–∞–º
# AllowGroups ssh_users

# –ò–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ä—Ç (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –Ω–æ —É–º–µ–Ω—å—à–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ "—à—É–º–∞" –æ—Ç –±–æ—Ç–æ–≤)
# Port 2222

# –û—Ç–∫–ª—é—á–∏—Ç—å X11 Forwarding, –µ—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
X11Forwarding no
```
–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–µ –∑–∞–±—É–¥—å—Ç–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å: `systemctl restart sshd`.

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∞–µ—Ä–≤–æ–ª–∞

–ë–ª–æ–∫–∏—Ä—É–π—Ç–µ –≤–µ—Å—å –≤—Ö–æ–¥—è—â–∏–π —Ç—Ä–∞—Ñ–∏–∫ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, —Ä–∞–∑—Ä–µ—à–∞—è —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–æ—Ä—Ç—ã.

**–ü—Ä–∏–º–µ—Ä —Å `ufw` (Uncomplicated Firewall):**
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ–ª–∏—Ç–∏–∫—É –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: –≤—Å—ë –∑–∞–ø—Ä–µ—Ç–∏—Ç—å
ufw default deny incoming
ufw default allow outgoing

# –†–∞–∑—Ä–µ—à–∏—Ç—å SSH (–Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º –∏–ª–∏ –∫–∞—Å—Ç–æ–º–Ω–æ–º –ø–æ—Ä—Ç—É)
ufw allow ssh # –∏–ª–∏ ufw allow 2222

# –†–∞–∑—Ä–µ—à–∏—Ç—å HTTP –∏ HTTPS
ufw allow http
ufw allow https

# –í–∫–ª—é—á–∏—Ç—å —Ñ–∞–µ—Ä–≤–æ–ª
ufw enable
```

### 3. –£—Å–∏–ª–µ–Ω–∏–µ —è–¥—Ä–∞ —á–µ—Ä–µ–∑ `sysctl`

–≠—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –≤ —Ñ–∞–π–ª–∞—Ö –≤ `/etc/sysctl.d/`.

**/etc/sysctl.d/99-hardening.conf**
```ini
# --- –°–µ—Ç–µ–≤–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å ---
# –í–∫–ª—é—á–∏—Ç—å –∑–∞—â–∏—Ç—É –æ—Ç SYN-—Ñ–ª—É–¥–∞
net.ipv4.tcp_syncookies = 1

# –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å ICMP-—Ä–µ–¥–∏—Ä–µ–∫—Ç—ã (–ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç MITM-–∞—Ç–∞–∫–∏)
net.ipv4.conf.all.accept_redirects = 0
net.ipv4.conf.default.accept_redirects = 0

# –ù–µ –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ ICMP-broadcast –∑–∞–ø—Ä–æ—Å—ã
net.ipv4.icmp_echo_ignore_broadcasts = 1

# –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –ø–∞–∫–µ—Ç—ã —Å "–ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–º–∏" –∞–¥—Ä–µ—Å–∞–º–∏
net.ipv4.conf.all.log_martians = 1

# --- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —è–¥—Ä–∞ ---
# –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ dmesg –¥–ª—è –æ–±—ã—á–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
kernel.dmesg_restrict = 1

# –°–∫—Ä—ã—Ç—å —É–∫–∞–∑–∞—Ç–µ–ª–∏ —è–¥—Ä–∞ –≤ /proc
kernel.kptr_restrict = 1

# –í–∫–ª—é—á–∏—Ç—å ASLR (Address Space Layout Randomization)
kernel.randomize_va_space = 2
```
–ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è: `sysctl --system`.

### 4. –ó–∞—â–∏—Ç–∞ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã

- **–û–±–µ–∑–æ–ø–∞—Å–∏—Ç—å `/tmp`:** –°–º–æ–Ω—Ç–∏—Ä—É–π—Ç–µ `/tmp` –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ä–∞–∑–¥–µ–ª —Å –æ–ø—Ü–∏—è–º–∏ `noexec`, `nosuid`, `nodev` –≤ `/etc/fstab`. –≠—Ç–æ –∑–∞–ø—Ä–µ—Ç–∏—Ç –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤, —Å–º–µ–Ω—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –∏–∑ –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –∫–∞—Ç–∞–ª–æ–≥–∞.
  `/tmp /tmp tmpfs defaults,noexec,nosuid,nodev 0 0`

- **–ò—Å–∫–∞—Ç—å —Ñ–∞–π–ª—ã –±–µ–∑ –≤–ª–∞–¥–µ–ª—å—Ü–∞:**
  `find / -nouser -o -nogroup`

- **–ò—Å–∫–∞—Ç—å world-writable —Ñ–∞–π–ª—ã:**
  `find / -xdev -type f -perm -0002`

- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `chattr`:** –°–¥–µ–ª–∞–π—Ç–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–µ —Ñ–∞–π–ª—ã –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã–º–∏.
  `chattr +i /etc/resolv.conf`

### 5. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å `fail2ban`

`fail2ban` ‚Äî —ç—Ç–æ —Å–µ—Ä–≤–∏—Å, –∫–æ—Ç–æ—Ä—ã–π —Å–∫–∞–Ω–∏—Ä—É–µ—Ç –ª–æ–≥–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `auth.log`) –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±–ª–æ–∫–∏—Ä—É–µ—Ç IP-–∞–¥—Ä–µ—Å–∞, —Å –∫–æ—Ç–æ—Ä—ã—Ö –∏–¥—É—Ç –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω—ã–µ –Ω–µ—É–¥–∞—á–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –≤—Ö–æ–¥–∞ (–±—Ä—É—Ç—Ñ–æ—Ä—Å).

1.  **–£—Å—Ç–∞–Ω–æ–≤–∫–∞:** `apt install fail2ban`
2.  **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:** –°–æ–∑–¥–∞–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.
    `cp /etc/fail2ban/jail.conf /etc/fail2ban/jail.local`

3.  **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ `/etc/fail2ban/jail.local`:**
    ```ini
    [sshd]
    enabled = true
    port = ssh
    # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ—É–¥–∞—á–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ –¥–æ –±–∞–Ω–∞
    maxretry = 3
    # –í—Ä–µ–º—è –±–∞–Ω–∞ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö (1 —á–∞—Å)
    bantime = 3600
    ```
4.  **–ó–∞–ø—É—Å–∫:** `systemctl enable fail2ban --now`

–¢–µ–ø–µ—Ä—å `fail2ban` –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—Ç—å –ø—Ä–∞–≤–∏–ª–∞ —Ñ–∞–µ—Ä–≤–æ–ª–∞, –±–ª–æ–∫–∏—Ä—É—è –∞—Ç–∞–∫—É—é—â–∏—Ö.
