---
title: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å LDAP
---

# üåê –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å LDAP

**LDAP (Lightweight Directory Access Protocol)** ‚Äî —ç—Ç–æ –ø—Ä–æ—Ç–æ–∫–æ–ª –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–ª—É–∂–±–∞–º –∫–∞—Ç–∞–ª–æ–≥–æ–≤. –í –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ Linux, LDAP —á–∞—â–µ –≤—Å–µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—á—ë—Ç–Ω—ã–º–∏ –∑–∞–ø–∏—Å—è–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –≥—Ä—É–ø–ø –∏ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å LDAP –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –≤—Ö–æ–¥–∏—Ç—å –Ω–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Å–µ—Ä–≤–µ—Ä–æ–≤ —Å –µ–¥–∏–Ω—ã–º –ª–æ–≥–∏–Ω–æ–º –∏ –ø–∞—Ä–æ–ª–µ–º.

## üéØ –¶–µ–ª—å —Ä–∞–∑–¥–µ–ª–∞

- –ü–æ–Ω—è—Ç—å –æ—Å–Ω–æ–≤—ã LDAP: –¥—Ä–µ–≤–æ–≤–∏–¥–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (DIT), Distinguished Names (DN), –∞—Ç—Ä–∏–±—É—Ç—ã.
- –ò–∑—É—á–∏—Ç—å, –∫–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å Linux-–∫–ª–∏–µ–Ω—Ç –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ LDAP —Å –ø–æ–º–æ—â—å—é `sssd`.
- –†–∞–∑–æ–±—Ä–∞—Ç—å—Å—è –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö `sssd.conf`.
- –û—Å–≤–æ–∏—Ç—å —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ LDAP-—Å–µ—Ä–≤–µ—Ä—É: `ldapsearch`.

---

## üèõÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ LDAP

LDAP –æ—Ä–≥–∞–Ω–∏–∑—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫—É—é, –¥—Ä–µ–≤–æ–≤–∏–¥–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É, –Ω–∞–∑—ã–≤–∞–µ–º—É—é **Directory Information Tree (DIT)**.

- **Entry (–ó–∞–ø–∏—Å—å):** –ö–∞–∂–¥–∞—è –∑–∞–ø–∏—Å—å –≤ –¥–µ—Ä–µ–≤–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –æ–±—ä–µ–∫—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –≥—Ä—É–ø–ø—É, –∫–æ–º–ø—å—é—Ç–µ—Ä).
- **Distinguished Name (DN):** –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫–∞–∂–¥–æ–π –∑–∞–ø–∏—Å–∏. –û–Ω —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –∏–∑ –ø—É—Ç–∏ –æ—Ç –∫–æ—Ä–Ω—è –¥–µ—Ä–µ–≤–∞ –¥–æ –∑–∞–ø–∏—Å–∏.
  - `uid=jdoe,ou=People,dc=example,dc=com`
- **Attributes (–ê—Ç—Ä–∏–±—É—Ç—ã):** –ö–∞–∂–¥–∞—è –∑–∞–ø–∏—Å—å —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –Ω–∞–±–æ—Ä–∞ –∞—Ç—Ä–∏–±—É—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –æ–ø–∏—Å—ã–≤–∞—é—Ç –µ—ë.
  - `uid`: `jdoe`
  - `cn` (Common Name): `John Doe`
  - `objectClass`: –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø –æ–±—ä–µ–∫—Ç–∞ (`posixAccount`, `inetOrgPerson`).
  - `homeDirectory`: `/home/jdoe`

---

## üõ°Ô∏è SSSD: System Security Services Daemon

`sssd` ‚Äî —ç—Ç–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π, –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ Linux —Å —É–¥–∞–ª—ë–Ω–Ω—ã–º–∏ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º–∏ —É—á—ë—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (LDAP, Active Directory, Kerberos).

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ `sssd`:**

- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:** `sssd` –∫—ç—à–∏—Ä—É–µ—Ç —É—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ª–æ–∫–∞–ª—å–Ω–æ. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –≤—Ö–æ–¥–∏—Ç—å –≤ —Å–∏—Å—Ç–µ–º—É, –¥–∞–∂–µ –µ—Å–ª–∏ LDAP-—Å–µ—Ä–≤–µ—Ä –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω.
- **–û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å:** –ú–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ LDAP-—Å–µ—Ä–≤–µ—Ä–∞–º–∏.
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** –£–º–µ–Ω—å—à–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ —Å–µ—Ä–≤–µ—Ä—É.
- **–ü—Ä–æ—Å—Ç–æ—Ç–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:** –ï–¥–∏–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª `sssd.conf`.

**–°—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã:**

1.  –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `sshd`) –≤—ã–∑—ã–≤–∞–µ—Ç PAM.
2.  PAM-–º–æ–¥—É–ª—å `pam_sss.so` –ø–µ—Ä–µ–¥–∞—ë—Ç –∑–∞–ø—Ä–æ—Å `sssd`.
3.  `sssd` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–≤–æ–π –∫—ç—à. –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç, –æ–Ω –¥–µ–ª–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ LDAP-—Å–µ—Ä–≤–µ—Ä—É.
4.  –ü–æ–ª—É—á–∏–≤ –¥–∞–Ω–Ω—ã–µ, `sssd` –∫—ç—à–∏—Ä—É–µ—Ç –∏—Ö –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é.

---

## üõ†Ô∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ LDAP-–∫–ª–∏–µ–Ω—Ç–∞ —Å `sssd`

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞–∫–µ—Ç–æ–≤

```bash
# Debian/Ubuntu
apt install sssd-ldap sssd-tools libnss-sss libpam-sss

# RHEL/CentOS
dnf install sssd sssd-client
```

### 2. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è `/etc/sssd/sssd.conf`

–≠—Ç–æ –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏. –û–Ω –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –ø—Ä–∞–≤–∞ `0600`.

```ini
[sssd]
config_file_version = 2
services = nss, pam
domains = my_ldap_domain

[nss]
filter_groups = root
filter_users = root

[pam]

[domain/my_ldap_domain]
id_provider = ldap
auth_provider = ldap
chpass_provider = ldap

# URI LDAP-—Å–µ—Ä–≤–µ—Ä–∞ (–º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ)
ldap_uri = ldap://ldap.example.com

# –ë–∞–∑–æ–≤—ã–π DN –¥–ª—è –ø–æ–∏—Å–∫–∞
ldap_search_base = dc=example,dc=com

# –í–∫–ª—é—á–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
cache_credentials = True

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –≥—Ä—É–ø–ø
ldap_schema = rfc2307bis

# –ê—Ç—Ä–∏–±—É—Ç—ã –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –≥—Ä—É–ø–ø
ldap_user_object_class = posixAccount
ldap_user_uid_number = uidNumber
ldap_user_gid_number = gidNumber
ldap_user_home_directory = homeDirectory
ldap_user_shell = loginShell

ldap_group_object_class = posixGroup
ldap_group_gid_number = gidNumber
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PAM –∏ NSS

–ù—É–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å —Å–∏—Å—Ç–µ–º–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `sss` –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.

- **`/etc/nsswitch.conf`:**
  ```
  passwd:   files sss
  group:    files sss
  shadow:   files sss
  ```

- **`/etc/pam.d/common-auth` (–∏–ª–∏ `system-auth`):**
  –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `pam_sss.so` –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ —Å—Ç–µ–∫–∞—Ö `auth`, `account`, `password`, `session`.

### 4. –ó–∞–ø—É—Å–∫ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞

```bash
# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–∞–≤–∞ –Ω–∞ –∫–æ–Ω—Ñ–∏–≥
chmod 600 /etc/sssd/sssd.conf

# –ó–∞–ø—É—Å–∫–∞–µ–º –∏ –≤–∫–ª—é—á–∞–µ–º —Å–µ—Ä–≤–∏—Å
systemctl enable sssd --now

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ sssd –≤–∏–¥–∏—Ç LDAP-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
id ldapuser
# uid=1001(ldapuser) gid=1001(ldapgroup) groups=1001(ldapgroup)

# –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ (–ø—Ä–∏ –æ—Ç–ª–∞–¥–∫–µ)
sss_cache -E
```

---

## üî¨ `ldapsearch`: –û—Ç–ª–∞–¥–∫–∞ –∏ –∑–∞–ø—Ä–æ—Å—ã

`ldapsearch` ‚Äî —ç—Ç–æ —É—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä—è–º—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ LDAP-—Å–µ—Ä–≤–µ—Ä—É. –û–Ω–∞ –Ω–µ–∑–∞–º–µ–Ω–∏–º–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏, –≤–∏–¥–∏—Ç –ª–∏ –∫–ª–∏–µ–Ω—Ç —Å–µ—Ä–≤–µ—Ä –∏ –∫–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –æ–Ω –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç.

```bash
# –ü—Ä–æ—Å—Ç–æ–π –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 'jdoe'
# -x: –ø—Ä–æ—Å—Ç–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (–Ω–µ SASL)
# -H: URI —Å–µ—Ä–≤–µ—Ä–∞
# -b: –±–∞–∑–∞ –¥–ª—è –ø–æ–∏—Å–∫–∞
# -D: DN –¥–ª—è –±–∏–Ω–¥–∞ (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è)
# -W: –∑–∞–ø—Ä–æ—Å–∏—Ç—å –ø–∞—Ä–æ–ª—å –¥–ª—è –±–∏–Ω–¥–∞
ldapsearch -x -H ldap://ldap.example.com -b "dc=example,dc=com" "(uid=jdoe)"
```

–≠—Ç–æ—Ç –∑–∞–ø—Ä–æ—Å –≤–µ—Ä–Ω—ë—Ç –ø–æ–ª–Ω—É—é LDAP-–∑–∞–ø–∏—Å—å –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `jdoe`, –ø–æ–∫–∞–∑—ã–≤–∞—è –≤—Å–µ –µ–≥–æ –∞—Ç—Ä–∏–±—É—Ç—ã. –≠—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∞—Ç—Ä–∏–±—É—Ç—ã, —É–∫–∞–∑–∞–Ω–Ω—ã–µ –≤ `sssd.conf` (`uidNumber`, `homeDirectory` –∏ —Ç.–¥.), —Å—É—â–µ—Å—Ç–≤—É—é—Ç –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã.
