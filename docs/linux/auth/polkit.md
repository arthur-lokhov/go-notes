---
title: Polkit (PolicyKit)
---

# üõ°Ô∏è Polkit: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–≤–∏–ª–µ–≥–∏—è–º–∏ –≤ Userspace

–ï—Å–ª–∏ **PAM** ‚Äî —ç—Ç–æ "—Ñ–µ–π—Å-–∫–æ–Ω—Ç—Ä–æ–ª—å" –Ω–∞ –≤—Ö–æ–¥–µ –≤ —Å–∏—Å—Ç–µ–º—É, —Ç–æ **Polkit (PolicyKit)** ‚Äî —ç—Ç–æ —Å–ª—É–∂–±–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤–Ω—É—Ç—Ä–∏, –∫–æ—Ç–æ—Ä–∞—è —Ä–µ—à–∞–µ—Ç, –º–æ–∂–Ω–æ –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ, —É–∂–µ –Ω–∞—Ö–æ–¥—è—Å—å –≤ —Å–∏—Å—Ç–µ–º–µ. Polkit –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å: "*–ú–æ–∂–Ω–æ –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é `david` –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å `nginx` –∏–∑ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞?*"

## üéØ –¶–µ–ª—å —Ä–∞–∑–¥–µ–ª–∞

- –ü–æ–Ω—è—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É Polkit –∏ –µ–≥–æ —Ä–æ–ª—å –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–µ—Å–∫—Ç–æ–ø–Ω—ã—Ö –∏ —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è—Ö.
- –†–∞–∑–æ–±—Ä–∞—Ç—å—Å—è –≤ –∫–ª—é—á–µ–≤—ã—Ö –ø–æ–Ω—è—Ç–∏—è—Ö: **–¥–µ–π—Å—Ç–≤–∏–µ (action)**, **—Å—É–±—ä–µ–∫—Ç (subject)**, **–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (authorization)**.
- –ù–∞—É—á–∏—Ç—å—Å—è —á–∏—Ç–∞—Ç—å –∏ –ø–∏—Å–∞—Ç—å –ø—Ä–∞–≤–∏–ª–∞ Polkit –¥–ª—è –≥—Ä–∞–Ω—É–ª—è—Ä–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è –Ω–∞–¥ —Å–∏—Å—Ç–µ–º–Ω—ã–º–∏ –¥–µ–π—Å—Ç–≤–∏—è–º–∏.
- –°—Ä–∞–≤–Ω–∏—Ç—å Polkit –∏ `sudo` –∏ –ø–æ–Ω—è—Ç—å, –∫–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∂–¥—ã–π –∏–∑ –Ω–∏—Ö.

---

## üèõÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Polkit

Polkit ‚Äî —ç—Ç–æ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Å–µ—Ä–≤–∏—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–≤–µ—Ä—Ö **D-Bus**. –ö–æ–≥–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (—Å—É–±—ä–µ–∫—Ç) —Ö–æ—á–µ—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ, –æ–Ω–æ –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç `sudo`, –∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –¥–µ–º–æ–Ω—É Polkit.

**–°—Ö–µ–º–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è:**

```
+------------------+
| –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (GUI) |
| (GNOME Settings) |  <-- 1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ç—å"
+------------------+
         ‚Üì (D-Bus call: org.freedesktop.NetworkManager.Restart)
+------------------+
|   D-Bus –±—Ä–æ–∫–µ—Ä   |
+------------------+
         ‚Üì
+------------------+
|   Polkit –¥–µ–º–æ–Ω   |  <-- 2. Polkit –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –≤—ã–∑–æ–≤ –∏ –∏—â–µ—Ç –¥–µ–π—Å—Ç–≤–∏–µ
|    (polkitd)     |      (org.freedesktop.NetworkManager.settings.modify.system)
+------------------+
         ‚Üì
+------------------------------------+
| –ü—Ä–∞–≤–∏–ª–∞ Polkit                       |  <-- 3. Polkit –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–∞–≤–∏–ª–∞ –≤:
| (/usr/share/polkit-1/actions/*.policy) |
| (/etc/polkit-1/rules.d/*.rules)      |
+------------------------------------+
         ‚Üì (–†–µ–∑—É–ª—å—Ç–∞—Ç: –î–ê/–ù–ï–¢/–ü–ê–†–û–õ–¨)
+------------------+
|   Polkit –∞–≥–µ–Ω—Ç   |  <-- 4. –ï—Å–ª–∏ –Ω—É–∂–µ–Ω –ø–∞—Ä–æ–ª—å, –∞–≥–µ–Ω—Ç (GUI-–¥–∏–∞–ª–æ–≥)
| (GUI-–¥–∏–∞–ª–æ–≥)     |      –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –µ–≥–æ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
+------------------+
         ‚Üì
+------------------+
| –°–∏—Å—Ç–µ–º–Ω—ã–π —Å–µ—Ä–≤–∏—Å |
| (NetworkManager) |  <-- 5. –ï—Å–ª–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–æ–π–¥–µ–Ω–∞, –¥–µ–π—Å—Ç–≤–∏–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è.
+------------------+
```

- **–°—É–±—ä–µ–∫—Ç (Subject):** –ü—Ä–æ—Ü–µ—Å—Å, –∫–æ—Ç–æ—Ä—ã–π –∏–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç –¥–µ–π—Å—Ç–≤–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `gnome-control-center`).
- **–î–µ–π—Å—Ç–≤–∏–µ (Action):** –ü—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è, –∫–æ—Ç–æ—Ä—É—é —Ö–æ—á–µ—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å—É–±—ä–µ–∫—Ç. –î–µ–π—Å—Ç–≤–∏—è –∏–º–µ—é—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `com.vendor.application.action` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `org.freedesktop.login1.reboot`). –û–Ω–∏ –æ–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ `.policy` —Ñ–∞–π–ª–∞—Ö.
- **–î–µ–º–æ–Ω Polkit (`polkitd`):** –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã, –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–∞–≤–∏–ª–∞ –∏ –≤—ã–Ω–æ—Å–∏—Ç —Ä–µ—à–µ–Ω–∏–µ.
- **–ê–≥–µ–Ω—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (Authentication Agent):** –ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –∏–ª–∏ —Ç–µ–∫—Å—Ç–æ–≤—ã–π –¥–∏–∞–ª–æ–≥, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø–∞—Ä–æ–ª—å —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –µ—Å–ª–∏ —ç—Ç–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª–∞–º–∏.
- **–ü—Ä–∞–≤–∏–ª–∞ (Rules):** –§–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç, –ø—Ä–∏ –∫–∞–∫–∏—Ö —É—Å–ª–æ–≤–∏—è—Ö –¥–µ–π—Å—Ç–≤–∏–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ. –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç ‚Äî JavaScript-—Ñ–∞–π–ª—ã (`.rules`).

---

## ‚öñÔ∏è Polkit vs. `sudo`

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | üõ°Ô∏è Polkit | üîë `sudo` |
| :--- | :--- | :--- |
| **–ì—Ä–∞–Ω—É–ª—è—Ä–Ω–æ—Å—Ç—å** | **–í—ã—Å–æ–∫–∞—è.** –ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è (API –≤—ã–∑–æ–≤—ã). "–†–∞–∑—Ä–µ—à–∏—Ç—å –º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å, –Ω–æ –Ω–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å". | **–ù–∏–∑–∫–∞—è.** –î–∞—ë—Ç –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é –∫–æ–º–∞–Ω–¥—ã –æ—Ç –∏–º–µ–Ω–∏ –¥—Ä—É–≥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–æ–±—ã—á–Ω–æ `root`). | 
| **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å** | **–û—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –Ω–∞ GUI.** –õ–µ–≥–∫–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å –¥–µ—Å–∫—Ç–æ–ø–æ–º, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫—Ä–∞—Å–∏–≤—ã–µ –¥–∏–∞–ª–æ–≥–∏. | **–û—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –Ω–∞ CLI.** –û—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏. |
| **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** | JavaScript-–ø—Ä–∞–≤–∏–ª–∞ –∏–ª–∏ `.policy` —Ñ–∞–π–ª—ã. –ë–æ–ª–µ–µ —Å–ª–æ–∂–Ω–∞—è, –Ω–æ –≥–∏–±–∫–∞—è. | –ü—Ä–æ—Å—Ç–æ–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª `/etc/sudoers`. |
| **–°—Ü–µ–Ω–∞—Ä–∏–π** | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–Ω—ã–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏ –∏–∑ GUI, –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∏—Å–∫–æ–≤, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∏—Ç–∞–Ω–∏–µ–º. | –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã—Ö –∫–æ–º–∞–Ω–¥ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ, –∑–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–æ–≤ —Å –ø—Ä–∞–≤–∞–º–∏ `root`. |

!!! success "–í—ã–≤–æ–¥"
    **Polkit –Ω–µ –∑–∞–º–µ–Ω—è–µ—Ç `sudo`.** –û–Ω–∏ —Ä–µ—à–∞—é—Ç —Ä–∞–∑–Ω—ã–µ –∑–∞–¥–∞—á–∏. `sudo` ‚Äî –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ. Polkit ‚Äî –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ, –≥—Ä–∞–Ω—É–ª—è—Ä–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è –Ω–∞–¥ –¥–µ–π—Å—Ç–≤–∏—è–º–∏ –≤ —Å–∏—Å—Ç–µ–º–µ, –æ—Å–æ–±–µ–Ω–Ω–æ –≤ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏.

---

## üìú –ü—Ä–∞–≤–∏–ª–∞ Polkit

–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ–ª–∏—Ç–∏–∫ ‚Äî —ç—Ç–æ —Å–æ–∑–¥–∞–Ω–∏–µ JavaScript-—Ñ–∞–π–ª–æ–≤ –≤ `/etc/polkit-1/rules.d/`.

### –ß—Ç–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π

–ß—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å, –∫–∞–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –¥–æ—Å—Ç—É–ø–Ω—ã –≤ —Å–∏—Å—Ç–µ–º–µ, –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å `.policy` —Ñ–∞–π–ª—ã –≤ `/usr/share/polkit-1/actions/`.

**–ü—Ä–∏–º–µ—Ä (`org.freedesktop.login1.policy`):**
```xml
<action id="org.freedesktop.login1.reboot">
  <description>Reboot the system</description>
  <message>Authentication is required to reboot the system.</message>
  <defaults>
    <allow_any>auth_admin_keep</allow_any>
    <allow_inactive>auth_admin_keep</allow_inactive>
    <allow_active>yes</allow_active>
  </defaults>
</action>
```
- **`allow_any`:** –î–ª—è –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ SSH). `auth_admin_keep` ‚Äî –∑–∞–ø—Ä–æ—Å–∏—Ç—å –ø–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –∏ –∑–∞–ø–æ–º–Ω–∏—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –Ω–∞ –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è.
- **`allow_inactive`:** –¢–æ –∂–µ —Å–∞–º–æ–µ.
- **`allow_active`:** –î–ª—è –∞–∫—Ç–∏–≤–Ω–æ–π –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Å—Å–∏–∏ (–∑–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–æ–º). `yes` ‚Äî —Ä–∞–∑—Ä–µ—à–∏—Ç—å –±–µ–∑ –ø–∞—Ä–æ–ª—è.

–í–æ—Ç –ø–æ—á–µ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞ —Å–≤–æ–∏–º –Ω–æ—É—Ç–±—É–∫–æ–º –º–æ–∂–µ—Ç –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å –µ–≥–æ –±–µ–∑ –ø–∞—Ä–æ–ª—è, –∞ –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –ø–æ SSH ‚Äî —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–∞—Ä–æ–ª—å `sudo`.

### –ù–∞–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–∞–≤–∏–ª

**–ó–∞–¥–∞—á–∞:** –†–∞–∑—Ä–µ—à–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –∏–∑ –≥—Ä—É–ø–ø—ã `operators` –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å `nginx` –±–µ–∑ –ø–∞—Ä–æ–ª—è.

1.  **–ù–∞—Ö–æ–¥–∏–º –∏–º—è –¥–µ–π—Å—Ç–≤–∏—è.** –û–±—ã—á–Ω–æ –æ–Ω–æ —Å–≤—è–∑–∞–Ω–æ —Å D-Bus –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º —Å–µ—Ä–≤–∏—Å–∞. –î–ª—è `systemd`-—Å–µ—Ä–≤–∏—Å–æ–≤ —ç—Ç–æ `org.freedesktop.systemd1.manage-units`.

2.  **–°–æ–∑–¥–∞—ë–º —Ñ–∞–π–ª `/etc/polkit-1/rules.d/10-nginx-restart.rules`:**
    ```javascript
    // –†–∞–∑—Ä–µ—à–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –≥—Ä—É–ø–ø—ã 'operators' —É–ø—Ä–∞–≤–ª—è—Ç—å —Å–µ—Ä–≤–∏—Å–æ–º nginx
    polkit.addRule(function(action, subject) {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ - —ç—Ç–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —é–Ω–∏—Ç–∞–º–∏ systemd
        if (action.id == "org.freedesktop.systemd1.manage-units") {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —é–Ω–∏—Ç, –∫–æ—Ç–æ—Ä—ã–º —É–ø—Ä–∞–≤–ª—è—é—Ç - —ç—Ç–æ nginx.service
            if (action.lookup("unit") == "nginx.service") {
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ—Å—Ç–æ–∏—Ç –≤ –≥—Ä—É–ø–ø–µ 'operators'
                if (subject.isInGroup("operators")) {
                    // –†–∞–∑—Ä–µ—à–∞–µ–º –¥–µ–π—Å—Ç–≤–∏–µ
                    return polkit.Result.YES;
                }
            }
        }
    });
    ```

**–†–∞–∑–±–æ—Ä:**
- `polkit.addRule(...)`: –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –Ω–æ–≤–æ–µ –ø—Ä–∞–≤–∏–ª–æ.
- `function(action, subject)`: –§—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏. `action` ‚Äî –æ–±—ä–µ–∫—Ç —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –¥–µ–π—Å—Ç–≤–∏–∏, `subject` ‚Äî –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ.
- `action.id`: –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –¥–µ–π—Å—Ç–≤–∏—è.
- `action.lookup("unit")`: Polkit –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤–º–µ—Å—Ç–µ —Å –¥–µ–π—Å—Ç–≤–∏–µ–º. –ó–¥–µ—Å—å –º—ã –ø—Ä–æ–≤–µ—Ä—è–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä `unit`.
- `subject.isInGroup("operators")`: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —á–ª–µ–Ω—Å—Ç–≤–æ –≤ –≥—Ä—É–ø–ø–µ.
- `polkit.Result.YES`: –†–µ–∑—É–ª—å—Ç–∞—Ç ‚Äî —Ä–∞–∑—Ä–µ—à–∏—Ç—å. –î—Ä—É–≥–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã: `polkit.Result.NO` (–∑–∞–ø—Ä–µ—Ç–∏—Ç—å), `polkit.Result.AUTH_ADMIN` (–∑–∞–ø—Ä–æ—Å–∏—Ç—å –ø–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∞).

---

### Go Example: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ D-Bus

–≠—Ç–æ—Ç –ø—Ä–∏–º–µ—Ä –Ω–∞ Go –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–∂–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω –ª–∏ —Ç–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏—è, –∏—Å–ø–æ–ª—å–∑—É—è D-Bus –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Polkit.

```go
package main

import (
	"fmt"
	"os"

	"github.com/godbus/dbus/v5"
)

func main() {
	if len(os.Args) < 2 {
		fmt.Println("Usage: go run main.go <action_id>")
		fmt.Println("Example: go run main.go org.freedesktop.login1.reboot")
		os.Exit(1)
	}

	actionID := os.Args[1]

	// –ü–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –∫ —Å–∏—Å—Ç–µ–º–Ω–æ–π —à–∏–Ω–µ D-Bus
	conn, err := dbus.ConnectSystemBus()
	if err != nil {
		fmt.Fprintf(os.Stderr, "Failed to connect to system bus: %v\n", err)
		os.Exit(1)
	}
	defer conn.Close()

	// –°–æ–∑–¥–∞—ë–º –æ–±—ä–µ–∫—Ç –¥–ª—è –≤—ã–∑–æ–≤–∞ –º–µ—Ç–æ–¥–æ–≤ Polkit
	obj := conn.Object("org.freedesktop.PolicyKit1", "/org/freedesktop/PolicyKit1/Authority")

	// –û–ø–∏—Å—ã–≤–∞–µ–º —Å—É–±—ä–µ–∫—Ç (—Ç–µ–∫—É—â–∏–π –ø—Ä–æ—Ü–µ—Å—Å)
	subject := map[string]dbus.Variant{
		"pid": dbus.MakeVariant(uint32(os.Getpid())),
	}

	// –§–ª–∞–≥–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ (0 - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ)
	flags := uint32(0)

	// –î–µ—Ç–∞–ª–∏ –¥–µ–π—Å—Ç–≤–∏—è (–ø—É—Å—Ç–æ, –µ—Å–ª–∏ –Ω–µ –Ω—É–∂–Ω—ã)
	details := map[string]string{}

	var result []interface{}

	// –í—ã–∑—ã–≤–∞–µ–º –º–µ—Ç–æ–¥ CheckAuthorization
	err = obj.Call(
		"org.freedesktop.PolicyKit1.Authority.CheckAuthorization",
		0,
		subject,
		actionID,
		details,
		flags,
		"", // cancellation_id
	).Store(&result)

	if err != nil {
		fmt.Fprintf(os.Stderr, "Failed to call CheckAuthorization: %v\n", err)
		os.Exit(1)
	}

	// –†–∞–∑–±–∏—Ä–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
	isAuthorized := result[0].(bool)
	isChallenge := result[1].(bool)
	authDetails := result[2].(map[string]string)

	fmt.Printf("Action: %s\n", actionID)
	fmt.Printf("Is Authorized: %t\n", isAuthorized)
	fmt.Printf("Is Challenge (needs password): %t\n", isChallenge)
	fmt.Printf("Details: %v\n", authDetails)

	if isAuthorized {
		fmt.Println("\nPermission granted!")
	} else {
		fmt.Println("\nPermission denied.")
	}
}
```
