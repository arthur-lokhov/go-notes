---
title: RAID
---

# üíø RAID: Redundant Array of Independent Disks

!!! info "–ß—Ç–æ —Ç–∞–∫–æ–µ RAID"

    **RAID (Redundant Array of Independent Disks)** - —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö –¥–∏—Å–∫–æ–≤ –≤ –æ–¥–∏–Ω –ª–æ–≥–∏—á–µ—Å–∫–∏–π.

    –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã:

    1. **–ß–µ—Ä–µ–¥–æ–≤–∞–Ω–∏–µ (striping)** - –¥–∞–Ω–Ω—ã–µ —Ä–∞–∑–±–∏–≤–∞—é—Ç—Å—è –Ω–∞ –±–ª–æ–∫–∏ –∏ –ø–∏—à—É—Ç—Å—è –ø–æ–æ—á–µ—Ä—ë–¥–Ω–æ –Ω–∞ –≤—Å–µ –¥–∏—Å–∫–∏.
    –ú–∞–∫—Å–∏–º—É–º —Å–∫–æ—Ä–æ—Å—Ç–∏, 0 –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏.
    2. **–ó–µ—Ä–∫–∞–ª–∏—Ä–æ–≤–∞–Ω–∏–µ (mirroring)** - –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–¥–Ω–æ–≥–æ –∏ —Ç–æ–≥–æ –∂–µ –±–ª–æ–∫–∞ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –¥–∏—Å–∫–∞—Ö.
    –ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å, –Ω–æ —Ä–∞—Å—Ö–æ–¥ –º–µ—Å—Ç–∞.
    3. **–ß–µ—Ç–Ω–æ—Å—Ç—å (parity)** - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ —Å–±–æ–µ –æ–¥–Ω–æ–≥–æ/–¥–≤—É—Ö –¥–∏—Å–∫–æ–≤.
    –ö–æ–º–ø—Ä–æ–º–∏—Å—Å –º–µ–∂–¥—É –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å—é –∏ –æ–±—ä—ë–º–æ–º.
    4. **–î–≤–æ–π–Ω–∞—è —á–µ—Ç–Ω–æ—Å—Ç—å (double-parity)** - —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π RAID-–º–∞—Å—Å–∏–≤—É –ø–µ—Ä–µ–∂–∏—Ç—å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –æ—Ç–∫–∞–∑ –¥–≤—É—Ö –¥–∏—Å–∫–æ–≤ –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö.
    –≠—Ç–æ —É–ª—É—á—à–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –æ–±—ã—á–Ω–æ–π —á—ë—Ç–Ω–æ—Å—Ç–∏ (–∫–∞–∫ –≤ RAID 5), –≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–≤–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –±–ª–æ–∫–∞ –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã—Ö —Å—É–º–º –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –Ω–∞–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö.

---

## ‚öôÔ∏è –†–∞–∑–Ω–æ–≤–∏–¥–Ω–æ—Å—Ç–∏ RAID

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞       | ‚öôÔ∏è –ê–ø–ø–∞—Ä–∞—Ç–Ω—ã–π RAID          | üêß –ü—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π RAID (mdadm/ZFS)  | ‚òÅÔ∏è –û–±–ª–∞—á–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è       |
|----------------------|----------------------------|----------------------------------|--------------------------|
| **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** | –í—ã—Å–æ–∫–∞—è (–∞–ø–ø–∞—Ä–∞—Ç–Ω—ã–π –∫—ç—à)  | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç CPU (–Ω–∞ SSD ‚âà –∞–ø–ø–∞—Ä–∞—Ç–Ω–æ–º—É) | –ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–µ IOPS       |
| **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ**    | –¢—Ä–µ–±—É–µ—Ç –∏–¥–µ–Ω—Ç–∏—á–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä | –ü–µ—Ä–µ–Ω–æ—Å–∏–º–æ—Å—Ç—å –º–µ–∂–¥—É —Å–∏—Å—Ç–µ–º–∞–º–∏ + —Å–∞–º–æ–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ ZFS   | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤ –æ–±–ª–∞–∫–µ  |
| **–õ—É—á—à–∏–π —Å—Ü–µ–Ω–∞—Ä–∏–π**   | –í—ã—Å–æ–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –°–£–ë–î     | –í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è, –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã        | –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã–µ workloads |

---

## üìä –£—Ä–æ–≤–Ω–∏ RAID

| –£—Ä–æ–≤–µ–Ω—å | –û–ø–∏—Å–∞–Ω–∏–µ | –ú–∏–Ω–∏–º—É–º –¥–∏—Å–∫–æ–≤ | –í—ã–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ—Ç–∫–∞–∑ | –û–±—ä—ë–º (—É—Å–ª–æ–≤–Ω—ã–π) | –°–∫–æ—Ä–æ—Å—Ç—å —á—Ç–µ–Ω–∏—è | –°–∫–æ—Ä–æ—Å—Ç—å –∑–∞–ø–∏—Å–∏ |
|---|---|---|---|---|---|---|
| RAID 0 | –ß–µ—Ä–µ–¥–æ–≤–∞–Ω–∏–µ –±–µ–∑ –∏–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç–∏ | 2 | ‚ùå 0 | 100% | –û—Ç–ª–∏—á–Ω–∞—è | –û—Ç–ª–∏—á–Ω–∞—è |
| RAID 1 | –ó–µ—Ä–∫–∞–ª–∏—Ä–æ–≤–∞–Ω–∏–µ (–∫–∞–∂–¥—ã–π –±–ª–æ–∫ –ø–∏—à–µ—Ç—Å—è –¥–≤–∞–∂–¥—ã) | 2 | ‚úÖ 1 | 50% | –û—Ç–ª–∏—á–Ω–∞—è | –°—Ä–µ–¥–Ω—è—è |
| RAID 5 | –ë–ª–æ–∫-—á–µ—Ä–µ–¥–æ–≤–∞–Ω–∏–µ + —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–∞—è —á—ë—Ç–Ω–æ—Å—Ç—å | ‚â•3 | ‚úÖ 1 | N-1 –¥–∏—Å–∫–∞ | –•–æ—Ä–æ—à–∞—è | –°—Ä–µ–¥–Ω—è—è |
| RAID 6 | RAID 5 —Å –¥–≤–æ–π–Ω–æ–π —á—ë—Ç–Ω–æ—Å—Ç—å—é | ‚â•4 | ‚úÖ‚úÖ 2 | N-2 –¥–∏—Å–∫–∞ | –°—Ä–µ–¥–Ω—è—è | –ù–∏–∑–∫–∞—è |
| RAID 10 | –ó–µ—Ä–∫–∞–ª–∏—Ä–æ–≤–∞–Ω–∏–µ + —á–µ—Ä–µ–¥–æ–≤–∞–Ω–∏–µ (RAID 1 + RAID 0) | ‚â•4 | ‚úÖ 1 –Ω–∞ –∫–∞–∂–¥—É—é –ø–∞—Ä—É | 50% | –û—Ç–ª–∏—á–Ω–∞—è | –•–æ—Ä–æ—à–∞—è |
| RAID 50 | RAID 5 + RAID 0: –Ω–µ—Å–∫–æ–ª—å–∫–æ RAID 5, –æ–±—ä–µ–¥–∏–Ω—ë–Ω–Ω—ã–µ –≤ RAID 0 | ‚â•6 | ‚úÖ 1 –Ω–∞ –∫–∞–∂–¥—ã–π –ø–æ–¥–º–∞—Å—Å–∏–≤ | ~50‚Äì80% | –û—Ç–ª–∏—á–Ω–∞—è | –•–æ—Ä–æ—à–∞—è |
| RAID 60 | RAID 6 + RAID 0: –Ω–µ—Å–∫–æ–ª—å–∫–æ RAID 6, –æ–±—ä–µ–¥–∏–Ω—ë–Ω–Ω—ã–µ –≤ RAID 0 | ‚â•8 | ‚úÖ‚úÖ 2 –Ω–∞ –∫–∞–∂–¥—ã–π –ø–æ–¥–º–∞—Å—Å–∏–≤ | ~50‚Äì75% | –•–æ—Ä–æ—à–∞—è | –°—Ä–µ–¥–Ω—è—è |

!!! warning "–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ"

    **RAID 2/3/4** - —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –∏ –ø–æ—á—Ç–∏ –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö.

!!! note "–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ"

    **RAID 50/60** ‚Äî –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ —É—Ä–æ–≤–Ω–∏, —Ö–æ—Ä–æ—à–∏ –¥–ª—è –º–∞—Å—Å–∏–≤–æ–≤ —Å 8+ –¥–∏—Å–∫–∞–º–∏, –≥–¥–µ –Ω—É–∂–Ω–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å **RAID 5/6**.

!!! success "–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è"

    **–î–ª—è on-prem:**
    
    - –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: RAID 10 –Ω–∞ NVMe (4+ –¥–∏—Å–∫–∞).
    - –ë—é–¥–∂–µ—Ç–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ: RAID 6 —Å –≥–æ—Ä—è—á–∏–º spare (HDD 6+ –¥–∏—Å–∫–æ–≤).

    **–î–ª—è –æ–±–ª–∞–∫–∞:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, AWS EBS gp3 —Å multi-attach).

---

## üõ†Ô∏è –£—Ç–∏–ª–∏—Ç–∞ `mdadm`

!!! info "–ß—Ç–æ —Ç–∞–∫–æ–µ `mdadm`"

    **mdadm (multiple device administration)** ‚Äî —ç—Ç–æ –æ—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è, —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã—Ö RAID-–º–∞—Å—Å–∏–≤–æ–≤ –≤ Linux.

    –û–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –º–æ–¥—É–ª–µ–º —è–¥—Ä–∞ `md`.

!!! note "–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ"

    `mdadm` –∏–º–µ–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–µ–∂–∏–º–æ–≤ —Ä–∞–±–æ—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç –æ—Å–Ω–æ–≤–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –∫–æ–º–∞–Ω–¥—ã.

    | –†–µ–∂–∏–º | –û–ø–∏—Å–∞–Ω–∏–µ |
    | ---- | ---- |
    | **Create** | –°–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–π RAID-–º–∞—Å—Å–∏–≤. |
    | **Assemble** | –°–æ–±–∏—Ä–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –º–∞—Å—Å–∏–≤ –∏–∑ –¥–∏—Å–∫–æ–≤-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏). |
    | **Manage** | –£–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∏—Å–∫–∞–º–∏ –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º –º–∞—Å—Å–∏–≤–µ: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ, –ø–æ–º–µ—Ç–∫–∞ —Å–±–æ–π–Ω—ã—Ö. |
    | **Monitor** | –ó–∞–ø—É—Å–∫–∞–µ—Ç `mdadm` –≤ —Ä–µ–∂–∏–º–µ –¥–µ–º–æ–Ω–∞ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –º–∞—Å—Å–∏–≤–æ–≤. |
    | **Detail/Examine** | –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –º–∞—Å—Å–∏–≤–µ –∏–ª–∏ –µ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö. |

### Create Mode: –°–æ–∑–¥–∞–Ω–∏–µ –º–∞—Å—Å–∏–≤–∞

`mdadm --create /dev/md/MyArray --level=... --raid-devices=... /dev/sd...`

| –§–ª–∞–≥ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
| :--- | :--- | :--- |
| `--level`, `-l` | –£—Ä–æ–≤–µ–Ω—å RAID: `0`, `1`, `5`, `6`, `10`. | `--level=5` |
| `--raid-devices`, `-n` | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ **–∞–∫—Ç–∏–≤–Ω—ã—Ö** –¥–∏—Å–∫–æ–≤ –≤ –º–∞—Å—Å–∏–≤–µ. | `--raid-devices=4` |
| `--spare-devices`, `-x` | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ **—Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö (hot spare)** –¥–∏—Å–∫–æ–≤. | `--spare-devices=1` |
| `--chunk`, `-c` | –†–∞–∑–º–µ—Ä –±–ª–æ–∫–∞ —á–µ—Ä–µ–¥–æ–≤–∞–Ω–∏—è (stripe size) –≤ –∫–∏–ª–æ–±–∞–π—Ç–∞—Ö. –í–ª–∏—è–µ—Ç –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å. | `--chunk=256` |
| `--bitmap` | –°–æ–∑–¥–∞—ë—Ç **–±–∏—Ç–º–∞–ø** –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏ –º–∞—Å—Å–∏–≤–∞ –ø–æ—Å–ª–µ —Å–±–æ—è. `internal` —Ö—Ä–∞–Ω–∏—Ç –µ–≥–æ –Ω–∞ —Å–∞–º–æ–º –º–∞—Å—Å–∏–≤–µ. | `--bitmap=internal` |
| `--force`, `-f` | –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —Å–æ–∑–¥–∞—Ç—å –º–∞—Å—Å–∏–≤, –¥–∞–∂–µ –µ—Å–ª–∏ –Ω–∞ –¥–∏—Å–∫–∞—Ö –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ. **(–û–ø–∞—Å–Ω–æ!)** | |

### Assemble Mode: –°–±–æ—Ä–∫–∞ –º–∞—Å—Å–∏–≤–∞

`mdadm --assemble --scan`

| –§–ª–∞–≥ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
| :--- | :--- | :--- |
| `--scan`, `-s` | –ò—Å–∫–∞—Ç—å –º–∞—Å—Å–∏–≤—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤ `/etc/mdadm/mdadm.conf`. | `--scan` |
| `--uuid` | –°–æ–±—Ä–∞—Ç—å –º–∞—Å—Å–∏–≤ –ø–æ –µ–≥–æ UUID. | `--uuid=...` |
| `--force` | –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —Å–æ–±—Ä–∞—Ç—å –º–∞—Å—Å–∏–≤, –¥–∞–∂–µ –µ—Å–ª–∏ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç. | |

### Manage Mode: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∏—Å–∫–∞–º–∏

`mdadm /dev/md/MyArray --add /dev/sdX --fail /dev/sdY --remove /dev/sdZ`

| –§–ª–∞–≥ | –û–ø–∏—Å–∞–Ω–∏–µ | 
| :--- | :--- |
| `--add`, `-a` | –î–æ–±–∞–≤–∏—Ç—å –¥–∏—Å–∫ –≤ –º–∞—Å—Å–∏–≤ (–∫–∞–∫ hot spare –∏–ª–∏ –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è). |
| `--fail`, `-f` | –ü–æ–º–µ—Ç–∏—Ç—å –¥–∏—Å–∫ –∫–∞–∫ —Å–±–æ–π–Ω—ã–π. |
| `--remove`, `-r` | –£–¥–∞–ª–∏—Ç—å –¥–∏—Å–∫ –∏–∑ –º–∞—Å—Å–∏–≤–∞ (–æ–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–±–æ–π–Ω—ã–º –∏–ª–∏ —Ä–µ–∑–µ—Ä–≤–Ω—ã–º). |
| `--grow` | –ò–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –º–∞—Å—Å–∏–≤–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–∏—Å–∫–æ–≤). |

### Detail/Examine Mode: –ü—Ä–æ—Å–º–æ—Ç—Ä –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
| :--- | :--- |
| `mdadm --detail /dev/md0` | –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ **—Å–æ–±—Ä–∞–Ω–Ω–æ–º** –º–∞—Å—Å–∏–≤–µ. |
| `mdadm --examine /dev/sdb1` | –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ RAID (—Å—É–ø–µ—Ä–±–ª–æ–∫) –Ω–∞ **–æ—Ç–¥–µ–ª—å–Ω–æ–º –¥–∏—Å–∫–µ-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ**. –ü–æ–ª–µ–∑–Ω–æ, –µ—Å–ª–∏ –º–∞—Å—Å–∏–≤ –Ω–µ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è. |
| `cat /proc/mdstat` | **–°–∞–º—ã–π –≤–∞–∂–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞.** –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –≤—Å–µ—Ö RAID-–º–∞—Å—Å–∏–≤–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏, –≤–∫–ª—é—á–∞—è –ø—Ä–æ—Ü–µ—Å—Å –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏. |

--- 

## üöÄ –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –∏ –ø—Ä–∏–º–µ—Ä—ã

### RAID 10 –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (NVMe SSD)

**–°—Ü–µ–Ω–∞—Ä–∏–π:** –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ —Å–∏—Å—Ç–µ–º–∞ –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏–∏, –≥–¥–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å —Å–ª—É—á–∞–π–Ω–æ–π –∑–∞–ø–∏—Å–∏ –∏ —á—Ç–µ–Ω–∏—è.

```bash
# –°–æ–∑–¥–∞—ë–º RAID 10 –∏–∑ 4-—Ö NVMe –¥–∏—Å–∫–æ–≤
# --chunk=256: —Ö–æ—Ä–æ—à–∏–π —Ä–∞–∑–º–µ—Ä –±–ª–æ–∫–∞ –¥–ª—è —Å–º–µ—à–∞–Ω–Ω—ã—Ö –Ω–∞–≥—Ä—É–∑–æ–∫
# --bitmap=internal: —É—Å–∫–æ—Ä—è–µ—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ —Å–±–æ—è
mdadm --create /dev/md/db_storage --verbose \
      --level=10 \
      --raid-devices=4 \
      /dev/nvme0n1 /dev/nvme1n1 /dev/nvme2n1 /dev/nvme3n1 \
      --chunk=256 \
      --bitmap=internal
```

### RAID 6 —Å –≥–æ—Ä—è—á–∏–º —Ä–µ–∑–µ—Ä–≤–æ–º –¥–ª—è –Ω–∞–¥—ë–∂–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è (HDD)

**–°—Ü–µ–Ω–∞—Ä–∏–π:** –§–∞–π–ª–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä –∏–ª–∏ –∞—Ä—Ö–∏–≤, –≥–¥–µ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å –∏ –æ–±—ä—ë–º –≤–∞–∂–Ω–µ–µ –ø–∏–∫–æ–≤–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏. Hot spare –¥–∏—Å–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–º–µ–Ω–∏—Ç —Å–±–æ–π–Ω—ã–π.

```bash
# –°–æ–∑–¥–∞—ë–º RAID 6 –∏–∑ 5 –¥–∏—Å–∫–æ–≤ + 1 hot spare
mdadm --create /dev/md/archive --verbose \
      --level=6 \
      --raid-devices=5 \
      /dev/sdb /dev/sdc /dev/sdd /dev/sde /dev/sdf \
      --spare-devices=1 /dev/sdg
```

### –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–ß—Ç–æ–±—ã –º–∞—Å—Å–∏–≤ —Å–æ–±–∏—Ä–∞–ª—Å—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–ª —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å–±–æ—è—Ö:

1.  **–°–æ—Ö—Ä–∞–Ω—è–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:**
    ```bash
    # –°–∫–∞–Ω–∏—Ä—É–µ–º –∞–∫—Ç–∏–≤–Ω—ã–µ –º–∞—Å—Å–∏–≤—ã –∏ –¥–æ–±–∞–≤–ª—è–µ–º –≤ —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
    mdadm --detail --scan >> /etc/mdadm/mdadm.conf
    ```

2.  **–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
    –í —Ñ–∞–π–ª–µ `/etc/mdadm/mdadm.conf` —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –∏ —É–∫–∞–∂–∏—Ç–µ —Å–≤–æ—é –ø–æ—á—Ç—É:
    `MAILADDR admin@example.com`

3.  **–û–±–Ω–æ–≤–ª—è–µ–º initramfs:**
    –≠—Ç–æ –Ω—É–∂–Ω–æ, —á—Ç–æ–±—ã —è–¥—Ä–æ –º–æ–≥–ª–æ —Å–æ–±—Ä–∞—Ç—å –º–∞—Å—Å–∏–≤ –Ω–∞ —Ä–∞–Ω–Ω–µ–º —ç—Ç–∞–ø–µ –∑–∞–≥—Ä—É–∑–∫–∏, –æ—Å–æ–±–µ–Ω–Ω–æ –µ—Å–ª–∏ –Ω–∞ –Ω—ë–º –∫–æ—Ä–Ω–µ–≤–∞—è –§–°.
    ```bash
    update-initramfs -u
    ```

### –ò–º–∏—Ç–∞—Ü–∏—è —Å–±–æ—è –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

1.  **–ü–æ–º–µ—á–∞–µ–º –¥–∏—Å–∫ –∫–∞–∫ —Å–±–æ–π–Ω—ã–π:**
    ```bash
    mdadm /dev/md/archive --fail /dev/sde
    ```
    –¢–µ–ø–µ—Ä—å `cat /proc/mdstat` –ø–æ–∫–∞–∂–µ—Ç `[4/5] [_UUUU]` –∏ –º–∞—Å—Å–∏–≤ –±—É–¥–µ—Ç –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ `degraded`. –ï—Å–ª–∏ –±—ã–ª –Ω–∞—Å—Ç—Ä–æ–µ–Ω hot spare, –æ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—á–Ω—ë—Ç –ø–µ—Ä–µ—Å–±–æ—Ä–∫—É.

2.  **–£–¥–∞–ª—è–µ–º "—Å–ª–æ–º–∞–Ω–Ω—ã–π" –¥–∏—Å–∫ –∏–∑ –º–∞—Å—Å–∏–≤–∞:**
    ```bash
    mdadm /dev/md/archive --remove /dev/sde
    ```

3.  **–î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–π –¥–∏—Å–∫ (–ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —ç—Ç–æ `/dev/sdh`):**
    ```bash
    mdadm /dev/md/archive --add /dev/sdh
    ```
    –î–∏—Å–∫ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –∫–∞–∫ hot spare, –µ—Å–ª–∏ –º–∞—Å—Å–∏–≤ —É–∂–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏–ª—Å—è, –∏–ª–∏ —Å—Ä–∞–∑—É –Ω–∞—á–Ω—ë—Ç –ø–µ—Ä–µ—Å–±–æ—Ä–∫—É, –µ—Å–ª–∏ spare-–¥–∏—Å–∫–∞ –Ω–µ –±—ã–ª–æ.

---

### Go Example: –ü–∞—Ä—Å–∏–Ω–≥ `/proc/mdstat`

–ü—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–∞ Go, –∫–æ—Ç–æ—Ä–∞—è –ø–∞—Ä—Å–∏—Ç `/proc/mdstat` –∏ –≤—ã–≤–æ–¥–∏—Ç —Å—Ç–∞—Ç—É—Å RAID-–º–∞—Å—Å–∏–≤–æ–≤ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ. –≠—Ç–æ –±–æ–ª–µ–µ –Ω–∞–¥—ë–∂–Ω—ã–π —Å–ø–æ—Å–æ–± –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –≤ —Å–∫—Ä–∏–ø—Ç–∞—Ö, —á–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `grep` –∏ `awk`.

```go
package main

import (
	"fmt"
	"io/ioutil"
	"os"
	"regexp"
	"strings"
)

type RaidArray struct {
	Name      string
	Active    bool
	Level     string
	Devices   []string
	TotalDevs int
	ActiveDevs int
	Status    string
}

func main() {
	content, err := ioutil.ReadFile("/proc/mdstat")
	if err != nil {
		if os.IsNotExist(err) {
			fmt.Println("No RAID arrays found (/proc/mdstat does not exist).")
			return
		}
		fmt.Fprintf(os.Stderr, "Error reading /proc/mdstat: %v\n", err)
		os.Exit(1)
	}

	arrays := parseMdstat(string(content))

	fmt.Printf("%-10s %-8s %-10s %-10s %s\n", "NAME", "ACTIVE", "LEVEL", "STATUS", "DEVICES")
	for _, arr := range arrays {
		status := fmt.Sprintf("%d/%d", arr.ActiveDevs, arr.TotalDevs)
		fmt.Printf("%-10s %-8t %-10s %-10s %v\n", arr.Name, arr.Active, arr.Level, status, arr.Devices)
	}
}

func parseMdstat(content string) []RaidArray {
	var arrays []RaidArray
	lines := strings.Split(content, "\n")

	// –†–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –º–∞—Å—Å–∏–≤–µ
	// md0 : active raid1 sdb[0] sdc[1]
	re := regexp.MustCompile(`^(\w+) : (\w+) (\w+) (.*)$`)
	// –†–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è —Å—Ç–∞—Ç—É—Å–∞
	//      1953103872 blocks super 1.2 level 5, 512k chunk, algorithm 2 [3/3] [UUU]
	statusRe := regexp.MustCompile(`\[(\d+)/(\d+)\] \[([U_]+)\]$`)

	for i := 0; i < len(lines); i++ {
		if strings.HasPrefix(lines[i], "Personalities") || lines[i] == "" {
			continue
		}

		matches := re.FindStringSubmatch(lines[i])
		if len(matches) > 0 {
			arr := RaidArray{
				Name:   matches[1],
				Active: matches[2] == "active",
				Level:  matches[3],
			}

			// –ü–∞—Ä—Å–∏–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
			devRe := regexp.MustCompile(`(\w+\[\d+\](?:\(F\))?)`)
			devMatches := devRe.FindAllString(matches[4], -1)
			arr.Devices = devMatches

			// –ò—â–µ–º —Å—Ç—Ä–æ–∫—É —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º
			if i+1 < len(lines) {
				statusMatches := statusRe.FindStringSubmatch(lines[i+1])
				if len(statusMatches) > 0 {
					fmt.Sscanf(statusMatches[1], "%d", &arr.TotalDevs)
					fmt.Sscanf(statusMatches[2], "%d", &arr.ActiveDevs)
					arr.Status = statusMatches[3]
				}
			}
			arrays = append(arrays, arr)
		}
	}
	return arrays
}
```
