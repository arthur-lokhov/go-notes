---
title: –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∏ –∑–∞–¥–∞—á
---

# ‚öñÔ∏è –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∏ –∑–∞–¥–∞—á (Schedulers)

!!! info "–ß—Ç–æ —Ç–∞–∫–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫?"
    **–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á** ‚Äî —ç—Ç–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —è–¥—Ä–∞, –∫–æ—Ç–æ—Ä—ã–π —Ä–µ—à–∞–µ—Ç, –∫–∞–∫–æ–º—É –ø—Ä–æ—Ü–µ—Å—Å—É –∏ –Ω–∞ –∫–∞–∫–æ–º —è–¥—Ä–µ CPU –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω–æ–µ –≤—Ä–µ–º—è. –ï–≥–æ –≥–ª–∞–≤–Ω–∞—è —Ü–µ–ª—å ‚Äî —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—Ç—å —Ä–µ—Å—É—Ä—Å—ã CPU –º–µ–∂–¥—É –≤—Å–µ–º–∏ –∑–∞–ø—É—â–µ–Ω–Ω—ã–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –æ—Ç–∑—ã–≤—á–∏–≤–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã –∏ —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤.

–î–ª—è DevOps-–∏–Ω–∂–µ–Ω–µ—Ä–∞ –ø–æ–Ω–∏–º–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ –ø–æ–º–æ–≥–∞–µ—Ç:
- –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é CPU.
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–æ–≤–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏, —Ç–∞–∫–∏–µ –∫–∞–∫ `load average`.
- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `cgroups` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–∞–º–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤.

---

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏

### –ö–≤–∞–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏ (Timeslice)

–ö–∞–∂–¥–æ–º—É –ø—Ä–æ—Ü–µ—Å—Å—É –≤—ã–¥–µ–ª—è–µ—Ç—Å—è –Ω–µ–±–æ–ª—å—à–æ–π –ø—Ä–æ–º–µ–∂—É—Ç–æ–∫ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, –Ω–∞–∑—ã–≤–∞–µ–º—ã–π **–∫–≤–∞–Ω—Ç–æ–º**. –ö–æ–≥–¥–∞ –∫–≤–∞–Ω—Ç –∏—Å—Ç–µ–∫–∞–µ—Ç, –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –º–æ–∂–µ—Ç –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å CPU –Ω–∞ –¥—Ä—É–≥–æ–π –ø—Ä–æ—Ü–µ—Å—Å. –≠—Ç–æ—Ç –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è **–≤—ã—Ç–µ—Å–Ω–µ–Ω–∏–µ–º (preemption)**.

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã

- **`nice` (–æ—Ç -20 –¥–æ 19):**
  - –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –ø—Ä–∏–æ—Ä–∏—Ç–µ–∑–∞—Ü–∏–∏ –¥–ª—è –æ–±—ã—á–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤.
  - –ß–µ–º –Ω–∏–∂–µ –∑–Ω–∞—á–µ–Ω–∏–µ `nice`, —Ç–µ–º –≤—ã—à–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–±–æ–ª—å—à–µ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏).
  - `-20` ‚Äî —Å–∞–º—ã–π –≤—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç, `19` ‚Äî —Å–∞–º—ã–π –Ω–∏–∑–∫–∏–π.
  - –£–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–∞–º–∏ `nice` –∏ `renice`.

- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ (Real-Time):**
  - –î–ª—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤, —Ç—Ä–µ–±—É—é—â–∏—Ö –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–∫–ª–∏–∫–∞.
  - –ü—Ä–æ—Ü–µ—Å—Å—ã —Å RT-–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º –≤—Å–µ–≥–¥–∞ –≤—ã—Ç–µ—Å–Ω—è—é—Ç –æ–±—ã—á–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã.

### –ö–ª–∞—Å—Å—ã –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (Scheduling Classes)

–í Linux —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–ª–∞—Å—Å–æ–≤ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è. –ü—Ä–æ—Ü–µ—Å—Å –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –æ–¥–Ω–æ–º—É –∏–∑ –Ω–∏—Ö.

1.  **`SCHED_DEADLINE`:** –î–ª—è –∑–∞–¥–∞—á —Å –∂–µ—Å—Ç–∫–∏–º–∏ –¥–µ–¥–ª–∞–π–Ω–∞–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö).
2.  **`SCHED_FIFO` / `SCHED_RR`:** –î–ª—è –∑–∞–¥–∞—á —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏. `FIFO` (First-In, First-Out) –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏–ª–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏. `RR` (Round-Robin) –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ —Ç–µ—á–µ–Ω–∏–µ –∫–≤–∞–Ω—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏.
3.  **`SCHED_NORMAL` (–∏–ª–∏ `SCHED_OTHER`):** –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∫–ª–∞—Å—Å –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤. –ó–¥–µ—Å—å —Ä–∞–±–æ—Ç–∞–µ—Ç **CFS**.

---

## üß† CFS (Completely Fair Scheduler)

!!! success "CFS ‚Äî —ç—Ç–æ –æ—Å–Ω–æ–≤–Ω–æ–π –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –¥–ª—è –æ–±—ã—á–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –≤ Linux. –ï–≥–æ —Ü–µ–ª—å ‚Äî –æ–±–µ—Å–ø–µ—á–∏—Ç—å "–∏–¥–µ–∞–ª—å–Ω—É—é" –º–Ω–æ–≥–æ–∑–∞–¥–∞—á–Ω–æ—Å—Ç—å, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–π –∫–∞–∂–¥—ã–π –ø—Ä–æ—Ü–µ—Å—Å –ø–æ–ª—É—á–∞–µ—Ç —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤—É—é –¥–æ–ª—é –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏."

**–ö–∞–∫ –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- CFS –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–≤–∞–Ω—Ç—ã –≤—Ä–µ–º–µ–Ω–∏. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –æ–Ω –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç **–≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (vruntime)** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞.
- `vruntime` ‚Äî —ç—Ç–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞, –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Å —É—á–µ—Ç–æ–º –µ–≥–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ (`nice`).
- –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –≤—Å–µ–≥–¥–∞ –≤—ã–±–∏—Ä–∞–µ—Ç –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–æ—Ç –ø—Ä–æ—Ü–µ—Å—Å, —É –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–∞–∏–º–µ–Ω—å—à–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ `vruntime`.
- –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –ø—Ä–æ—Ü–µ—Å—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–≥–æ –Ω–µ –≤—ã–ø–æ–ª–Ω—è–ª–∏—Å—å –∏–ª–∏ –∏–º–µ—é—Ç –≤—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç, "–Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç" –º–µ–Ω—å—à–∏–π `vruntime` –∏ –ø–æ–ª—É—á–∞—é—Ç CPU —Ä–∞–Ω—å—à–µ.
- –î–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **–∫—Ä–∞—Å–Ω–æ-—á–µ—Ä–Ω–æ–µ –¥–µ—Ä–µ–≤–æ**, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –±—ã—Å—Ç—Ä–æ –Ω–∞—Ö–æ–¥–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º `vruntime`.

---

## üõ†Ô∏è –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ –º–µ—Ç—Ä–∏–∫–∏

### `top` / `htop`

- **`ni` (nice):** –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å–∞.
- **`PR` (priority):** –û–±—â–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç, –≤–∫–ª—é—á–∞—è RT.
- **`%CPU`:** –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CPU.
- **`load average`:**
  - –°—Ä–µ–¥–Ω–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤, –Ω–∞—Ö–æ–¥—è—â–∏—Ö—Å—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (`Running`) –∏–ª–∏ –æ–∂–∏–¥–∞–Ω–∏—è I/O (`Uninterruptible Sleep`) –∑–∞ 1, 5 –∏ 15 –º–∏–Ω—É—Ç.
  - **–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è:** –ï—Å–ª–∏ `load average` –Ω–∞ –æ–¥–Ω–æ —è–¥—Ä–æ —Å—Ç–∞–±–∏–ª—å–Ω–æ –≤—ã—à–µ 1, —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –µ—Å—Ç—å –æ—á–µ—Ä–µ–¥—å –ø—Ä–æ—Ü–µ—Å—Å–æ–≤, –æ–∂–∏–¥–∞—é—â–∏—Ö CPU, –∏ —Å–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω–∞.

### `ps`

–ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–ª–∞—Å—Å –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å–∞.

```bash
ps -eo pid,comm,cls,pri,ni
# PID    COMMAND          CLS PRI  NI
# 1      systemd          TS   19   0
# ...
# 1234   my-app           TS   19   0
# TS = SCHED_NORMAL (CFS)
# FF = SCHED_FIFO
# RR = SCHED_RR
```

### `cgroups` (Control Groups)

!!! info "`cgroups` ‚Äî —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º —è–¥—Ä–∞ –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –∏–∑–æ–ª—è—Ü–∏–∏ —Ä–µ—Å—É—Ä—Å–æ–≤ (CPU, –ø–∞–º—è—Ç—å, I/O) –¥–ª—è –≥—Ä—É–ø–ø –ø—Ä–æ—Ü–µ—Å—Å–æ–≤. –≠—Ç–æ –æ—Å–Ω–æ–≤–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–∏ (Docker, Kubernetes)."

–î–ª—è CPU `cgroups` –ø–æ–∑–≤–æ–ª—è—é—Ç:

- **`cpu.shares`:**
  - –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –≤–µ—Å. –ï—Å–ª–∏ —É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ A `shares=1024`, –∞ —É B `shares=512`, —Ç–æ A –ø–æ–ª—É—á–∏—Ç –≤ –¥–≤–∞ —Ä–∞–∑–∞ –±–æ–ª—å—à–µ CPU, —á–µ–º B, –ø—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏–∏.
  - –≠—Ç–æ –∞–Ω–∞–ª–æ–≥ `nice` –¥–ª—è –≥—Ä—É–ø–ø –ø—Ä–æ—Ü–µ—Å—Å–æ–≤.

- **`cpu.cfs_quota_us` –∏ `cpu.cfs_period_us`:**
  - –ñ–µ—Å—Ç–∫–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ.
  - `period` ‚Äî —ç—Ç–æ –ø–µ—Ä–∏–æ–¥ –≤—Ä–µ–º–µ–Ω–∏ –≤ –º–∏–∫—Ä–æ—Å–µ–∫—É–Ω–¥–∞—Ö (–æ–±—ã—á–Ω–æ 100–º—Å).
  - `quota` ‚Äî —Å–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –∏–∑ —ç—Ç–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞ –≥—Ä—É–ø–ø–∞ –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è.
  - **–ü—Ä–∏–º–µ—Ä:** `quota=50000`, `period=100000` –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ –±–æ–ª–µ–µ 50% –æ–¥–Ω–æ–≥–æ —è–¥—Ä–∞ CPU.

!!! danger "CPU Throttling"
    –ö–æ–≥–¥–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏—Å—á–µ—Ä–ø—ã–≤–∞–µ—Ç —Å–≤–æ—é –∫–≤–æ—Ç—É, –µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å—ã **–ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è (throttled)** –¥–æ –Ω–∞—á–∞–ª–∞ —Å–ª–µ–¥—É—é—â–µ–≥–æ –ø–µ—Ä–∏–æ–¥–∞. –≠—Ç–æ —á–∞—Å—Ç–∞—è –ø—Ä–∏—á–∏–Ω–∞ "–Ω–µ–æ–±—ä—è—Å–Ω–∏–º—ã—Ö" –∑–∞–¥–µ—Ä–∂–µ–∫ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö, —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –≤ Kubernetes —Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º–∏ `limits`.

    –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ `cpu_throttled_time` –≤ –º–µ—Ç—Ä–∏–∫–∞—Ö cgroup ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ —É—Å–ª–æ–≤–∏–µ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ —Ç–∞–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º.
