---
title: –ú–æ–¥—É–ª–∏ —è–¥—Ä–∞
---

# üß© –ú–æ–¥—É–ª–∏ —è–¥—Ä–∞

Linux –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–º–æ–Ω–æ–ª–∏—Ç–Ω–æ–µ —è–¥—Ä–æ**, –≤ –∫–æ—Ç–æ—Ä–æ–º –æ—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ —è–¥—Ä–∞ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –≤ –æ–¥–∏–Ω –±–∏–Ω–∞—Ä—å.

–û–¥–Ω–∞–∫–æ –æ–Ω–æ –º–æ–∂–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —Ä–∞—Å—à–∏—Ä—è—Ç—å—Å—è –∑–∞ —Å—á—ë—Ç **–º–æ–¥—É–ª–µ–π —è–¥—Ä–∞** (`.ko`), –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –∑–∞–≥—Ä—É–∂–∞—Ç—å –∏ –≤—ã–≥—Ä—É–∂–∞—Ç—å –≤ —Ä–∞–Ω—Ç–∞–π–º–µ –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –û–°.

!!! info "–ß—Ç–æ —Ç–∞–∫–æ–µ –º–æ–¥—É–ª–∏ —è–¥—Ä–∞"

    **–ú–æ–¥—É–ª–∏ —è–¥—Ä–∞** ‚Äî —ç—Ç–æ –æ–±—ä–µ–∫—Ç–Ω—ã–µ —Ñ–∞–π–ª—ã (kernel objects), –∫–æ–º–ø–∏–ª–∏—Ä—É–µ–º—ã–µ –æ—Ç–¥–µ–ª—å–Ω–æ –∏ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ —Å —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–µ–π —è–¥—Ä–∞.

    –û–Ω–∏ —Ä–∞—Å—à–∏—Ä—è—é—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å: –æ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –Ω–æ–≤–æ–≥–æ –∂–µ–ª–µ–∑–∞ –¥–æ —Å–µ—Ç–µ–≤—ã—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤.

---

## üóÇ –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –º–æ–¥—É–ª–µ–π

!!! info "–í—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–æ–¥—É–ª—è—Ö —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ `/lib/modules/$(uname -r)`."

| –§–∞–π–ª                      | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                                                                                                                                            | –§–æ—Ä–º–∞—Ç   |
| ------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------- |
| **`modules.alias`**       | –°–æ–¥–µ—Ä–∂–∏—Ç –∞–ª–∏–∞—Å—ã –¥–ª—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤, —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ —Å –º–æ–¥—É–ª—è–º–∏. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `modprobe` –¥–ª—è –∞–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∏ –Ω—É–∂–Ω–æ–≥–æ –º–æ–¥—É–ª—è –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, USB VID\:PID). | –¢–µ–∫—Å—Ç    |
| **`modules.alias.bin`**   | –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –±–∏–Ω–∞—Ä–Ω–∞—è –≤–µ—Ä—Å–∏—è `modules.alias`, —É—Å–∫–æ—Ä—è—é—â–∞—è —Ä–∞–±–æ—Ç—É –∑–∞–≥—Ä—É–∑—á–∏–∫–æ–≤ –º–æ–¥—É–ª–µ–π (`kmod`, `modprobe`).                                                         | –ë–∏–Ω–∞—Ä–Ω—ã–π |
| **`modules.builtin`**     | –°–ø–∏—Å–æ–∫ **–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –≤ —è–¥—Ä–æ** (`builtin`) –º–æ–¥—É–ª–µ–π. –≠—Ç–∏ –º–æ–¥—É–ª–∏ –Ω–µ–ª—å–∑—è –≤—ã–≥—Ä—É–∑–∏—Ç—å ‚Äî –æ–Ω–∏ —É–∂–µ –≤ —è–¥—Ä–µ.                                                                       | –¢–µ–∫—Å—Ç    |
| **`modules.builtin.bin`** | –ë–∏–Ω–∞—Ä–Ω–∞—è —Ñ–æ—Ä–º–∞ `modules.builtin`. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –∫—ç—à.                                                                                                               | –ë–∏–Ω–∞—Ä–Ω—ã–π |
| **`modules.dep`**         | –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–µ–∂–¥—É –º–æ–¥—É–ª—è–º–∏: –∫–∞–∫–æ–π `.ko` –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–∞–∫–æ–≥–æ –¥—Ä—É–≥–æ–≥–æ. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `modprobe`.                                                                | –¢–µ–∫—Å—Ç    |
| **`modules.dep.bin`**     | –ë—ã—Å—Ç—Ä—ã–π –±–∏–Ω–∞—Ä–Ω—ã–π –∫—ç—à `modules.dep`. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.                                                                                 | –ë–∏–Ω–∞—Ä–Ω—ã–π |
| **`modules.devname`**     | –°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∏–º–µ–Ω —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –∏ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –Ω–∏–º–∏ –º–æ–¥—É–ª–µ–π (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è `udev`).                                                                                    | –¢–µ–∫—Å—Ç    |
| **`modules.order`**       | –°–ø–∏—Å–æ–∫ –º–æ–¥—É–ª–µ–π –≤ –ø–æ—Ä—è–¥–∫–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏/–ª–∏–Ω–∫–æ–≤–∫–∏ —è–¥—Ä–∞. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ —Å–±–æ—Ä–∫–µ `initramfs`.                                                                               | –¢–µ–∫—Å—Ç    |
| **`modules.softdep`**     | –ó–∞–¥–∞–µ—Ç **–º—è–≥–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: –∫–∞–∫–∏–µ –º–æ–¥—É–ª–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–≥—Ä—É–∂–µ–Ω—ã **–≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å**, —Ö–æ—Ç—è —ç—Ç–æ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å (`modprobe` –±—É–¥–µ—Ç —É—á–∏—Ç—ã–≤–∞—Ç—å –ø–æ—Ä—è–¥–æ–∫).    | –¢–µ–∫—Å—Ç    |
| **`modules.symbols`**     | –¢–∞–±–ª–∏—Ü–∞ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ –º–æ–¥—É–ª–µ–π, –∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è –ø—Ä–∏ –ª–∏–Ω–∫–æ–≤–∫–µ –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (`insmod`, `modprobe`).                                                  | –¢–µ–∫—Å—Ç    |
| **`modules.symbols.bin`** | –ë–∏–Ω–∞—Ä–Ω–∞—è –≤–µ—Ä—Å–∏—è `modules.symbols`.                                                                                                                                    | –ë–∏–Ω–∞—Ä–Ω—ã–π |

!!! note "–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ"

    –§–∞–π–ª—ã —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º `.bin` ‚Äî —ç—Ç–æ **—Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –±–∏–Ω–∞—Ä–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è** —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö `.alias`, `.dep`, `.symbols` –∏ —Ç.–¥.

    –û–Ω–∏:

    - –°–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ `depmod`.
    - **–£—Å–∫–æ—Ä—è—é—Ç —Ä–∞–±–æ—Ç—É** —É—Ç–∏–ª–∏—Ç `modprobe`, `kmod`, `insmod` –∏ –¥—Ä—É–≥–∏—Ö, –∏–∑–±–µ–≥–∞—é—â–∏—Ö –ø–∞—Ä—Å–∏–Ω–≥–∞ –±–æ–ª—å—à–∏—Ö —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤.
    - –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–º **–≤ —Ä–∞–Ω—Ç–∞–π–º–µ**, –∞ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –≤–µ—Ä—Å–∏–∏ ‚Äî –¥–ª—è —á—Ç–µ–Ω–∏—è/–æ—Ç–ª–∞–¥–∫–∏ –≤—Ä—É—á–Ω—É—é.

!!! info "–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è `kernel/`"

    –¢–∞–∫–∂–µ –≤–Ω—É—Ç—Ä–∏ `/lib/modules/$(uname -r)` –µ—Å—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è `kernel/`.

    –ò –µ—Å–ª–∏ —Ñ–∞–π–ª—ã –≤—ã—à–µ —Ö—Ä–∞–Ω—è—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –º–æ–¥—É–ª—è—Ö, —Ç–æ –≤ `kernel/` —Ö—Ä–∞–Ω—è—Ç—Å—è —Å–∞–º–∏ –º–æ–¥—É–ª–∏ —è–¥—Ä–∞.

---

## üß∞ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ–¥—É–ª—è–º–∏

| –£—Ç–∏–ª–∏—Ç–∞    | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                            |
| ---------- | ----------------------------------------------------- |
| `lsmod`    | –ü—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –º–æ–¥—É–ª–µ–π                          |
| `modinfo`  | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–æ–¥—É–ª–µ, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã                        |
| `modprobe` | –ó–∞–≥—Ä—É–∑–∫–∞/–≤—ã–≥—Ä—É–∑–∫–∞ –º–æ–¥—É–ª—è —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏              |
| `insmod`   | –†—É—á–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ `.ko` –±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π                |
| `rmmod`    | –ü—Ä—è–º–∞—è –≤—ã–≥—Ä—É–∑–∫–∞ (–±–µ–∑ —Ä–µ–∫—É—Ä—Å–∏–∏)                        |
| `depmod`   | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–æ–≤—ã—Ö –º–æ–¥—É–ª–µ–π |
| `dmesg`    | –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ —è–¥—Ä–∞ (–≤–∞–∂–Ω–æ –ø—Ä–∏ —Ç—Ä–∞–±–ª—à—É—Ç–∏–Ω–≥–µ)          |

### üßæ `lsmod`

!!! info "–ö–æ–º–∞–Ω–¥–∞ `lsmod` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –º–æ–¥—É–ª–µ–π, –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –≤ —è–¥—Ä–æ –≤ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç."

–ö–æ–º–∞–Ω–¥–∞ –∏–º–µ–µ—Ç —Ñ–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞ —Å–ª–µ–¥—É—é—â–µ–≥–æ –≤–∏–¥–∞:

```bash
Module           Size    Used by
iptable_filter   12800   1
br_netfilter     32768   0

# Module ‚Äî –∏–º—è –º–æ–¥—É–ª—è
# Size ‚Äî —Ä–∞–∑–º–µ—Ä –≤ –±–∞–π—Ç–∞—Ö (–Ω–µ —Ç–æ—á–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç RAM)
# Used by ‚Äî —á–∏—Å–ª–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–¥—Ä—É–≥–∏–µ –º–æ–¥—É–ª–∏/—è–¥—Ä–æ)
```

!!! example "–ü—Ä–æ–≤–µ—Ä–∫–∞, –∑–∞–≥—Ä—É–∂–µ–Ω –Ω—É–∂–Ω—ã–π –º–æ–¥—É–ª—å"

    –ö–æ–º–∞–Ω–¥–æ–π –Ω–∏–∂–µ –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞–∫–∏–µ –º–æ–¥—É–ª–∏, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å `drm` –∑–∞–≥—Ä—É–∂–µ–Ω—ã –≤ —Ç–µ–∫—É—â–∏–π –º–æ–º–µ–Ω—Ç.

    ```bash
    lsmod | grep drm
    ```

!!! note "–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ"

    `lsmod` –ø—Ä–æ—Å—Ç–æ —á–∏—Ç–∞–µ—Ç `/proc/modules`.

    –û–Ω **–Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –≤ —è–¥—Ä–æ –º–æ–¥—É–ª–∏** (`builtin`), —Ç–æ–ª—å–∫–æ –∑–∞–≥—Ä—É–∂–∞–µ–º—ã–µ (`loadable`).

### üß¨ `modinfo`

!!! info "–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ `.ko` —Ñ–∞–π–ª–∞: –∞–≤—Ç–æ—Ä, –ª–∏—Ü–µ–Ω–∑–∏—è, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, –ø—É—Ç—å –Ω–∞ –¥–∏—Å–∫–µ."

–î–∞–Ω–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ –≤—ã–≥–ª—è–¥–∏—Ç —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

```bash
modinfo drm
```

| –ü–æ–ª–µ –≤—ã–≤–æ–¥–∞ `modinfo`                                       | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                                            | –ü—Ä–∏–º–µ—Ä                                                         | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π                                                                |
| ----------------------------------------------------------- | --------------------------------------------------------------------- | -------------------------------------------------------------- | -------------------------------------------------------------------------- |
| **filename**                                                | –ü–æ–ª–Ω—ã–π –ø—É—Ç—å –∫ `.ko` —Ñ–∞–π–ª—É –º–æ–¥—É–ª—è                                      | `/lib/modules/6.1.0/kernel/drivers/net/wireguard/wireguard.ko` | –ü–æ–º–æ–≥–∞–µ—Ç –ø–æ–Ω—è—Ç—å, –æ—Ç–∫—É–¥–∞ –º–æ–¥—É–ª—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è                                 |
| **license**                                                 | –õ–∏—Ü–µ–Ω–∑–∏—è, –ø–æ–¥ –∫–æ—Ç–æ—Ä–æ–π —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –º–æ–¥—É–ª—å                         | `GPL`, `Dual BSD/GPL`, `Proprietary`                           | **–í–∞–∂–Ω–æ:** —è–¥—Ä–æ –º–æ–∂–µ—Ç –æ—Ç–∫–∞–∑–∞—Ç—å –≤ –∑–∞–≥—Ä—É–∑–∫–µ –º–æ–¥—É–ª—è —Å –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ–π –ª–∏—Ü–µ–Ω–∑–∏–µ–π |
| **description**                                             | –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –º–æ–¥—É–ª—è                                    | `WireGuard secure network tunnel`                              | –ü–æ–ª–µ–∑–Ω–æ –ø—Ä–∏ –æ—Ç–ª–∞–¥–∫–µ –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏                                            |
| **author**                                                  | –ê–≤—Ç–æ—Ä –∏–ª–∏ –∫–æ–º–ø–∞–Ω–∏—è-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫                                        | `Jason A. Donenfeld <Jason@zx2c4.com>`                         | –ò–Ω–æ–≥–¥–∞ –º–æ–∂–µ—Ç —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ –≤–Ω–µ—à–Ω–∏–π/–ø—Ä–æ–ø—Ä–∏–µ—Ç–∞—Ä–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫                   |
| **alias**                                                   | –®–∞–±–ª–æ–Ω—ã —É—Å—Ç—Ä–æ–π—Å—Ç–≤, –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö –º–æ–¥—É–ª—å –ø–æ–¥–≥—Ä—É–∂–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏      | `usb:v0BDAp8153d*dc*dsc*dp*ic*isc*ip*`                         | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ–¥—Å–∏—Å—Ç–µ–º–æ–π `udev` –∏ `modprobe`                               |
| **depends**                                                 | –°–ø–∏—Å–æ–∫ –¥—Ä—É–≥–∏—Ö –º–æ–¥—É–ª–µ–π, –æ—Ç –∫–æ—Ç–æ—Ä—ã—Ö –∑–∞–≤–∏—Å–∏—Ç –¥–∞–Ω–Ω—ã–π                      | `libblake2s`, `udp_tunnel`                                     | –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ                                        |
| **intree**                                                  | –£–∫–∞–∑—ã–≤–∞–µ—Ç, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –º–æ–¥—É–ª—å —á–∞—Å—Ç—å—é –¥–µ—Ä–µ–≤–∞ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤ —è–¥—Ä–∞ (`Y`/`N`) | `Y`                                                            | N –æ–∑–Ω–∞—á–∞–µ—Ç –≤–Ω–µ—à–Ω–∏–µ –º–æ–¥—É–ª–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏–∑ DKMS)                              |
| **vermagic**                                                | –í–µ—Ä—Å–∏—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –º–æ–¥—É–ª—è                                              | `6.1.0 SMP preempt mod_unload`                                 | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —è–¥—Ä–æ–º –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –º–æ–¥—É–ª–µ–π                               |
| **name**                                                    | –ò–º—è –º–æ–¥—É–ª—è (–æ–±—ã—á–Ω–æ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å basename `.ko`)                        | `wireguard`                                                    | –ú–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω–æ –ø—Ä–∏ —Ä—É—á–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–µ —á–µ—Ä–µ–∑ `modprobe`                    |
| **parm**                                                    | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –º–æ–¥—É–ª—é                              | `debug:Enable debug output (bool)`                             | –û–¥–∏–Ω –∏–∑ —Å–∞–º—ã—Ö —Ü–µ–Ω–Ω—ã—Ö —Ä–∞–∑–¥–µ–ª–æ–≤ ‚Äî –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –º–æ–¥—É–ª—è   |
| **srcversion**                                              | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –≤–µ—Ä—Å–∏–∏ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤                            | `CF6E99105D5B9DFADA173C4`                                      | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–æ–¥—É–ª—è–º–∏                      |
| **retpoline**                                               | –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∑–∞—â–∏—Ç—ã –æ—Ç Spectre (`Y`/`N`)                                 | `Y`                                                            | –í–∞–∂–Ω–æ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤ –ø—Ä–æ–¥–µ                                             |
| **sig\_id / signer / sig\_key / sig\_hashalgo / signature** | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ø–∏—Å–∏ –º–æ–¥—É–ª—è                              | `RSA`, `sha512`                                                | –ê–∫—Ç—É–∞–ª—å–Ω–æ –≤ —Å–∏—Å—Ç–µ–º–∞—Ö —Å **signed kernel modules** (–Ω–∞–ø—Ä–∏–º–µ—Ä, Secure Boot)   |

!!! warning "–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ"

    –ï—Å–ª–∏ —Ñ–∞–π–ª `.ko` —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω –ø–æ–¥ –¥—Ä—É–≥–æ–µ —è–¥—Ä–æ, `modinfo` –º–æ–∂–µ—Ç –Ω–µ –æ—Ç—Ä–∞–±–æ—Ç–∞—Ç—å –∏–ª–∏ –≤—ã–¥–∞—Ç—å –º—É—Å–æ—Ä.

### üß™ `modprobe`

!!! info "–û—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–æ–¥—É–ª—è–º–∏. –ó–∞–≥—Ä—É–∂–∞–µ—Ç/–≤—ã–≥—Ä—É–∂–∞–µ—Ç –º–æ–¥—É–ª—å –∏ –µ–≥–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, –æ–ø–∏—Ä–∞—è—Å—å –Ω–∞ `modules.dep` –∏ `modprobe.conf`."

!!! example "–°–ø–æ—Å–æ–±—ã –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è `modprobe`"

    ```bash
    modprobe e1000e # –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥—É–ª—è
    modprobe -r e1000e # –í—ã–≥—Ä—É–∑–∫–∞ –º–æ–¥—É–ª—è
    modprobe e1000e InterruptThrottleRate=3000 # –ó–∞–≥—Ä—É–∑–∫–∞ —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
    ```

!!! success "–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è"

    –ò—Å–ø–æ–ª—å–∑—É–π `modprobe` –≤–º–µ—Å—Ç–æ `insmod/rmmod`, —Ç–∞–∫ –∫–∞–∫ –æ–Ω:

    - –£—á–∏—Ç—ã–≤–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏,
    - –£–≤–∞–∂–∞–µ—Ç `modprobe.d/`,
    - –ß–∏—Ç–∞–µ—Ç `alias`, `softdep` –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã.

!!! danger "–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –æ–ø–∞—Å–Ω–æ–µ –º–µ—Å—Ç–æ"

    –ï—Å–ª–∏ –º–æ–¥—É–ª—å —É–∂–µ –≤—Å—Ç—Ä–æ–µ–Ω –≤ —è–¥—Ä–æ (`builtin`), `modprobe` –Ω–µ –¥–∞—Å—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ ‚Äî –æ–Ω –ø—Ä–æ—Å—Ç–æ –Ω–∏—á–µ–≥–æ –Ω–µ —Å–¥–µ–ª–∞–µ—Ç.
    
    –¢–∞–∫–∂–µ `modprobe -r` –Ω–µ —É–¥–∞–ª–∏—Ç –º–æ–¥—É–ª—å, –µ—Å–ª–∏ –æ–Ω –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏.
    –ù–µ –≤—Å–µ–≥–¥–∞ –ø–æ–Ω—è—Ç–Ω–æ, **—á—Ç–æ** –µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç ‚Äî –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –≤—Ä—É—á–Ω—É—é —Ä–∞–∑–±–∏—Ä–∞—Ç—å—Å—è.

### üì¶ `insmod`

!!! info "–ó–∞–≥—Ä—É–∂–∞–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π `.ko` —Ñ–∞–π–ª –≤—Ä—É—á–Ω—É—é, –±–µ–∑ –ø–æ–∏—Å–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, alias‚Äô–æ–≤ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏."

–ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥—É–ª—è —á–µ—Ä–µ–∑ `insmod`:

```bash
insmod e1000e
```

!!! warning "–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ"

    - –ù–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (`insmod e1000e.ko` ‚Äî –Ω–µ –ø–æ–¥–≥—Ä—É–∑–∏—Ç `ptp.ko`),
    - –ù–µ —É–≤–∞–∂–∞–µ—Ç `modprobe.d/`, `softdep`, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ alias,
    - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∫–∞–∫ –∞—Ä–≥—É–º–µ–Ω—Ç—ã C-style: `param=value`.

!!! tip "–°–æ–≤–µ—Ç"

    –ò—Å–ø–æ–ª—å–∑—É–π `modprobe` –≤ –ø—Ä–æ–¥–µ, –∞ `insmod` ‚Äî **—Ç–æ–ª—å–∫–æ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏**.

### üßπ `rmmod`

!!! info "–£–¥–∞–ª—è–µ—Ç –º–æ–¥—É–ª—å –∏–∑ —è–¥—Ä–∞ –Ω–∞–ø—Ä—è–º—É—é."

–£–¥–∞–ª–µ–Ω–∏–µ –º–æ–¥—É–ª—è —á–µ—Ä–µ–∑ `rmmod`:

```bash
rmmod e1000e
```

!!! danger "–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –æ–ø–∞—Å–Ω–æ–µ –º–µ—Å—Ç–æ"

    - –ù–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.
    –£–¥–∞–ª–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ –º–æ–¥—É–ª—è –ø—Ä–∏–≤–µ–¥—ë—Ç –∫ `kernel panic` –∏–ª–∏ –ø–æ–¥–≤–∏—Å–∞–Ω–∏—é.
    - –ù–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `Used by` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ ‚Äî –º–æ–∂–Ω–æ –ø–æ–≤—Ä–µ–¥–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ —è–¥—Ä–∞.

!!! tip "–°–æ–≤–µ—Ç"

    –ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–π `modprobe -r`, –∫–æ—Ç–æ—Ä—ã–π —É–¥–∞–ª—è–µ—Ç —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏.

### üîÅ `depmod`

!!! info "–ß—Ç–æ –¥–µ–ª–∞–µ—Ç `depmod`"

    –°–∫–∞–Ω–∏—Ä—É–µ—Ç `/lib/modules/$(uname -r)` –∏ –∏–Ω–¥–µ–∫—Å–∏—Ä—É–µ—Ç –º–æ–¥—É–ª–∏, —Å–æ–∑–¥–∞–≤–∞—è —Å–ª–µ–¥—É—é—â–∏–µ —Ñ–∞–π–ª—ã:

    - `modules.dep`,
    - `modules.alias`,
    - `modules.symbols`,
    - –∏ `.bin` –≤–µ—Ä—Å–∏–∏.

–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ `depmod` –¥–ª—è –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π:

```bash
depmod -a
```

!!! note "–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ"

    –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–∞–Ω–Ω—É—é –∫–æ–º–∞–Ω–¥—É:

    - –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏/—É–¥–∞–ª–µ–Ω–∏—è –º–æ–¥—É–ª–µ–π –≤—Ä—É—á–Ω—É—é,
    - –ü—Ä–∏ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–µ —è–¥—Ä–∞,
    - –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ DKMS –º–æ–¥—É–ª–µ–π,
    - –ü—Ä–∏ –∫–∞—Å—Ç–æ–º–Ω–æ–π —Å–±–æ—Ä–∫–µ `initramfs`.

!!! warning "–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ"

    –ë–µ–∑ –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è `modprobe` –º–æ–∂–µ—Ç –Ω–µ –Ω–∞–π—Ç–∏ –≤–∞—à –º–æ–¥—É–ª—å –¥–∞–∂–µ –µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å –Ω–∞ –¥–∏—Å–∫–µ.

---

## üîß DKMS

!!! info "–ß—Ç–æ —Ç–∞–∫–æ–µ `DKMS`"

    **DKMS (Dynamic Kernel Module Support)** ‚Äî —Å–∏—Å—Ç–µ–º–∞, –ø–æ–∑–≤–æ–ª—è—é—â–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞—Ç—å –º–æ–¥—É–ª–∏ —è–¥—Ä–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∏–ª–∏ —Å–º–µ–Ω–µ —è–¥—Ä–∞.

    –≠—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –º–æ–¥—É–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –≤—Ö–æ–¥—è—Ç –≤ –æ—Å–Ω–æ–≤–Ω–æ–µ –¥–µ—Ä–µ–≤–æ —è–¥—Ä–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä:

    - `wireguard-dkms`,
    - `zfs-dkms`,
    - `nvidia-dkms`.

!!! info "–ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã `DKMS`"

    1. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è DKMS-–ø–∞–∫–µ—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, `wireguard-dkms`).
    2. –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `/usr/src/`.
    3. –ü—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –Ω–æ–≤–æ–≥–æ —è–¥—Ä–∞ `dkms` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
        - –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ—Ç –º–æ–¥—É–ª—å –ø–æ–¥ –Ω–æ–≤–æ–µ —è–¥—Ä–æ,
        - —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –µ–≥–æ –≤ `/lib/modules/$(uname -r)/updates/dkms/`,
        - –≤—ã–∑—ã–≤–∞–µ—Ç `depmod`.

!!! example "–ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å `DKMS`"

    ```bash
    dkms status             # –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç—É—Å –º–æ–¥—É–ª–µ–π
    dkms autoinstall        # –§–æ—Ä—Å–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ—Å–±–æ—Ä–∫—É –¥–ª—è –≤—Å–µ—Ö —è–¥–µ—Ä
    dkms remove ...         # –£–¥–∞–ª–∏—Ç—å –º–æ–¥—É–ª—å
    ```

!!! note "–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ"

    –ï—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã **Kernel Headers**, —Ç–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –∫–∞—Å—Ç–æ–º–Ω—ã–µ –∏–ª–∏ —Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ —è–¥—Ä–∞.

---

## üßæ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–æ–¥—É–ª–µ–π

### üì• –ü–µ—Ä–µ–¥–∞—á–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

!!! info "–ú–æ–¥—É–ª–∏ —è–¥—Ä–∞ –º–æ–≥—É—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ ‚Äî –∞–Ω–∞–ª–æ–≥ –æ–ø—Ü–∏–π –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏, –≤–ª–∏—è—é—â–∏—Ö –Ω–∞ –∏—Ö –ø–æ–≤–µ–¥–µ–Ω–∏–µ."

!!! example "–û–¥–Ω–æ—Ä–∞–∑–æ–≤–∞—è –ø–µ—Ä–µ–¥–∞—á–∞"

    ```bash
    modprobe e1000e InterruptThrottleRate=1000
    ```

    –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –±–µ—Ä—É—Ç—Å—è –∏–∑ –≤—ã–≤–æ–¥–∞:

    ```bash
    modinfo e1000e | grep parm
    ```

!!! example "–ü–æ—Å—Ç–æ—è–Ω–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞"

    –í –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `/etc/modprobe.d` –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª –∏ –ø—Ä–æ–ø–∏—Å–∞—Ç—å —Ç–∞–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã.

    ```bash
    # /etc/modprobe.d/e1000e.conf
    options e1000e InterruptThrottleRate=1000
    ```

!!! success "–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è"

    –í—Å–µ–≥–¥–∞ —Å–æ—Ö—Ä–∞–Ω—è–π –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ `modprobe.d`, –∞ –Ω–µ –ø–æ–ª–∞–≥–∞–π—Å—è –Ω–∞ —Ä—É—á–Ω–æ–π –≤—ã–∑–æ–≤ `modprobe` ‚Äî —Ç–∞–∫ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±—É–¥–µ—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å—Å—è –¥–∞–∂–µ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –º–æ–¥—É–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ alias –∏–ª–∏ udev.

### üì¶ –ú–æ–¥—É–ª–∏ –≤ `initramfs`

!!! info "–ß—Ç–æ —Ç–∞–∫–æ–µ initramfs"

    **initramfs** ‚Äî —ç—Ç–æ –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ñ–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞, –∫–æ—Ç–æ—Ä—É—é —è–¥—Ä–æ –º–æ–Ω—Ç–∏—Ä—É–µ—Ç –ø–µ—Ä–≤—ã–º –¥–µ–ª–æ–º –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ.

    –í –Ω–µ–π –¥–æ–ª–∂–Ω—ã –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è **–¥—Ä–∞–π–≤–µ—Ä—ã** –∏ –º–æ–¥—É–ª–∏, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∫–æ—Ä–Ω–µ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã: –¥–∏—Å–∫–∏, RAID, LUKS, VPN –∏ —Ç.–¥.

!!! example "–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–æ–¥—É–ª—è –≤ initramfs (Debian/Ubuntu)"

    –ß—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –º–æ–¥—É–ª—å –≤ `initramfs` –Ω—É–∂–Ω–æ –µ–≥–æ –ø—Ä–æ–ø–∏—Å–∞—Ç—å –≤ —Ñ–∞–π–ª `/etc/initramfs-tools/modules`.

    ```bash
    # /etc/initramfs-tools/modules
    dm-crypt
    wireguard
    ```

    –ò –∑–∞—Ç–µ–º –ø–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞–∑:

    ```bash
    update-initramfs -u
    ```

!!! note "–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ"

    –ù–∞ `dracut`-–±–∞–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö (RHEL/Fedora/Alma) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥—Ä—É–≥–æ–π –º–µ—Ö–∞–Ω–∏–∑–º: `dracut.conf.d/`.

    –ù–∞–ø—Ä–∏–º–µ—Ä: `add_drivers+=" wireguard "`.

!!! danger "–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –æ–ø–∞—Å–Ω–æ–µ –º–µ—Å—Ç–æ"

    –ï—Å–ª–∏ –º–æ–¥—É–ª—å –Ω–µ –ø–æ–ø–∞–ª –≤ `initramfs`, —Ç–æ –∑–∞–≥—Ä—É–∑–∫–∞ —Å–∏—Å—Ç–µ–º—ã –º–æ–∂–µ—Ç –∑–∞–≤–∏—Å–Ω—É—Ç—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ rootfs –Ω–∞ LUKS/ZFS).

### ‚ö°Ô∏è –Ø–≤–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ 

!!! info "–ö–æ–≥–¥–∞ –º–æ–¥—É–ª—å –Ω–µ –≥—Ä—É–∑–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ—Ç–æ–º—É —á—Ç–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø–æ–∑–∂–µ, –∏–ª–∏ —ç—Ç–æ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –º–æ–¥—É–ª—å), –µ–≥–æ –º–æ–∂–Ω–æ –ø—Ä–æ–ø–∏—Å–∞—Ç—å —è–≤–Ω–æ."

!!! example "–Ø–≤–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥—É–ª–µ–π"

    –ú–æ–¥—É–ª–∏ –¥–ª—è —è–≤–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–∂–Ω–æ –ø—Ä–æ–ø–∏—Å–∞—Ç—å –≤ —Ñ–∞–π–ª–µ `/etc/modules-load.d/custom.conf`.

    –î–æ–±–∞–≤–ª—è—è —Ç—É–¥–∞ –º–æ–¥—É–ª–∏ –∏–º–µ–π—Ç–µ –≤ –≤–∏–¥—É, —á—Ç–æ –æ–¥–Ω–∞ —Å—Ç—Ä–æ–∫–∞ - –æ–¥–∏–Ω –º–æ–¥—É–ª—å.

    ```bash
    # /etc/modules-load.d/custom.conf
    wireguard
    btrfs
    ```

!!! note "–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ"

    –ú–æ–¥—É–ª–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã systemd-–º–µ—Ö–∞–Ω–∏–∑–º–æ–º `systemd-modules-load.service` –≤–æ –≤—Ä–µ–º—è —Ä–∞–Ω–Ω–µ–π —Å—Ç–∞–¥–∏–∏ –∑–∞–≥—Ä—É–∑–∫–∏.

!!! tip "–°–æ–≤–µ—Ç"

    –ò—Å–ø–æ–ª—å–∑—É–π `/etc/modules-load.d/` –¥–ª—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã—Ö –º–æ–¥—É–ª–µ–π (VPN, —Ñ–∞–π–ª–æ–≤—ã–µ —Å–∏—Å—Ç–µ–º—ã, –±–ª–æ–∫–∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è), —á—Ç–æ–±—ã –Ω–µ –ø–∏—Å–∞—Ç—å –∫–æ—Å—Ç—ã–ª–∏ –≤ init-—Å–∫—Ä–∏–ø—Ç—ã.

### üß± –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏

!!! note "–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ"

    –ò–Ω–æ–≥–¥–∞ –±—ã–≤–∞–µ—Ç, —á—Ç–æ –Ω—É–∂–Ω–æ –∑–∞–ø—Ä–µ—Ç–∏—Ç—å –∞–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫—É –º–æ–¥—É–ª–µ–π.

    –ù–∞–ø—Ä–∏–º–µ—Ä:

    1. –í—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø—Ä–æ–ø—Ä–∏–µ—Ç–∞—Ä–Ω—ã–π –¥—Ä–∞–π–≤–µ—Ä –≤–º–µ—Å—Ç–æ nouveau.
    2. –£ –≤–∞—Å –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏–π –º–æ–¥—É–ª—å –Ω–∞ staging-—Å–µ—Ä–≤–µ—Ä–µ.

!!! example "–î–æ–±–∞–≤–ª–µ–Ω–∏—è –º–æ–¥—É–ª—è –≤ Blacklist"

    –í –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `/etc/modprobe.d` –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª –∏ –ø—Ä–æ–ø–∏—Å–∞—Ç—å —Ç–∞–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã.

    ```bash
    # /etc/modprobe.d/blacklist-nouveau.conf
    blacklist nouveau
    options nouveau modeset=0

    # blacklist ‚Äî –∑–∞–ø—Ä–µ—â–∞–µ—Ç `modprobe` –∞–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫—É.
    # options ... ‚Äî –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –º–æ–∂–µ—Ç –æ—Ç–∫–ª—é—á–∏—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `modeset=0`).
    ```

!!! warning "–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ"

    **Blacklist –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö (builtin) –º–æ–¥—É–ª–µ–π**, —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∏ —É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –≤ —è–¥—Ä–µ –∫ –º–æ–º–µ–Ω—Ç—É —á—Ç–µ–Ω–∏—è `modprobe.d`.

### üß¨ –ú—è–≥–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

!!! info "–ò–º–µ–µ—Ç—Å—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ `softdep`, –∫–æ—Ç–æ—Ä–∞—è —É–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π –¥–∞–Ω–Ω–æ–≥–æ –º–æ–¥—É–ª—è –∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥—Ä—É–≥–∏–µ, –Ω–æ —ç—Ç–æ –Ω–µ —Å—Ç—Ä–æ–≥–æ–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ."

!!! example "–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º—è–≥–∫–æ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏"

    ```bash
    # /etc/modprobe.d/softdep.conf
    softdep wireguard pre: iptables

    # `pre:` ‚Äî —Å–Ω–∞—á–∞–ª–∞ –∑–∞–≥—Ä—É–∑–∏—Ç—å iptables, –ø–æ—Ç–æ–º wireguard
    # `post:` ‚Äî —Å–Ω–∞—á–∞–ª–∞ wireguard, –∑–∞—Ç–µ–º iptables
    ```

### ‚öôÔ∏è –ò–∑–º–µ–Ω–µ–Ω–∏–µ –≤ runtime

!!! note "–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ"

    –ï—Å–ª–∏ –º–æ–¥—É–ª—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç, –µ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –º–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å –Ω–∞ –ª–µ—Ç—É, –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –∏–ª–∏ –≤—ã–≥—Ä—É–∑–∫–∏.

    –≠—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `sysfs`, –ø–æ –ø—É—Ç–∏: `/sys/module/<–∏–º—è_–º–æ–¥—É–ª—è>/parameters/<–ø–∞—Ä–∞–º–µ—Ç—Ä>`.

!!! example "–ü—Ä–∏–º–µ—Ä –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –º–æ–¥—É–ª—è –≤ runtime"

    ```bash
    cat /sys/module/e1000e/parameters/InterruptThrottleRate
    echo 1000 > /sys/module/e1000e/parameters/InterruptThrottleRate
    ```

!!! warning "–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ"

    –ù–µ –≤—Å–µ –º–æ–¥—É–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç runtime –∏–∑–º–µ–Ω–µ–Ω–∏—è.

    –ß—Ç–æ–±—ã —ç—Ç–æ —É–∑–Ω–∞—Ç—å –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `modinfo`.

---

## üîê –ü–æ–¥–ø–∏—Å–∏ –º–æ–¥—É–ª–µ–π

!!! info "Secure Boot –∏ –ø–æ–¥–ø–∏—Å–∏ –º–æ–¥—É–ª–µ–π"

    –ü—Ä–∏ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω–æ–º **Secure Boot** —è–¥—Ä–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç **—Ç–æ–ª—å–∫–æ –ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–µ –º–æ–¥—É–ª–∏**.

    –≠—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º –∑–∞—â–∏—Ç—ã, –∑–∞–ø—Ä–µ—â–∞—é—â–∏–π –∑–∞–ø—É—Å–∫ —Å—Ç–æ—Ä–æ–Ω–Ω–µ–≥–æ –∫–æ–¥–∞ –≤ —è–¥—Ä–µ.

!!! warning "–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ"

    –ï—Å–ª–∏ –º–æ–¥—É–ª—å –Ω–µ –ø–æ–¥–ø–∏—Å–∞–Ω –∏–ª–∏ –ø–æ–¥–ø–∏—Å—å –Ω–µ –¥–æ–≤–µ—Ä–µ–Ω–∞ ‚Äî `modprobe` –≤—ã–¥–∞—Å—Ç –æ—à–∏–±–∫—É:
    
    ```bash
    modprobe: ERROR: could not insert 'mymodule': Operation not permitted
    ```
    
    `dmesg` –ø–æ–∫–∞–∂–µ—Ç: `module verification failed: signature and/or required key missing`.

!!! example "–ü–æ–¥–ø–∏—Å—å –º–æ–¥—É–ª—è"

    –£—Ç–∏–ª–∏—Ç–æ–π `sign-file` –∏–∑ `scripts/` –∫–∞—Ç–∞–ª–æ–≥–∞ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤ —è–¥—Ä–∞ –º–æ–∂–Ω–æ –ø–æ–¥–ø–∏—Å–∞—Ç—å –º–æ–¥—É–ª—å –≤—Ä—É—á–Ω—É—é.

    ```bash
    scripts/sign-file sha256 my_key.priv my_cert.pem mymodule.ko
    ```

!!! note "–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ"

    `modinfo` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞–ª–∏—á–∏–µ –ø–æ–¥–ø–∏—Å–µ–π —É –º–æ–¥—É–ª–µ–π.

    ```bash
    modinfo wireguard | grep -i sig
    sig_id:      PKCS#7
    signer:      Build Certificate
    sig_key:     ...
    ```

