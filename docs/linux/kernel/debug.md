---
title: –û—Ç–ª–∞–¥–∫–∞ —è–¥—Ä–∞
---

# üêõ –û—Ç–ª–∞–¥–∫–∞ —è–¥—Ä–∞: –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã DevOps

–î–ª—è DevOps-–∏–Ω–∂–µ–Ω–µ—Ä–∞ "–æ—Ç–ª–∞–¥–∫–∞ —è–¥—Ä–∞" ‚Äî —ç—Ç–æ –Ω–µ –ø–æ–∏—Å–∫ –±–∞–≥–æ–≤ –≤ –∏—Å—Ö–æ–¥–Ω–æ–º –∫–æ–¥–µ `vmlinuz`, –∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–æ—â–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ —è–¥—Ä–∞ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø—Ä–æ–±–ª–µ–º –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –≤ —Ä–∞–±–æ—Ç–∞—é—â–µ–π —Å–∏—Å—Ç–µ–º–µ.

!!! info "–ö–ª—é—á–µ–≤–∞—è –∑–∞–¥–∞—á–∞"
    –ù–∞–π—Ç–∏ –ø—Ä–∏—á–∏–Ω—É, –ø–æ—á–µ–º—É —Å–∏—Å—Ç–µ–º–∞ –∏–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –º–µ–¥–ª–µ–Ω–Ω–æ, –ø–∞–¥–∞–µ—Ç –∏–ª–∏ –≤–µ–¥–µ—Ç —Å–µ–±—è –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É—è –¥–ª—è —ç—Ç–æ–≥–æ –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏ –∏ –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏—è.

---

## üõ†Ô∏è –û—Å–Ω–æ–≤–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

### `dmesg`

!!! info "–ü–µ—Ä–≤—ã–π —Ä—É–±–µ–∂ –æ–±–æ—Ä–æ–Ω—ã. `dmesg` (display message) –≤—ã–≤–æ–¥–∏—Ç –±—É—Ñ–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π —è–¥—Ä–∞."

–≠—Ç–æ –ø–µ—Ä–≤–æ–µ –º–µ—Å—Ç–æ, –∫—É–¥–∞ –Ω—É–∂–Ω–æ —Å–º–æ—Ç—Ä–µ—Ç—å, –µ—Å–ª–∏:
- –û—Ç–≤–∞–ª–∏–ª–æ—Å—å –∂–µ–ª–µ–∑–æ (–¥–∏—Å–∫–∏, —Å–µ—Ç–µ–≤—ã–µ –∫–∞—Ä—Ç—ã).
- –ú–æ–¥—É–ª—å —è–¥—Ä–∞ –Ω–µ —Å–º–æ–≥ –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è.
- –°—Ä–∞–±–æ—Ç–∞–ª OOM Killer.
- –ü—Ä–æ–∏–∑–æ—à–µ–ª Kernel Panic.

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
dmesg -T

# –û—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
dmesg -T | grep -i -E "error|warn|fail"

# –°–ª–µ–¥–∏—Ç—å –∑–∞ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
dmesg -w
```

### `perf`

!!! info "–ú–æ—â–Ω–µ–π—à–∏–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏. `perf` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **Performance Monitoring Units (PMU)** –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ –¥–ª—è —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏ –Ω–∞–∫–ª–∞–¥–Ω—ã–º–∏ —Ä–∞—Å—Ö–æ–¥–∞–º–∏."

–° –µ–≥–æ –ø–æ–º–æ—â—å—é –º–æ–∂–Ω–æ –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã:
- –ö–∞–∫–∞—è —Ñ—É–Ω–∫—Ü–∏—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∏–ª–∏ —è–¥—Ä–µ –ø–æ—Ç—Ä–µ–±–ª—è–µ—Ç –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ CPU?
- –ì–¥–µ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –∑–∞–¥–µ—Ä–∂–∫–∏ (cache misses, branch mispredictions)?
- –ö–∞–∫ —á–∞—Å—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç —Å–∏—Å—Ç–µ–º–Ω—ã–µ –≤—ã–∑–æ–≤—ã?

!!! example "–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è"
    ```bash
    # –°–æ–±—Ä–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ —Å–∏—Å—Ç–µ–º–Ω—ã–º —Å–æ–±—ã—Ç–∏—è–º –¥–ª—è –∫–æ–º–∞–Ω–¥—ã
    perf stat -e cycles,instructions,cache-misses,branch-misses sleep 5

    # –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞—Ç—å CPU –¥–ª—è –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã –≤ —Ç–µ—á–µ–Ω–∏–µ 10 —Å–µ–∫—É–Ω–¥
    perf record -g -a sleep 10

    # –°–æ–∑–¥–∞—Ç—å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –æ—Ç—á–µ—Ç (flamegraph)
    perf report
    ```

### `ftrace`

!!! info "`ftrace` (function tracer) ‚Äî —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏ –≤—ã–∑–æ–≤–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π —è–¥—Ä–∞. –û–Ω –≤—Å—Ç—Ä–æ–µ–Ω –≤ —è–¥—Ä–æ –∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `debugfs`."

`ftrace` –ø–æ–ª–µ–∑–µ–Ω, –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –ø–æ–Ω—è—Ç—å, –∫–∞–∫–æ–π –ø—É—Ç—å –ø—Ä–æ—Ö–æ–¥–∏—Ç –∫–æ–¥ –≤–Ω—É—Ç—Ä–∏ —è–¥—Ä–∞.

!!! example "–¢—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ `openat`"
    ```bash
    # 1. –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏
    cd /sys/kernel/debug/tracing

    # 2. –í–∫–ª—é—á–∞–µ–º —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫—É —Ñ—É–Ω–∫—Ü–∏–π
    echo 'function' > current_tracer

    # 3. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ñ–∏–ª—å—Ç—Ä –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é
    echo 'SyS_openat' > set_ftrace_filter

    # 4. –ó–∞–ø—É—Å–∫–∞–µ–º —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫—É
    echo 1 > tracing_on
    # ... –≤—ã–ø–æ–ª–Ω—è–µ–º –¥–µ–π—Å—Ç–≤–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–∑–æ–≤—É—Ç openat ...
    echo 0 > tracing_on

    # 5. –°–º–æ—Ç—Ä–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    cat trace
    ```

### `bpftrace` –∏ `eBPF`

!!! info "–°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∏ –±–æ–ª–µ–µ –≥–∏–±–∫–∞—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ `ftrace` –∏ `perf`. `eBPF` –ø–æ–∑–≤–æ–ª—è–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–π –∫–æ–¥ –≤ —è–¥—Ä–µ."

`bpftrace` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π —è–∑—ã–∫ –¥–ª—è –Ω–∞–ø–∏—Å–∞–Ω–∏—è eBPF-—Å–∫—Ä–∏–ø—Ç–æ–≤ –Ω–∞ –ª–µ—Ç—É. –≠—Ç–æ –∏–¥–µ–∞–ª—å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏.

!!! example "–û—Ç—Å–ª–µ–¥–∏—Ç—å –≤—Å–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –≤—ã–∑–æ–≤—ã `execve`"
    ```bash
    bpftrace -e 'tracepoint:syscalls:sys_enter_execve { printf("%s -> %s\\n", comm, str(args->filename)); }'
    ```

---

## üö® –ê–Ω–∞–ª–∏–∑ Kernel Panic

!!! info "Kernel Panic ‚Äî —ç—Ç–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–π —è–¥—Ä–æ –Ω–µ –º–æ–∂–µ—Ç –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å —Ä–∞–±–æ—Ç—É. –°–∏—Å—Ç–µ–º–∞ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö."

–î–ª—è DevOps –≤–∞–∂–Ω–æ –Ω–µ —Å–∞–º —Ñ–∞–∫—Ç –ø–∞–Ω–∏–∫–∏, –∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–Ω—è—Ç—å –µ–µ –ø—Ä–∏—á–∏–Ω—É –ø–æ—Å—Ç—Ñ–∞–∫—Ç—É–º.

### `kdump`

**kdump** ‚Äî —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏ (–¥–∞–º–ø) –≤ –º–æ–º–µ–Ω—Ç –ø–∞–Ω–∏–∫–∏ –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ –∞–Ω–∞–ª–∏–∑–∞.

**–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1.  –í –ø–∞–º—è—Ç–∏ —Ä–µ–∑–µ—Ä–≤–∏—Ä—É–µ—Ç—Å—è –Ω–µ–±–æ–ª—å—à–∞—è –æ–±–ª–∞—Å—Ç—å –¥–ª—è "–∑–∞—Ö–≤–∞—Ç—ã–≤–∞—é—â–µ–≥–æ" —è–¥—Ä–∞ (`capture kernel`).
2.  –ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø–∞–Ω–∏–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è —ç—Ç–æ–º—É —è–¥—Ä—É.
3.  –ó–∞—Ö–≤–∞—Ç—ã–≤–∞—é—â–µ–µ —è–¥—Ä–æ –º–æ–Ω—Ç–∏—Ä—É–µ—Ç —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–º–ø –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–π –ø–∞–º—è—Ç–∏ –≤ —Ñ–∞–π–ª (–æ–±—ã—á–Ω–æ –≤ `/var/crash`).
4.  –°–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è.

### `crash`

**crash** ‚Äî —É—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –¥–∞–º–ø–æ–≤, —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö `kdump`.

!!! example "–¢–∏–ø–∏—á–Ω—ã–π —Å–µ–∞–Ω—Å –∞–Ω–∞–ª–∏–∑–∞"
    ```bash
    # –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–º–ø –∏ —Å–∏–º–≤–æ–ª—ã —è–¥—Ä–∞
    crash /var/crash/2023-10-27-14\:30/vmcore /usr/lib/debug/lib/modules/$(uname -r)/vmlinux

    # –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥ —è–¥—Ä–∞ –ø–µ—Ä–µ–¥ –ø–∞–Ω–∏–∫–æ–π
    crash> log

    # –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å backtrace (—Å—Ç–µ–∫ –≤—ã–∑–æ–≤–æ–≤) –¥–ª—è –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
    crash> bt -a

    # –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å, –∫–∞–∫–æ–π –ø—Ä–æ—Ü–µ—Å—Å –±—ã–ª –∞–∫—Ç–∏–≤–µ–Ω –≤ –º–æ–º–µ–Ω—Ç –ø–∞–Ω–∏–∫–∏
    crash> ps -m | grep ">"
    ```

!!! success "–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è"
    –ù–∞ –≤—Å–µ—Ö production-—Å–µ—Ä–≤–µ—Ä–∞—Ö –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω `kdump`. –ë–µ–∑ –Ω–µ–≥–æ –∞–Ω–∞–ª–∏–∑ –ø—Ä–∏—á–∏–Ω —Å–±–æ—è –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –≥–∞–¥–∞–Ω–∏–µ.
