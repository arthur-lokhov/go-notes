---
title: cAdvisor
description: Обзор cAdvisor, инструмента для сбора метрик о ресурсах и производительности контейнеров.
---

# cAdvisor: Мониторинг ресурсов контейнеров

!!! abstract "Тезис"
    **cAdvisor (Container Advisor)** — это инструмент с открытым исходным кодом от Google, который собирает, агрегирует, обрабатывает и экспортирует информацию о ресурсах и производительности запущенных контейнеров. Он обеспечивает детальную информацию о потреблении CPU, памяти, файловой системы и сети для каждого контейнера.

---

## Ключевые возможности

-   **Сбор метрик**: Автоматически обнаруживает все контейнеры на хосте и собирает метрики об их производительности.
-   **Поддержка различных рантаймов**: Работает с Docker, containerd, CRI-O и другими.
-   **Веб-интерфейс**: Предоставляет простой веб-интерфейс для просмотра текущего состояния контейнеров на хосте.
-   **Экспорт в Prometheus**: Имеет встроенную поддержку для экспорта метрик в формате Prometheus, что является основным сценарием его использования.

!!! info "Интеграция с Kubelet"
    В **Kubernetes** cAdvisor встроен непосредственно в **Kubelet**, агент, работающий на каждом узле. Это означает, что вам не нужно устанавливать cAdvisor отдельно в кластере Kubernetes — Kubelet уже предоставляет эндпоинт `/metrics/cadvisor` с метриками в формате Prometheus.

---

## Архитектура

cAdvisor работает как демон на каждом хосте, который вы хотите мониторить.

!!! example "Схема работы cAdvisor"
    ```plaintext
    +--------------------Host--------------------+
    | +------------------+   +-----------------+ |
    | |   Container A    |   |   Container B   | |
    | +------------------+   +-----------------+ |
    |                                          |
    | +----------------------------------------+ |
    | |                cAdvisor                | |
    | | (Collects metrics from all containers) | |
    | +------------------+---------------------+ |
    |                    |                       |
    | (/metrics endpoint)|                       |
    +---------+----------+-----------------------+
              | (Prometheus scrapes)
    +---------v----------+
    |   Prometheus       |
    +--------------------+
    ```

---

## Основные метрики

cAdvisor предоставляет множество метрик, включая:

-   `container_cpu_usage_seconds_total`: Общее время использования CPU в секундах.
-   `container_memory_usage_bytes`: Текущее использование памяти в байтах.
-   `container_network_receive_bytes_total`: Общее количество полученных байт по сети.
-   `container_network_transmit_bytes_total`: Общее количество отправленных байт по сети.
-   `container_fs_usage_bytes`: Использование файловой системы в байтах.

!!! success "Рекомендация"
    Используйте **cAdvisor** вместе с **Prometheus** и **Grafana** для построения комплексной системы мониторинга ресурсов контейнеров. Это стандартный и проверенный стек для Kubernetes.
