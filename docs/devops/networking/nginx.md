---
title: Nginx
description: Обзор Nginx, высокопроизводительного веб-сервера и reverse proxy.
---

# Nginx: Производительность и надежность

!!! abstract "Тезис"
    **Nginx** (произносится как "engine-x") — это чрезвычайно популярный веб-сервер с открытым исходным кодом, который также широко используется как **reverse proxy**, **балансировщик нагрузки**, **почтовый прокси** и **HTTP-кэш**. Он известен своей высокой производительностью, стабильностью, богатым набором функций и низким потреблением ресурсов.

---

## Ключевые возможности

-   **Высокая производительность**: Асинхронная, событийно-ориентированная архитектура, которая позволяет обрабатывать десятки тысяч одновременных соединений.
-   **Гибкость**: Богатый язык конфигурации, который позволяет настраивать практически любой аспект обработки запросов.
-   **Надежность**: Проверен годами в самых высоконагруженных проектах в мире.
-   **Модульность**: Функциональность может быть расширена с помощью модулей (как официальных, так и сторонних).
-   **Reverse Proxy и балансировка нагрузки**: Широкие возможности для проксирования и распределения трафика между бэкендами.

---

## Архитектура

Nginx использует модель с **мастер-процессом** и несколькими **рабочими процессами (worker processes)**.

!!! example "Схема архитектуры Nginx"
    ```plaintext
    +--------------------Master Process--------------------+
    | (Reads config, binds ports, manages workers)       |
    +-------------------------+--------------------------+
                              |
          +-------------------+--------------------------+
          |                   |                          |
    +-----v-----------+ +-----v-----------+      +-----v-----------+
    | Worker Process  | | Worker Process  | ...  | Worker Process  |
    | (Handles conn.) | | (Handles conn.) |      | (Handles conn.) |
    +-----------------+ +-----------------+      +-----------------+
    ```

-   **Мастер-процесс** выполняется от имени `root` и отвечает за чтение конфигурации, открытие портов и запуск рабочих процессов.
-   **Рабочие процессы** выполняются от имени непривилегированного пользователя и обрабатывают все клиентские соединения.

---

## Пример конфигурации (Reverse Proxy)

!!! example "Пример `nginx.conf`"
    ```nginx
    http {
      upstream myapp {
        server backend1.example.com;
        server backend2.example.com;
      }

      server {
        listen 80;

        location / {
          proxy_pass http://myapp;
          proxy_set_header Host $host;
          proxy_set_header X-Real-IP $remote_addr;
        }
      }
    }
    ```
    Эта конфигурация настраивает Nginx как балансировщик нагрузки, который распределяет трафик между двумя бэкендами.

---

## Nginx в облачных окружениях

В динамических окружениях, таких как Docker или Kubernetes, статическая конфигурация Nginx становится проблемой. Эта проблема решается с помощью:

-   **Шаблонизаторов**: Инструменты вроде `docker-gen` или `confd` могут генерировать конфигурацию Nginx на основе данных из Service Discovery (например, Consul) и перезагружать Nginx.
-   **Ingress Controller**: В Kubernetes **NGINX Ingress Controller** является одним из самых популярных Ingress-контроллеров. Он автоматически преобразует ресурсы `Ingress` в конфигурацию Nginx.

!!! success "Рекомендация"
    **Nginx** остается золотым стандартом для ситуаций, где требуется максимальная производительность и гибкость. В связке с Ingress Controller или инструментами автоматизации он успешно применяется в самых современных облачных системах.
