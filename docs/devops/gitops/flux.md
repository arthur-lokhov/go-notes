---
title: Flux
description: Обзор Flux, GitOps-инструмента для Kubernetes, ориентированного на автоматизацию.
---

# Flux: Автоматизированный GitOps в Kubernetes

!!! abstract "Тезис"
    **Flux** — это инструмент для непрерывного и декларативного развертывания в Kubernetes, который является одним из пионеров **GitOps**. Он позволяет автоматизировать обновление кластера на основе изменений в Git-репозитории. Flux является проектом **Cloud Native Computing Foundation (CNCF)**.

---

## Ключевые возможности

-   **Автоматизация**: Flux автоматически отслеживает изменения в Git и образах контейнеров и применяет их к кластеру.
-   **Декларативность**: Состояние кластера описывается в Git.
-   **Расширяемость**: Состоит из набора специализированных контроллеров (Source Controller, Kustomize Controller, Helm Controller), что делает его гибким.
-   **Безопасность**: Работает по принципу "наименьших привилегий", каждый компонент имеет только необходимые права.
-   **Интеграция с инструментами**: Поддержка Kustomize, Helm, а также отправка уведомлений в различные системы.

---

## Архитектура

Flux состоит из набора контроллеров, которые работают в кластере и следят за различными источниками.

!!! example "Схема архитектуры Flux"
    ```plaintext
    +-----------------+   (Watches)   +-----------------+
    |   Git Repo      | <----------- | Source Controller|
    +-----------------+               +-------+---------+
                                              |
    +-----------------+               +-------v---------+
    | Helm Repo/Chart | <----------- | Helm Controller  |
    +-----------------+               +-------+---------+
                                              |
    +-----------------+               +-------v---------+
    | Kustomization   | <----------- | Kustomize Ctrl.  |
    +-----------------+               +-------+---------+
                                              |
                                              | (Applies to cluster)
                                              v
                                      +-------------------+
                                      | Kubernetes Cluster|
                                      +-------------------+
    ```

-   **Source Controller**: Отвечает за получение артефактов из источников (Git, Helm-репозитории).
-   **Kustomize Controller**: Отвечает за применение Kustomize-оверлеев.
-   **Helm Controller**: Управляет релизами Helm.
-   **Notification Controller**: Отправляет уведомления о состоянии синхронизации.

---

## Flux vs. Argo CD

-   **Flux** более ориентирован на полную автоматизацию и "чистый" GitOps. Он менее "интерактивен" и больше полагается на автоматические процессы.
-   **Argo CD** предоставляет мощный централизованный UI, который позволяет визуализировать и вручную управлять процессом синхронизации.

!!! success "Рекомендация"
    **Flux** — это отличный выбор, если вы стремитесь к максимальной автоматизации и придерживаетесь строгих принципов GitOps, где кластер полностью управляется через коммиты в Git. Он считается более "нативным" для Kubernetes.
