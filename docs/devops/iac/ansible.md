---
title: Ansible
description: Обзор Ansible, инструмента для управления конфигурацией и автоматизации.
---

# Ansible: Автоматизация и управление конфигурацией

!!! abstract "Тезис"
    **Ansible** — это инструмент для автоматизации и управления конфигурацией с открытым исходным кодом. Он используется для настройки серверов, развертывания приложений и выполнения рутинных задач администрирования. Ключевые особенности Ansible — **простота** и **безагентная архитектура** (он подключается к управляемым узлам по SSH).

---

## Ключевые возможности

-   **Простота**: Конфигурация описывается в формате **YAML**, который легко читать и писать.
-   **Безагентная архитектура**: Ansible не требует установки какого-либо программного обеспечения (агентов) на управляемые узлы. Он работает, подключаясь к ним по стандартному SSH.
-   **Идемпотентность**: Плейбуки Ansible можно запускать многократно, и они будут приводить систему в одно и то же состояние, выполняя изменения только при необходимости.
-   **Большое количество модулей**: Тысячи готовых модулей для управления пакетами, сервисами, файлами, пользователями и облачными ресурсами.

---

## Архитектура

Ansible работает, запуская **плейбуки (playbooks)** с **управляющего узла (control node)**.

!!! example "Схема работы Ansible"
    ```plaintext
    +-----------------+      (Reads)      +-------------------+
    | Control Node    | ----------------> |    Inventory      |
    | (with Ansible)  |                   | (List of hosts)   |
    +-------+---------+                   +-------------------+
            |
            | (Reads)
    +-------v---------+
    |    Playbook     |
    | (.yml file with |
    |      tasks)     |
    +-------+---------+
            |
            | (Executes tasks via SSH)
    +-------v---------+      +-----------------+
    |  Managed Node 1 |      | Managed Node 2  |
    | (e.g. webserver)|      | (e.g. dbserver) |
    +-----------------+      +-----------------+
    ```

-   **Control Node**: Машина, на которой установлен Ansible.
-   **Inventory**: Файл, который описывает управляемые узлы (хосты).
-   **Playbook**: YAML-файл, который определяет набор задач (tasks) для выполнения на хостах.
-   **Modules**: Код, который Ansible выполняет на управляемых узлах (например, `apt`, `systemd`, `copy`).

---

## Пример плейбука

!!! example "Пример `playbook.yml`"
    ```yaml
    - name: Configure web server
      hosts: webservers
      become: true
      tasks:
        - name: Install nginx
          apt:
            name: nginx
            state: latest

        - name: Start nginx service
          systemd:
            name: nginx
            state: started
            enabled: true
    ```
    Этот плейбук устанавливает и запускает Nginx на всех хостах из группы `webservers`.

---

## Ansible vs. Terraform

-   **Ansible** — это инструмент для **управления конфигурацией (Configuration Management)**. Он отвечает на вопрос: "Как настроить этот сервер?".
-   **Terraform** — это инструмент для **оркестрации инфраструктуры (Infrastructure Orchestration)**. Он отвечает на вопрос: "Как создать этот сервер?".

!!! success "Рекомендация"
    Ansible и Terraform отлично **дополняют** друг друга. Типичный сценарий:
    1.  **Terraform** создает облачную инфраструктуру (виртуальные машины, сети, базы данных).
    2.  **Ansible** настраивает программное обеспечение на созданных виртуальных машинах (устанавливает пакеты, конфигурирует сервисы).
