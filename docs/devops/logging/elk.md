---
title: ELK Stack
description: Обзор стека ELK (Elasticsearch, Logstash, Kibana) для централизованного управления логами.
---

# ELK Stack: Централизованное управление логами

!!! abstract "Тезис"
    **ELK Stack** — это набор из трех продуктов с открытым исходным кодом — **Elasticsearch**, **Logstash** и **Kibana** — который предоставляет комплексное решение для поиска, анализа и визуализации логов. Этот стек стал одним из самых популярных решений для централизованного управления логами.

---

## Компоненты стека

-   **Elasticsearch**: Распределенный поисковый и аналитический движок. Он хранит все логи и обеспечивает быстрый поиск по ним.
-   **Logstash**: Серверный инструмент для сбора, обработки и пересылки данных. Он принимает логи из различных источников, преобразует их и отправляет в Elasticsearch.
-   **Kibana**: Веб-интерфейс для поиска, анализа и визуализации данных, хранящихся в Elasticsearch.

!!! info "Добавление Beats"
    Со временем стек был дополнен семейством легковесных сборщиков данных **Beats** (например, `Filebeat` для файлов, `Metricbeat` для метрик), и теперь его часто называют **Elastic Stack**.

---

## Архитектура

!!! example "Схема архитектуры ELK Stack"
    ```plaintext
    +----------+     +----------+     +----------------+     +----------+
    |  Log     | --> |  Beats   | --> |    Logstash    | --> | Elasticsearch |
    | Sources  |     | (e.g.    |     | (Processing)   |     | (Storage &    |     +----------+
    |          |     | Filebeat)|     +----------------+     |  Indexing)   | --> |  Kibana  |
    +----------+     +----------+                            +----------------+     | (Visual.)|
                                                                                   +----------+
    ```

1.  **Beats** собирают данные с серверов.
2.  **Logstash** принимает данные, парсит, обогащает и преобразует их.
3.  **Elasticsearch** индексирует и хранит обработанные данные.
4.  **Kibana** предоставляет пользователю интерфейс для работы с данными.

---

## Преимущества и недостатки

**Преимущества:**
-   **Мощный поиск**: Elasticsearch обеспечивает очень быстрый и гибкий полнотекстовый поиск.
-   **Гибкая визуализация**: Kibana позволяет создавать разнообразные дашборды.
-   **Масштабируемость**: Все компоненты стека могут быть горизонтально масштабированы.
-   **Большое сообщество**: Огромное количество документации, плагинов и экспертизы.

**Недостатки:**
-   **Ресурсоемкость**: Elasticsearch и Logstash требуют значительных ресурсов (особенно JVM).
-   **Сложность**: Развертывание и обслуживание отказоустойчивого кластера может быть сложной задачей.
-   **Стоимость**: Хранение и индексирование больших объемов логов может быть дорогостоящим.

---

## ELK vs Loki

-   **ELK** индексирует **весь текст** логов, что делает его идеальным для сложного поиска и аналитики, но дорогим в эксплуатации.
-   **Loki** индексирует **только метаданные (лейблы)**, что делает его дешевым, но менее гибким для поисковых запросов по содержимому.

!!! success "Рекомендация"
    - Используйте **ELK Stack**, если вам нужен мощный инструмент для аналитики и сложного поиска по логам.
    - Используйте **Loki**, если вам нужна простая и экономичная система для хранения логов и их корреляции с метриками.
