---
title: Vector
description: Обзор Vector, высокопроизводительного инструмента для обработки и маршрутизации логов и метрик.
---

# Vector: Высокопроизводительная обработка данных телеметрии

!!! abstract "Тезис"
    **Vector** — это высокопроизводительный инструмент с открытым исходным кодом для сбора, преобразования и маршрутизации логов, метрик и событий. Он написан на **Rust**, что обеспечивает безопасность работы с памятью и высочайшую производительность. Vector позиционируется как "роутер для данных телеметрии", способный заменить связки из Logstash, Fluentd и Telegraf.

---

## Ключевые возможности

-   **Производительность**: Значительно быстрее и эффективнее по ресурсам, чем аналоги на Java (Logstash) или Ruby (Fluentd).
-   **Единый инструмент**: Может работать с логами, метриками и другими видами данных телеметрии.
-   **Гарантия доставки**: Поддерживает буферизацию на диске и механизмы подтверждения для предотвращения потери данных.
-   **Преобразование данных**: Мощный язык **VRL (Vector Remap Language)** для сложной обработки и трансформации данных на лету.
-   **Безопасность**: Написан на Rust, что минимизирует риски, связанные с управлением памятью.

---

## Архитектура

Vector состоит из трех основных компонентов: **Sources**, **Transforms** и **Sinks**.

!!! example "Схема работы Vector"
    ```plaintext
    +----------+     +-----------------+     +------------------+
    |  Source  | --> | Vector Agent    | --> |       Sink       |
    | (e.g.    |     | +-------------+ |     | (e.g. Elasticsearch,
    | Kafka,   |     | |   Source    | |     |  Prometheus, S3) |
    | Syslog)  |     | +-------------+ |     +------------------+
    +----------+     | |  Transform  | |
                   | |   (VRL)     | |
                   | +-------------+ |
                   | |    Sink     | |
                   | +-------------+ |
                   +-----------------+
    ```

-   **Sources**: Источники данных (файлы, сокеты, Kafka, Prometheus и т.д.).
-   **Transforms**: Компоненты для обработки данных (парсеры, фильтры, агрегаторы), часто с использованием VRL.
-   **Sinks**: Места назначения данных (ClickHouse, Loki, Elasticsearch, S3 и т.д.).

---

## Пример конфигурации

!!! example "Пример `vector.toml`"
    ```toml
    # Source: read logs from journald
    [sources.journald]
      type = "journald"

    # Transform: parse JSON and add a new field
    [transforms.my_transform]
      type = "remap"
      inputs = ["journald"]
      source = '''
      . = parse_json!(.message)
      .new_field = "some_value"
      '''

    # Sink: send to Loki
    [sinks.loki]
      type = "loki"
      inputs = ["my_transform"]
      endpoint = "http://loki:3100"
      labels = { source = "vector" }
    ```

---

## Vector vs Fluentd/Logstash

| Критерий | Vector | Fluentd | Logstash |
| :--- | :--- | :--- | :--- |
| **Язык** | Rust | Ruby | Java (JVM) |
| **Производительность** | Очень высокая | Средняя | Низкая |
| **Потребление CPU/RAM** | Низкое | Среднее | Высокое |
| **Обработка данных** | VRL (мощный) | Плагины | Плагины |
| **Экосистема** | Растущая | Огромная | Большая |

!!! success "Рекомендация"
    **Vector** — отличный выбор для новых проектов и high-load окружений, где важна производительность и эффективность. **Fluentd** и **Logstash** остаются хорошими вариантами для систем, где уже есть большая экспертиза по ним или требуются специфические плагины, которых еще нет в Vector.
