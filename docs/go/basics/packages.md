# Пакеты в Go

## Основы пакетов

Каждая программа на Go состоит из пакетов. Программа начинает выполнение с пакета `main`.

```go
package main

import (
    "fmt"
    "math/rand"
)

func main() {
    fmt.Println("My favourite number is", rand.Intn(10))
}
```

### Правила именования пакетов

- Имя пакета должно совпадать с последним элементом пути импорта
- Например, файлы в `math/rand` должны начинаться с `package rand`
- Используйте короткие, понятные имена
- Избегайте подчеркиваний и смешанного регистра

## Импорт пакетов

### Факторизованный импорт (рекомендуемый способ)

```go
import (
    "fmt"
    "math"
)
```

### Множественный импорт (не рекомендуется)

```go
import "fmt"
import "math"
```

### Алиасы при импорте

```go
import (
    "fmt"
    m "math" // Теперь можно использовать m вместо math
)
```

### Точка-импорт (не рекомендуется)

!!! info

    Вы можете удивить знанием этого факта, его мало кто знает!

```go
import (
    . "fmt" // Теперь можно использовать Println вместо fmt.Println
)
```

## Экспортируемые имена

### Правила экспорта

- Имена, начинающиеся с заглавной буквы, экспортируются
- Имена, начинающиеся с строчной буквы, не экспортируются

### Примеры

```go
// Верно - будет доступно из других пакетов
fmt.Println(math.Pi)

// Неверно - вызовет ошибку
fmt.Println(math.pi)
```

## Тестовые пакеты

В Go тесты организуются в отдельные пакеты, которые имеют суффикс `_test`. Например, если у вас есть пакет `mypackage`, тесты для него будут находиться в файле `mypackage_test.go`.

### Пример тестового пакета

```go
package mypackage_test

import (
    "mypackage"
    "testing"
)

func TestMyFunction(t *testing.T) {
    result := mypackage.MyFunction()
    if result != expected {
        t.Errorf("Expected %v, got %v", expected, result)
    }
}
```

## Функция init()

Функция `init()` - это специальная функция, которая автоматически вызывается перед выполнением функции `main()`. Она используется для инициализации пакета.

### Пример использования init()

```go
package main

import "fmt"

func init() {
    fmt.Println("Инициализация пакета")
}

func main() {
    fmt.Println("Главная функция")
}
```

### Особенности функции init()

- Вы можете определить несколько функций `init()` в одном пакете.
- Функции `init()` выполняются в порядке их определения в файле.
- Функции `init()` могут использоваться для настройки переменных, подключения к базам данных и других задач инициализации.

## Часто задаваемые вопросы

### **В**: Как организовать структуру пакетов в большом проекте?

- Группируйте связанный функционал
- Избегайте циклических зависимостей
- Используйте подпакеты для логического разделения
- Следуйте принципу "один пакет - одна ответственность"

### **В**: Когда использовать алиасы при импорте?

- При конфликте имен пакетов
- Для более краткого имени часто используемого пакета
- Для разрешения конфликтов с локальными именами

### **В**: Как работать с внутренними пакетами?

- Создавайте пакет `internal`
- Код внутри `internal` доступен только родительскому пакету и его подпакетам
- Используйте для скрытия деталей реализации
