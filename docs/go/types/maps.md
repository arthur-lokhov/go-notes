---
title: –ö–∞—Ä—Ç—ã (Maps)
---

# üó∫Ô∏è –ö–∞—Ä—Ç—ã (Maps)

–ö–∞—Ä—Ç–∞ (map) ‚Äî —ç—Ç–æ –Ω–µ—É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω–∞—è –∫–æ–ª–ª–µ–∫—Ü–∏—è –ø–∞—Ä "–∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ". –≠—Ç–æ –æ–¥–Ω–∞ –∏–∑ —Å–∞–º—ã—Ö –ø–æ–ª–µ–∑–Ω—ã—Ö –∏ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö –≤ Go.

---

## üöÄ –û—Å–Ω–æ–≤—ã —Ä–∞–±–æ—Ç—ã

### –°–æ–∑–¥–∞–Ω–∏–µ
–ö–∞—Ä—Ç—ã —Å–æ–∑–¥–∞—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é `make`:
```go
// –ö–∞—Ä—Ç–∞, –≥–¥–µ –∫–ª—é—á - string, –∑–Ω–∞—á–µ–Ω–∏–µ - int
m := make(map[string]int)
```

### –ó–∞–ø–∏—Å—å –∏ —á—Ç–µ–Ω–∏–µ
```go
m["answer"] = 42
fmt.Println("The value:", m["answer"]) // The value: 42

m["answer"] = 48
fmt.Println("The value:", m["answer"]) // The value: 48
```

### –£–¥–∞–ª–µ–Ω–∏–µ
```go
delete(m, "answer")
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –∫–ª—é—á–∞
–ß—Ç–µ–Ω–∏–µ –ø–æ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º—É –∫–ª—é—á—É –≤–µ—Ä–Ω–µ—Ç –Ω—É–ª–µ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è —Ç–∏–ø–∞-–∑–Ω–∞—á–µ–Ω–∏—è. –ß—Ç–æ–±—ã –æ—Ç–ª–∏—á–∏—Ç—å —Ä–µ–∞–ª—å–Ω–æ–µ –Ω—É–ª–µ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –æ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –∫–ª—é—á–∞, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤—Ç–æ—Ä–æ–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ:
```go
v, ok := m["answer"]
if ok {
    fmt.Println("The value is", v)
} else {
    fmt.Println("The key is not present")
}
```

### –ò—Ç–µ—Ä–∞—Ü–∏—è
–ò—Ç–µ—Ä–∞—Ü–∏—è –ø–æ –∫–∞—Ä—Ç–µ —Å –ø–æ–º–æ—â—å—é `for...range` –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ **—Å–ª—É—á–∞–π–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ**. –ù–µ –ø–æ–ª–∞–≥–∞–π—Ç–µ—Å—å –Ω–∞ –ø–æ—Ä—è–¥–æ–∫ —ç–ª–µ–º–µ–Ω—Ç–æ–≤.
```go
for key, value := range m {
    // ...
}
```

---

## ‚ö†Ô∏è –£–∑–∫–∏–µ –º–µ—Å—Ç–∞ –∏ –æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### `nil`-–º–∞–ø–∞
–ù—É–ª–µ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è –∫–∞—Ä—Ç—ã ‚Äî `nil`. –ó–∞–ø–∏—Å—å –≤ `nil`-–º–∞–ø—É –≤—ã–∑—ã–≤–∞–µ—Ç **–ø–∞–Ω–∏–∫—É**.
```go
var m map[string]int
m["key"] = 1 // ‚ùå panic: assignment to entry in nil map
```
–ü—Ä–∏ —ç—Ç–æ–º —á—Ç–µ–Ω–∏–µ, `len` –∏ `for...range` –¥–ª—è `nil`-–º–∞–ø—ã –±–µ–∑–æ–ø–∞—Å–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–∞–∫, –∫–∞–∫ –µ—Å–ª–∏ –±—ã –º–∞–ø–∞ –±—ã–ª–∞ –ø—É—Å—Ç–æ–π.

### –ì–æ–Ω–∫–∏ –¥–∞–Ω–Ω—ã—Ö
–ö–∞—Ä—Ç—ã **–Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω—ã –¥–ª—è –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞**. –û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ —á—Ç–µ–Ω–∏–µ –∏ –∑–∞–ø–∏—Å—å (–∏–ª–∏ –¥–≤–µ –∑–∞–ø–∏—Å–∏) –∏–∑ —Ä–∞–∑–Ω—ã—Ö –≥–æ—Ä—É—Ç–∏–Ω –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ –≥–æ–Ω–∫–µ –¥–∞–Ω–Ω—ã—Ö –∏ –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–º—É –ø–æ–≤–µ–¥–µ–Ω–∏—é. –î–ª—è –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `sync.RWMutex`.

### –ù–µ–∞–¥—Ä–µ—Å—É–µ–º–æ—Å—Ç—å —ç–ª–µ–º–µ–Ω—Ç–æ–≤
–ö —ç–ª–µ–º–µ–Ω—Ç–∞–º –∫–∞—Ä—Ç—ã –Ω–µ–ª—å–∑—è –ø—Ä–∏–º–µ–Ω–∏—Ç—å –æ–ø–µ—Ä–∞—Ç–æ—Ä `&` (–≤–∑—è—Ç–∏–µ –∞–¥—Ä–µ—Å–∞).
```go
type User struct{ Age int }
m := map[string]User{"john": {Age: 30}}
// m["john"].Age = 31 // ‚ùå –û—à–∏–±–∫–∞: cannot assign to struct field m["john"].Age
```
–≠—Ç–æ —Å–≤—è–∑–∞–Ω–æ —Å —Ç–µ–º, —á—Ç–æ –ø—Ä–∏ —Ä–æ—Å—Ç–µ –∫–∞—Ä—Ç—ã –µ—ë —ç–ª–µ–º–µ–Ω—Ç—ã –º–æ–≥—É—Ç –ø–µ—Ä–µ–º–µ—â–∞—Ç—å—Å—è –≤ –ø–∞–º—è—Ç–∏. –†–µ—à–µ–Ω–∏–µ ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É–∫–∞–∑–∞—Ç–µ–ª–∏ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∑–Ω–∞—á–µ–Ω–∏–π –∏–ª–∏ –ø–µ—Ä–µ–ø—Ä–∏—Å–≤–∞–∏–≤–∞—Ç—å –≤—Å—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É.
```go
// –í–∞—Ä–∏–∞–Ω—Ç 1: —É–∫–∞–∑–∞—Ç–µ–ª–∏
m2 := map[string]*User{"john": {Age: 30}}
m2["john"].Age = 31 // ‚úÖ

// –í–∞—Ä–∏–∞–Ω—Ç 2: –ø–µ—Ä–µ–ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ
user := m["john"]
user.Age = 31
m["john"] = user // ‚úÖ
```

---

## ‚öôÔ∏è –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã

### `hmap`
–í —Ä–∞–Ω—Ç–∞–π–º–µ –∫–∞—Ä—Ç–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π `runtime.hmap`. –≠—Ç–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è **—Ö–µ—à-—Ç–∞–±–ª–∏—Ü—ã**.
- **–ë–∞–∫–µ—Ç—ã (buckets)**: `hmap` —Å–æ–¥–µ—Ä–∂–∏—Ç —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –º–∞—Å—Å–∏–≤ "–±–∞–∫–µ—Ç–æ–≤". –ö–∞–∂–¥—ã–π –±–∞–∫–µ—Ç ‚Äî —ç—Ç–æ –Ω–µ–±–æ–ª—å—à–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, —Ö—Ä–∞–Ω—è—â–∞—è –¥–æ 8 –ø–∞—Ä –∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ.
- **–•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ö–ª—é—á —Ö–µ—à–∏—Ä—É–µ—Ç—Å—è, –∏ –ø–æ –º–ª–∞–¥—à–∏–º –±–∏—Ç–∞–º —Ö–µ—à–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –±–∞–∫–µ—Ç.
- **–ö–æ–ª–ª–∏–∑–∏–∏**: –ï—Å–ª–∏ –≤ –æ–¥–Ω–æ–º –±–∞–∫–µ—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–ª—é—á–µ–π —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ –º–ª–∞–¥—à–∏–º–∏ –±–∏—Ç–∞–º–∏ —Ö–µ—à–∞, –æ–Ω–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —ç—Ç–æ–º –±–∞–∫–µ—Ç–µ. –ï—Å–ª–∏ –±–∞–∫–µ—Ç –ø–µ—Ä–µ–ø–æ–ª–Ω—è–µ—Ç—Å—è, —Å–æ–∑–¥–∞–µ—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π "overflow" –±–∞–∫–µ—Ç, —Å–≤—è–∑–∞–Ω–Ω—ã–π —Å –æ—Å–Ω–æ–≤–Ω—ã–º.
- **–†–æ—Å—Ç**: –ö–æ–≥–¥–∞ –∫–∞—Ä—Ç–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Å–ª–∏—à–∫–æ–º –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ–π (load factor > 6.5), –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –µ—ë —Ä–æ—Å—Ç: —Å–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤—ã–π –º–∞—Å—Å–∏–≤ –±–∞–∫–µ—Ç–æ–≤ –≤ –¥–≤–∞ —Ä–∞–∑–∞ –±–æ–ª—å—à–µ, –∏ —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ, –ø–æ –º–µ—Ä–µ –¥–æ—Å—Ç—É–ø–∞, –ø–µ—Ä–µ–Ω–æ—Å—è—Ç—Å—è –≤ –Ω–æ–≤—ã–π –º–∞—Å—Å–∏–≤ (incremental move).

---

## üöÄ –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ç–µ–º—ã

### `sync.Map`
–≠—Ç–æ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–∏–ø –∫–∞—Ä—Ç—ã –∏–∑ –ø–∞–∫–µ—Ç–∞ `sync`, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –¥–ª—è –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.
**–í–∞–∂–Ω–æ**: `sync.Map` ‚Äî —ç—Ç–æ **–Ω–µ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –∑–∞–º–µ–Ω–∞** –æ–±—ã—á–Ω–æ–π –º–∞–ø–µ —Å `sync.RWMutex`. –û–Ω–∞ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏—è:
1.  –ö–ª—é—á–∏, –æ–¥–Ω–∞–∂–¥—ã –∑–∞–ø–∏—Å–∞–Ω–Ω—ã–µ, –≤ –æ—Å–Ω–æ–≤–Ω–æ–º —Ç–æ–ª—å–∫–æ —á–∏—Ç–∞—é—Ç—Å—è.
2.  –ú–Ω–æ–∂–µ—Å—Ç–≤–æ –≥–æ—Ä—É—Ç–∏–Ω —á–∏—Ç–∞—é—Ç –∏ –æ–±–Ω–æ–≤–ª—è—é—Ç –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è *—Ä–∞–∑–Ω—ã—Ö* –∫–ª—é—á–µ–π.

–í –¥—Ä—É–≥–∏—Ö —Å–ª—É—á–∞—è—Ö –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å `sync.Map` –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∏–∂–µ, —á–µ–º —É –º–∞–ø—ã —Å –º—å—é—Ç–µ–∫—Å–æ–º.
