---
title: –ü—Ä–æ—Ü–µ—Å—Å—ã –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
---

# üö¶ –ü—Ä–æ—Ü–µ—Å—Å—ã –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ

## üßü –ü—Ä–æ–±–ª–µ–º–∞ PID 1

!!! danger "–ó–æ–º–±–∏-–ø—Ä–æ—Ü–µ—Å—Å—ã –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞"

    –ï—Å–ª–∏ **PID 1** (–æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ—Ü–µ—Å—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞) –Ω–µ —Å–ª–µ–¥–∏—Ç –∑–∞ —Å–≤–æ–∏–º–∏ –¥–æ—á–µ—Ä–Ω–∏–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏, –≤ —Å–∏—Å—Ç–µ–º–µ –Ω–∞—á–Ω—É—Ç –∫–æ–ø–∏—Ç—å—Å—è "–∑–æ–º–±–∏" ‚Äî –∑–∞–≤–µ—Ä—à–∏–≤—à–∏–µ—Å—è –ø—Ä–æ—Ü–µ—Å—Å—ã, –ø–∞–º—è—Ç—å –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ –±—ã–ª–∞ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∞.

    –≠—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ —É—Ç–µ—á–∫–∞–º —Ä–µ—Å—É—Ä—Å–æ–≤ –∏ –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

    –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `tini`, `supervisord`, `s6` –∏–ª–∏ –¥—Ä—É–≥–æ–π init-–ø—Ä–æ—Ü–µ—Å—Å, —á—Ç–æ–±—ã —ç—Ç–æ–≥–æ –∏–∑–±–µ–∂–∞—Ç—å.

–í–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ø–µ—Ä–≤—ã–π –∑–∞–ø—É—â–µ–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –ø–æ–ª—É—á–∞–µ—Ç –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø—Ä–æ—Ü–µ—Å—Å–∞ (**PID**) `1`.

–í Linux —Ç–∞–∫–æ–π –ø—Ä–æ—Ü–µ—Å—Å –∏–º–µ–µ—Ç –æ—Å–æ–±—ã–π —Å—Ç–∞—Ç—É—Å:

-   **–ù–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–∏–≥–Ω–∞–ª—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é**. –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç –æ–±—ã—á–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤, **PID 1** –Ω–µ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–∏–≥–Ω–∞–ª–æ–≤ `SIGTERM` –∏–ª–∏ `SIGINT` (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—Ç `docker stop`).
–ü—Ä–æ—Ü–µ—Å—Å –¥–æ–ª–∂–µ–Ω —è–≤–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∏—Ö.
-   **–û—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –¥–æ—á–µ—Ä–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã**. –û–Ω –¥–æ–ª–∂–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å "–æ—Å–∏—Ä–æ—Ç–µ–≤—à–∏–µ" –¥–æ—á–µ—Ä–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã (reaping), –∏–Ω–∞—á–µ –æ–Ω–∏ –ø—Ä–µ–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ "–∑–æ–º–±–∏", –ø–æ—Ç—Ä–µ–±–ª—è—è —Ä–µ—Å—É—Ä—Å—ã —Å–∏—Å—Ç–µ–º—ã.

!!! question "–ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ?"

    –ï—Å–ª–∏ –≤–∞—à –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ—Ü–µ—Å—Å –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –Ω–µ –Ω–∞–ø–∏—Å–∞–Ω –∫–∞–∫ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π `init`-–ø—Ä–æ—Ü–µ—Å—Å, –≤—ã —Å—Ç–æ–ª–∫–Ω–µ—Ç–µ—Å—å —Å –ø—Ä–æ–±–ª–µ–º–∞–º–∏: –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –±—É–¥–µ—Ç –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å—Å—è –≤–æ–≤—Ä–µ–º—è, –∞ –≤–Ω—É—Ç—Ä–∏ –±—É–¥—É—Ç –Ω–∞–∫–∞–ø–ª–∏–≤–∞—Ç—å—Å—è "–∑–æ–º–±–∏".

### üë∂ Tini

!!! tip "–õ—É—á—à–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞"

    **tini** ‚Äî —ç—Ç–æ –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω–∞—è —É—Ç–∏–ª–∏—Ç–∞, –∫–æ—Ç–æ—Ä–∞—è —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É **PID 1**.

    –û–Ω–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–∞–∫ **PID 1**, –∞ –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚Äî –∫–∞–∫ –¥–æ—á–µ—Ä–Ω–∏–π –ø—Ä–æ—Ü–µ—Å—Å.

    **–ß—Ç–æ –¥–µ–ª–∞–µ—Ç `tini`:**

    -   –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç —Å–∏–≥–Ω–∞–ª—ã –≤–∞—à–µ–º—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é.
    -   –°–æ–±–∏—Ä–∞–µ—Ç "–∑–æ–º–±–∏"-–ø—Ä–æ—Ü–µ—Å—Å—ã.
    -   –ó–∞–Ω–∏–º–∞–µ—Ç –º–∏–Ω–∏–º—É–º —Ä–µ—Å—É—Ä—Å–æ–≤.

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `tini` ‚Äî —Ö–æ—Ä–æ—à–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞, –¥–∞–∂–µ –µ—Å–ª–∏ —É –≤–∞—Å **–æ–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å—Å –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ**.

!!! example "–î–æ–±–∞–≤–ª–µ–Ω–∏–µ tini –≤ Dockerfile"

    ```dockerfile
    FROM debian:bookworm

    # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º tini –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤
    RUN apt-get update && apt-get install -y tini

    # –ó–∞–ø—É—Å–∫–∞–µ–º tini –∫–∞–∫ —Ç–æ—á–∫—É –≤—Ö–æ–¥–∞.
    # –û–Ω –∑–∞–ø—É—Å—Ç–∏—Ç –∫–æ–º–∞–Ω–¥—É –∏–∑ CMD –∏ –±—É–¥–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –µ—é.
    ENTRYPOINT ["/usr/bin/tini", "--"]

    # –û—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ—Ü–µ—Å—Å –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    CMD ["/your/main/process"]
    ```
    –í Docker –≤–µ—Ä—Å–∏–∏ 1.13+ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–ª–∞–≥ `--init`, –∫–æ—Ç–æ—Ä—ã–π –¥–µ–ª–∞–µ—Ç —Ç–æ –∂–µ —Å–∞–º–æ–µ:

    ```bash
    docker run --init my-image
    ```

---

## üì¶ –û–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å—Å

!!! success "–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è"

    –°—Ç–∞—Ä–∞–π—Ç–µ—Å—å –ø—Ä–∏–¥–µ—Ä–∂–∏–≤–∞—Ç—å—Å—è –ø—Ä–∏–Ω—Ü–∏–ø–∞ **–æ–¥–∏–Ω –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞ –æ–¥–∏–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä**.

    –≠—Ç–æ –Ω–µ –∂–µ—Å—Ç–∫–æ–µ –ø—Ä–∞–≤–∏–ª–æ, –∞ –ª—É—á—à–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –¥–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤.

    -   **–ü—Ä–æ—Å—Ç–æ—Ç–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è**. –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ø—Ä–∏–≤—è–∑–∞–Ω –∫ –∂–∏–∑–Ω–µ–Ω–Ω–æ–º—É —Ü–∏–∫–ª—É –æ–¥–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞.
    –ï—Å–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å –ø–∞–¥–∞–µ—Ç, –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è, –∏ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä, Kubernetes) –º–æ–∂–µ—Ç –ª–µ–≥–∫–æ –µ–≥–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å.
    -   **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**. –í—Å–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø–∏—à—É—Ç—Å—è –≤ **STDOUT** –∏ **STDERR**, –æ—Ç–∫—É–¥–∞ –∏—Ö –∑–∞–±–∏—Ä–∞–µ—Ç Docker.
    –≠—Ç–æ —É–ø—Ä–æ—â–∞–µ—Ç —Å–±–æ—Ä –∏ –∞–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤.
    -   **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**. –ü—Ä–æ—â–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤–µ–±-—Å–µ—Ä–≤–µ—Ä –∏ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö), –µ—Å–ª–∏ –æ–Ω–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ —Ä–∞–∑–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö.

---

## üç± –ù–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

–ò–Ω–æ–≥–¥–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∑–∞–ø—É—Å—Ç–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –≤ –æ–¥–Ω–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤–µ–±-—Å–µ—Ä–≤–µ—Ä –∏ log-rotator).

–í–æ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–¥—Ö–æ–¥–æ–≤:

### üêö Shell-—Å–∫—Ä–∏–ø—Ç

–ü—Ä–æ—Å—Ç–æ–π, –Ω–æ –Ω–µ —Å–∞–º—ã–π –Ω–∞–¥–µ–∂–Ω—ã–π —Å–ø–æ—Å–æ–±.

!!! example "–ü—Ä–∏–º–µ—Ä —Å `entrypoint.sh`"

    **`entrypoint.sh`**

    ```bash
    #!/bin/sh
    set -e # –ü—Ä–µ—Ä—ã–≤–∞—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–∏ –ª—é–±–æ–π –æ—à–∏–±–∫–µ
    
    # –ó–∞–ø—É—Å–∫–∞–µ–º –ø–µ—Ä–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å –≤ —Ñ–æ–Ω–µ
    /usr/sbin/nginx -g "daemon off;" &
    
    # –ó–∞–ø—É—Å–∫–∞–µ–º –≤—Ç–æ—Ä–æ–π –ø—Ä–æ—Ü–µ—Å—Å –≤ —Ñ–æ–Ω–µ
    /usr/local/bin/my-sidecar &
    
    # –ñ–¥–µ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –í–°–ï–• —Ñ–æ–Ω–æ–≤—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
    wait
    ```

    **`Dockerfile`**

    ```dockerfile
    COPY entrypoint.sh /entrypoint.sh
    RUN chmod +x /entrypoint.sh
    # –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å tini –¥–∞–∂–µ –∑–¥–µ—Å—å!
    ENTRYPOINT ["/usr/bin/tini", "--", "/entrypoint.sh"]
    ```

!!! question "–ß—Ç–æ –¥–µ–ª–∞–µ—Ç `wait`?"

    - `wait -n` –æ–∂–∏–¥–∞–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è **–ª—é–±–æ–≥–æ –æ–¥–Ω–æ–≥–æ** —Ñ–æ–Ω–æ–≤–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ –∏ –∑–∞–≤–µ—Ä—à–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç.
    –≠—Ç–æ —Ä–µ–¥–∫–æ –±—ã–≤–∞–µ—Ç –Ω—É–∂–Ω—ã–º –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º.
    - `wait` (–±–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤) –æ–∂–∏–¥–∞–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è **–≤—Å–µ—Ö** –¥–æ—á–µ—Ä–Ω–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤, —á—Ç–æ –æ–±—ã—á–Ω–æ –∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è.

!!! danger "–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã"

    - –ë–µ–∑ `tini` —ç—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç (–∫–∞–∫ **PID 1**) –Ω–µ –±—É–¥–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Å–∏–≥–Ω–∞–ª—ã –∏ "–∑–æ–º–±–∏".

### üë®‚Äçüíº –ú–µ–Ω–µ–¥–∂–µ—Ä –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

!!! success "–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ–¥—Ö–æ–¥"

    –î–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä –ø—Ä–æ—Ü–µ—Å—Å–æ–≤, —Ç–∞–∫–æ–π –∫–∞–∫ **`supervisord`**.

    –û–Ω —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å "–∑–æ–º–±–∏" –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–µ—Ä–µ–¥–∞–µ—Ç —Å–∏–≥–Ω–∞–ª—ã.

!!! example "–ü—Ä–∏–º–µ—Ä —Å `supervisord`"

    **`supervisord.conf`**

    ```ini
    [supervisord]
    nodaemon=true
    
    [program:nginx]
    command=/usr/sbin/nginx -g "daemon off;"
    stdout_logfile=/dev/stdout
    stdout_logfile_maxbytes=0
    stderr_logfile=/dev/stderr
    stderr_logfile_maxbytes=0
    
    [program:sidecar]
    command=/usr/local/bin/my-sidecar
    stdout_logfile=/dev/stdout
    stdout_logfile_maxbytes=0
    stderr_logfile=/dev/stderr
    stderr_logfile_maxbytes=0
    ```

    **`Dockerfile`**

    ```dockerfile
    RUN apt-get update && apt-get install -y supervisor
    # –ö–æ–ø–∏—Ä—É–µ–º –≥–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥ –∏–ª–∏ –∫–æ–Ω—Ñ–∏–≥–∏ –¥–ª—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º
    COPY supervisord.conf /etc/supervisor/supervisord.conf
    CMD ["/usr/bin/supervisord"]
    ```

!!! note "–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ supervisord"

    –í—ã –º–æ–∂–µ—Ç–µ:

    - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **–µ–¥–∏–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥-—Ñ–∞–π–ª**: `/etc/supervisor/supervisord.conf`.
    - –ò–ª–∏ –ø–æ–ª–æ–∂–∏—Ç—å **–æ—Ç–¥–µ–ª—å–Ω—ã–µ `.conf` —Ñ–∞–π–ª—ã** –≤ `/etc/supervisor/conf.d/` ‚Äî —Ç–æ–≥–¥–∞ –æ–Ω–∏ –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á–µ–Ω—ã.

!!! note "ENTRYPOINT –Ω–µ –Ω—É–∂–µ–Ω —Å supervisord"

    –í —Å–ª—É—á–∞–µ —Å `supervisord` –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `ENTRYPOINT`.

    –û—Å—Ç–∞–≤—å—Ç–µ `CMD`:

    ```dockerfile
    CMD ["/usr/bin/supervisord"]
    ```

    –≠—Ç–æ —É–ø—Ä–æ—Å—Ç–∏—Ç –æ—Ç–ª–∞–¥–∫—É –∏ –ø–æ–∑–≤–æ–ª–∏—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –∫–æ–º–∞–Ω–¥—É –ø—Ä–∏ `docker run`.

!!! tip "–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `supervisord`"

    –ü—Ä–∏–≤–µ–¥–µ–Ω–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥ ‚Äî –ª—É—á—à–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞.

    –û–Ω –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –≤—ã–≤–æ–¥ –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ –Ω–∞–ø—Ä—è–º—É—é –≤ **STDOUT**/**STDERR** –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –ø–æ–∑–≤–æ–ª—è—è Docker —Å–æ–±–∏—Ä–∞—Ç—å –ª–æ–≥–∏ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ.

    –ù–µ –ø–æ–∑–≤–æ–ª—è–π—Ç–µ `supervisord` –ø–∏—Å–∞—Ç—å –ª–æ–≥–∏ –≤ —Ñ–∞–π–ª—ã –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

!!! question "–ù—É–∂–µ–Ω –ª–∏ `tini` —Å `supervisord`?"

    –ù–µ—Ç, –µ—Å–ª–∏ `supervisord` ‚Äî **PID 1**, –æ–Ω —É–∂–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ä–æ–ª—å `init`: –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–∏–≥–Ω–∞–ª—ã –∏ "–∑–æ–º–±–∏".

    –ù–æ **–≤—Å–µ–≥–¥–∞ —É–±–µ–¥–∏—Ç–µ—Å—å**, —á—Ç–æ `supervisord` –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ **PID 1** (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–µ –∑–∞–ø—É—â–µ–Ω –∏–∑ shell-–æ–±–≤—è–∑–∫–∏).

!!! info "–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã supervisord"

    –í–º–µ—Å—Ç–æ `supervisord` –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:

    - `s6` ‚Äî –ª–µ–≥–∫–æ–≤–µ—Å–Ω–∞—è, –º–æ–¥—É–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞, –ø–æ–ø—É–ª—è—Ä–Ω–∞ –≤ –æ–±—Ä–∞–∑–∞—Ö –Ω–∞ Alpine Linux.
    - `runit` ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ **Phusion BaseImage**, —Ç–∞–∫–∂–µ –∫–æ–º–ø–∞–∫—Ç–µ–Ω –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–µ–Ω.

    –≠—Ç–∏ —Å–∏—Å—Ç–µ–º—ã –æ—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–Ω—ã –≤ –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è—Ö –∏ –ø—Ä–∏ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–º –∫–æ–Ω—Ç—Ä–æ–ª–µ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤.

### ‚öôÔ∏è `systemd`

!!! danger "–ù–µ –∑–∞–ø—É—Å–∫–∞–π—Ç–µ systemd –±–µ–∑ –æ—Å–æ–±–æ–π –Ω—É–∂–¥—ã"

    –î–ª—è –∑–∞–ø—É—Å–∫–∞ `systemd` –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ñ–ª–∞–≥ `--privileged` –∏–ª–∏ `--cap-add=SYS_ADMIN`, —Ä—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ cgroup –∏ volume'–æ–≤.

    –≠—Ç–æ –Ω–∞—Ä—É—à–∞–µ—Ç –∏–∑–æ–ª—è—Ü–∏—é, —Å–Ω–∏–∂–∞–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—Ç —Ñ–∏–ª–æ—Å–æ—Ñ–∏–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–∏.

–ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Å–∏–º—É–ª—è—Ü–∏—è –û–° (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è CI –∏–ª–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞–∫–µ—Ç–æ–≤), `systemd` –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–ø—Ä–∞–≤–¥–∞–Ω, –Ω–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–≥–æ —Å –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å—é.

### üöÄ Phusion BaseImage

!!! info "–ü–æ–¥—Ä–æ–±–Ω–µ–µ –ø—Ä–æ **Phusion BaseImage** —Å–º. –≤ –∏—Å—Ç–æ—á–Ω–∏–∫–µ üëâ [**phusion/baseimage-docker**](https://github.com/phusion/baseimage-docker)."

**Phusion BaseImage** ‚Äî —ç—Ç–æ –≥–æ—Ç–æ–≤—ã–π –æ–±—Ä–∞–∑ –Ω–∞ –±–∞–∑–µ Ubuntu, –∫–æ—Ç–æ—Ä—ã–π –≤–∫–ª—é—á–∞–µ—Ç `runit` –≤ –∫–∞—á–µ—Å—Ç–≤–µ init-–ø—Ä–æ—Ü–µ—Å—Å–∞.

!!! tip "–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Phusion BaseImage"

    - –ö–æ–≥–¥–∞ –Ω—É–∂–µ–Ω –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π, –Ω–æ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π init-–æ–±—Ä–∞–∑ –±–µ–∑ —Å–ª–æ–∂–Ω–æ—Å—Ç–µ–π `systemd`.
    - –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –º–æ–Ω–æ–ª–∏—Ç–æ–≤, —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∏ –ø—Ä–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ —Å VM –Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã.

### ‚ò∏Ô∏è –ü–æ–¥—Ö–æ–¥ Kubernetes

!!! info "Kubernetes-native –ø–æ–¥—Ö–æ–¥"

    –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç Docker, –≥–¥–µ –∏–Ω–æ–≥–¥–∞ –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –∑–∞–ø—É—Å–∫–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –≤ –æ–¥–Ω–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ, –≤ Kubernetes –¥–ª—è —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–∞—Ç—Ç–µ—Ä–Ω **Sidecar**.

    –ò–¥–µ—è –≤ —Ç–æ–º, —á—Ç–æ–±—ã –∑–∞–ø—É—Å–∫–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –≤–Ω—É—Ç—Ä–∏ –æ–¥–Ω–æ–≥–æ **–ü–æ–¥–∞ (Pod)**.

    –ö–∞–∂–¥—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤—ã–ø–æ–ª–Ω—è–µ—Ç –æ–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å—Å, –Ω–æ –æ–Ω–∏ —Ä–∞–∑–¥–µ–ª—è—é—Ç –æ–±—â–µ–µ —Å–µ—Ç–µ–≤–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –∏ –º–æ–≥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –æ–±—â–∏–º–∏ —Ç–æ–º–∞–º–∏ (volumes).

    **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**

    - **–ò–∑–æ–ª—è—Ü–∏—è**. –ö–∞–∂–¥—ã–π –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Å–≤–æ–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ —Å–æ —Å–≤–æ–∏–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏.
    - **–ù–µ–∑–∞–≤–∏—Å–∏–º–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**. Sidecar-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è —Å–±–æ—Ä–∞ –ª–æ–≥–æ–≤) –º–æ–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å, –Ω–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞—è –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
    - **–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**. –û–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ sidecar-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ —Ä–∞–∑–Ω—ã—Ö –ü–æ–¥–∞—Ö.

    –≠—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥ —Å—á–∏—Ç–∞–µ—Ç—Å—è –∏–¥–∏–æ–º–∞—Ç–∏—á–Ω—ã–º –¥–ª—è Kubernetes –∏ –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–µ–µ, —á–µ–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ –≤–Ω—É—Ç—Ä–∏ –æ–¥–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

---

## ‚úÖ –í—ã–±–æ—Ä –ø–æ–¥—Ö–æ–¥–∞

| –ó–∞–¥–∞—á–∞ | –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç |
| :--- | :--- |
| **–û–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å—Å** –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ | `tini` –∏–ª–∏ —Ñ–ª–∞–≥ `docker run --init` |
| **–ù–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ—Å—Ç—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤** | `supervisord`, `s6`, `runit` |
| –¢—Ä–µ–±—É–µ—Ç—Å—è **–ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Å–∏–º—É–ª—è—Ü–∏—è –û–°** | `systemd` (—Å –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å—é) |
| –ù—É–∂–µ–Ω **–ø—Ä–æ—Å—Ç–æ–π init-–æ–±—Ä–∞–∑** –¥–ª—è —Å–ª–æ–∂–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è | **Phusion BaseImage** |
| –ó–∞–ø—É—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ —á–µ—Ä–µ–∑ **shell-—Å–∫—Ä–∏–ø—Ç** | `shell` + `wait` + `tini` |
| **–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∏–≥–Ω–∞–ª–æ–≤ –∏ "–∑–æ–º–±–∏"** | `tini`, `supervisord`, `runit`, `s6` |

