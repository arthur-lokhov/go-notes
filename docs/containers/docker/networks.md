---
title: –°–µ—Ç–∏ –≤ Docker
---

# üåê –°–µ—Ç–∏ –≤ Docker

–°–µ—Ç–µ–≤–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ ‚Äî –æ–¥–Ω–∞ –∏–∑ –∫–ª—é—á–µ–≤—ã—Ö —Å–æ—Å—Ç–∞–≤–ª—è—é—â–∏—Ö –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏.

–ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ–±—â–∞—Ç—å—Å—è –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º –∏ —Å –≤–Ω–µ—à–Ω–∏–º –º–∏—Ä–æ–º.

Docker –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≥–∏–±–∫—É—é –∏ –º–æ—â–Ω—É—é —Å–∏—Å—Ç–µ–º—É –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Ç—è–º–∏, –æ–¥–Ω–∞–∫–æ –¥–ª—è production-—Å–∏—Å—Ç–µ–º, –æ—Å–æ–±–µ–Ω–Ω–æ –Ω–∞ –±–∞–∑–µ Kubernetes, –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –±–æ–ª–µ–µ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –ø–æ–¥—Ö–æ–¥—ã.

!!! abstract "üí° –¢–µ–∑–∏—Å"

    –°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å —Å–µ—Ç—è–º–∏ –≤ Docker —Å—Ç—Ä–æ–∏—Ç—Å—è –Ω–∞ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö `bridge` —Å–µ—Ç—è—Ö –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ –∏ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–º DNS –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤ –Ω–∞ –æ–¥–Ω–æ–º —Ö–æ—Å—Ç–µ.

    –í multi-host –æ–∫—Ä—É–∂–µ–Ω–∏—è—Ö (–∫–ª–∞—Å—Ç–µ—Ä–∞—Ö) —Å—Ç–∞–Ω–¥–∞—Ä—Ç –¥–µ-—Ñ–∞–∫—Ç–æ ‚Äî **Kubernetes** —Å CNI-–ø–ª–∞–≥–∏–Ω–∞–º–∏ (Calico, Cilium), –∫–æ—Ç–æ—Ä—ã–µ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ —Å–µ—Ç–µ–≤—ã–µ –ø–æ–ª–∏—Ç–∏–∫–∏.

---

## ‚öôÔ∏è –†–µ–∂–∏–º—ã —Å–µ—Ç–µ–≤–æ–π —Å—Ä–µ–¥—ã

Docker –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥—Ä–∞–π–≤–µ—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç, –∫–∞–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –±—É–¥–µ—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å —Å–µ—Ç—å—é —Ö–æ—Å—Ç–∞ –∏ –¥—Ä—É–≥–∏–º–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏.

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | `bridge` (–∫–∞—Å—Ç–æ–º–Ω–∞—è) | `host` | `macvlan` | `overlay` |
| :--- | :--- | :--- | :--- | :--- |
| **–û–±–ª–∞—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏—è** | –û–¥–∏–Ω —Ö–æ—Å—Ç | –û–¥–∏–Ω —Ö–æ—Å—Ç | –û–¥–∏–Ω —Ö–æ—Å—Ç | –ù–µ—Å–∫–æ–ª—å–∫–æ —Ö–æ—Å—Ç–æ–≤ (–∫–ª–∞—Å—Ç–µ—Ä) |
| **–ò–∑–æ–ª—è—Ü–∏—è** | ‚úÖ –í—ã—Å–æ–∫–∞—è (–º–µ–∂–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω–∞—è) | üîª –ù–µ—Ç (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–µ—Ç—å —Ö–æ—Å—Ç–∞) | ‚úÖ –í–∏–¥–∏–º –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ö–æ—Å—Ç –≤ —Å–µ—Ç–∏ | ‚úÖ –ò–∑–æ–ª–∏—Ä—É–µ—Ç —Å–µ—Ä–≤–∏—Å—ã –ø–æ overlay-—Å–µ—Ç–∏ |
| **DNS Discovery** | ‚úÖ –ï—Å—Ç—å (–∏–º–µ–Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤) | ‚ùå –ù–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ DNS | ‚ùå –ù–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ DNS | ‚úÖ –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π DNS –º–µ–∂–¥—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ –≤ —Å–µ—Ç–∏ |
| **–î–æ—Å—Ç—É–ø —Å–Ω–∞—Ä—É–∂–∏** | –ß–µ—Ä–µ–∑ –ø—Ä–æ–±—Ä–æ—Å –ø–æ—Ä—Ç–æ–≤ (`-p`) | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π (–æ–±—â–∞—è —Å–µ—Ç—å —Å —Ö–æ—Å—Ç–æ–º) | –ö–∞–∫ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ —Å–µ—Ç–µ–≤–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ | –ß–µ—Ä–µ–∑ ingress/–≤–Ω–µ—à–Ω–∏–µ LB |
| **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** | ‚úÖ –•–æ—Ä–æ—à–∞—è | üöÄ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è | ‚úÖ –í—ã—Å–æ–∫–∞—è (–µ—Å–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å) | üîª –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –Ω–∞–ª–∞–¥–∫–∏ –æ–≤–µ—Ä–ª–µ—è (–æ–±—ã—á–Ω–æ –º–µ–¥–ª–µ–Ω–Ω–µ–µ) |
| **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** | ‚úÖ –•–æ—Ä–æ—à–∞—è | üîª –ù–∏–∑–∫–∞—è (–Ω–µ—Ç —Å–µ—Ç–µ–≤–æ–π –∏–∑–æ–ª—è—Ü–∏–∏) | ‚úÖ –í—ã—Å–æ–∫–∞—è (–º–æ–∂–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å MAC/IP) | ‚úÖ –•–æ—Ä–æ—à–∞—è (–≤ —Ä–∞–º–∫–∞—Ö –∫–ª–∞—Å—Ç–µ—Ä–∞) |
| **–°–ª–æ–∂–Ω–æ—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** | ‚úÖ –ü—Ä–æ—Å—Ç–∞—è | ‚úÖ –ü—Ä–æ—Å—Ç–∞—è | üî∫ –¢—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ VLAN/—Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ | üî∫ –¢—Ä–µ–±—É–µ—Ç Swarm –∏–ª–∏ –¥—Ä—É–≥–∏—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ |
| **–û—Å–Ω–æ–≤–Ω–æ–π —Å—Ü–µ–Ω–∞—Ä–∏–π** | –°–≤—è–∑—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –æ–¥–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è | –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å-–∫—Ä–∏—Ç–∏—á–Ω—ã–µ –∑–∞–¥–∞—á–∏ | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ L2-—Å–µ—Ç–∏ | –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ |

### üìä –°—Ö–µ–º—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä

!!! example "üåâ Bridge Mode"

    ![bridge_mode](../assets/bridge_mode.png)

!!! example "üè† Host Mode"

    ![host_mode](../assets/host_mode.png)

!!! example "üîå Macvlan Mode"

    ![macvlan_mode](../assets/macvlan_mode.png)

!!! warning "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `host` —Ä–µ–∂–∏–º–∞"

    –†–µ–∂–∏–º `host` –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–Ω–∏–º–∞–µ—Ç —Å–µ—Ç–µ–≤—É—é –∏–∑–æ–ª—è—Ü–∏—é.

    –õ—é–±–æ–π –ø–æ—Ä—Ç, –æ—Ç–∫—Ä—ã—Ç—ã–π –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ, –±—É–¥–µ—Ç –æ—Ç–∫—Ä—ã—Ç –Ω–∞ —Ö–æ—Å—Ç–µ.

    –≠—Ç–æ—Ç —Ä–µ–∂–∏–º –ø–æ–ª–µ–∑–µ–Ω –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–º –Ω—É–∂–µ–Ω –ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ —Å–µ—Ç–µ–≤—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º —Ö–æ—Å—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, VPN-–∫–ª–∏–µ–Ω—Ç—ã –∏–ª–∏ —É—Ç–∏–ª–∏—Ç—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞), –Ω–æ –æ–Ω —Å–æ–∑–¥–∞–µ—Ç —Ä–∏—Å–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É –ø–æ—Ä—Ç–æ–≤.

!!! info "–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ `macvlan`"

    - –¢—Ä–µ–±—É–µ—Ç Ethernet-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ —Ö–æ—Å—Ç–∞ –≤ —Ä–µ–∂–∏–º–µ `promiscuous`.
    **–ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å Wi-Fi**, —Ç–∞–∫ –∫–∞–∫ —Å—Ç–∞–Ω–¥–∞—Ä—Ç 802.11 –Ω–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–¥–Ω–æ–º—É –∫–ª–∏–µ–Ω—Ç—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ MAC-–∞–¥—Ä–µ—Å–æ–≤.
    - **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å `macvlan` –Ω–µ —Å–º–æ–∂–µ—Ç –æ–±—â–∞—Ç—å—Å—è —Å —Ö–æ—Å—Ç–æ–º –Ω–∞–ø—Ä—è–º—É—é** ‚Äî —ç—Ç–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–∞–Ω–Ω–æ–π —Å–µ—Ç–µ–≤–æ–π –º–æ–¥–µ–ª–∏.

!!! example "‚öôÔ∏è –ü—Ä–∏–º–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è `macvlan` —Å–µ—Ç–∏"

    ```bash
    docker network create -d macvlan \
      --subnet=192.168.1.0/24 \
      --gateway=192.168.1.1 \
      -o parent=eth0 pub_net
    ```

---

## üîó –ú–µ—Ö–∞–Ω–∏–∑–º—ã —Å–≤—è–∑–∏

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | `--link` | **Services (Swarm)** | **Networks (–∫–∞—Å—Ç–æ–º–Ω—ã–µ)** |
| :--- | :--- | :--- | :--- |
| **–ú–µ—Ö–∞–Ω–∏–∑–º** | –ó–∞–ø–∏—Å–∏ –≤ `/etc/hosts` + –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è | DNS + –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π Load Balancer | –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π DNS –∏ IP-–∞–¥—Ä–µ—Å–∞—Ü–∏—è |
| **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ DNS** | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ (–≤–Ω—É—Ç—Ä–∏ overlay —Å–µ—Ç–∏) | ‚úÖ –î–∞ (–≤–Ω—É—Ç—Ä–∏ custom `bridge` —Å–µ—Ç–∏) |
| **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** | ‚ùå –ù–µ—Ç ‚Äî –Ω–µ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ —Ä–µ—Å—Ç–∞—Ä—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ | ‚úÖ –î–∞ ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è/—É–¥–∞–ª–µ–Ω–∏–µ | ‚úÖ –î–∞ ‚Äî DNS-–∏–º–µ–Ω–∞ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ |
| **–ò–∑–æ–ª—è—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤** | üîª –ù–µ—Ç | ‚úÖ –î–∞ ‚Äî –ø–æ overlay-—Å–µ—Ç—è–º | ‚úÖ –î–∞ ‚Äî –ø–æ custom-—Å–µ—Ç—è–º |
| **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Compose** | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–∞—è | ‚úÖ –ü–æ–ª–Ω–∞—è (—á–µ—Ä–µ–∑ `deploy`) | ‚úÖ –ü–æ–ª–Ω–∞—è |
| **–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ** | ‚ùå –ù–µ—Ç | ‚úÖ –í—Å—Ç—Ä–æ–µ–Ω–æ –≤ –∫–æ–Ω—Ü–µ–ø—Ü–∏—é | ‚ùå –ù–µ –≤—Å—Ç—Ä–æ–µ–Ω–æ, –Ω–æ –≤–æ–∑–º–æ–∂–Ω–æ –≤—Ä—É—á–Ω—É—é |
| **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º** | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ (—Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–ª–∞—Å—Ç–µ—Ä–∞ —Ö—Ä–∞–Ω–∏—Ç—Å—è) | ‚ùå –ù–µ—Ç ‚Äî Docker –Ω–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç "—Å–µ—Ä–≤–∏—Å–Ω–æ—Å—Ç—å" |
| **–ê–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å** | ‚ùå –£—Å—Ç–∞—Ä–µ–ª–æ (DEPRECATED) | ‚ö†Ô∏è –¢–æ–ª—å–∫–æ –≤ —Ä–∞–º–∫–∞—Ö Swarm (–Ω–µ –¥–ª—è Kubernetes) | ‚úÖ –°–æ–≤—Ä–µ–º–µ–Ω–Ω–æ, —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è |
| **–û—Å–Ω–æ–≤–Ω–æ–π —Å—Ü–µ–Ω–∞—Ä–∏–π** | –†–∞–Ω–Ω–∏–µ –≤–µ—Ä—Å–∏–∏ Docker, –ø—Ä–∏–º–∏—Ç–∏–≤–Ω–∞—è —Å–≤—è–∑—å | –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã –≤ Swarm-–∫–ª–∞—Å—Ç–µ—Ä–µ | –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ –æ–¥–Ω–æ–º —Ö–æ—Å—Ç–µ –∏–ª–∏ —Å proxy |

---

## üß≠ Service Discovery

–í –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º –Ω—É–∂–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Ö–æ–¥–∏—Ç—å –¥—Ä—É–≥ –¥—Ä—É–≥–∞.

–≠—Ç–æ—Ç –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è **Service Discovery**.

### ‚öôÔ∏è –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π DNS

–°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π DNS-—Å–µ—Ä–≤–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö `bridge` —Å–µ—Ç—è—Ö.

Docker –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É DNS-–∏–º—è, —Å–æ–≤–ø–∞–¥–∞—é—â–µ–µ —Å –µ–≥–æ –∏–º–µ–Ω–µ–º.

!!! example "‚öôÔ∏è –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ DNS"

    1.  **–°–æ–∑–¥–∞–µ–º —Å–µ—Ç—å –∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:**

        ```bash
        docker network create my-app-net
        docker run -d --name db --network my-app-net postgres:13
        docker run -d --name web --network my-app-net alpine sleep 3600
        ```

    2.  **–ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∏–º–µ–Ω –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ `web`:**

        ```bash
        # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —É—Ç–∏–ª–∏—Ç—ã, –µ—Å–ª–∏ –∏—Ö –Ω–µ—Ç –≤ –æ–±—Ä–∞–∑–µ
        docker exec web apk add --no-cache curl bind-tools

        # –ü—Ä–æ–≤–µ—Ä—è–µ–º DNS-–∑–∞–ø–∏—Å—å —Å –ø–æ–º–æ—â—å—é getent
        docker exec web getent hosts db
        # –û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥ (IP-–∞–¥—Ä–µ—Å –º–æ–∂–µ—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è):
        # 172.19.0.2      db

        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–≤—è–∑—å —Å –ø–æ–º–æ—â—å—é curl
        docker exec web curl http://db:5432
        # curl: (7) Failed to connect to db port 5432 after 0 ms: Connection refused
        ```

        –ü–æ–ª—É—á–µ–Ω–∏–µ `Connection refused` –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ DNS-–∏–º—è —É—Å–ø–µ—à–Ω–æ —Ä–∞–∑—Ä–µ—à–∏–ª–æ—Å—å, –Ω–æ –ø–æ—Ä—Ç –Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ `db` –æ—Ç–∫–ª–æ–Ω—è–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ (—á—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, —Ç–∞–∫ –∫–∞–∫ PostgreSQL –Ω–µ –æ–±—Å–ª—É–∂–∏–≤–∞–µ—Ç HTTP-–∑–∞–ø—Ä–æ—Å—ã).

### üõ†Ô∏è –í–Ω–µ—à–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

–î–ª—è –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤–Ω–µ—à–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã.

-   **Key-Value —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ (Consul, etcd)**: –°–µ—Ä–≤–∏—Å—ã –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç —Å–µ–±—è –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ.
-   **Reverse Proxy (Traefik, NGINX)**: –ü—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä—ã, –∫–æ—Ç–æ—Ä—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç –∑–∞–ø—É—Å–∫ –∏ –æ—Å—Ç–∞–Ω–æ–≤–∫—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –∏ –æ–±–Ω–æ–≤–ª—è—é—Ç —Å–≤–æ—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏.

!!! success "‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: Traefik –¥–ª—è Docker"

    **Traefik** ‚Äî –∏–¥–µ–∞–ª—å–Ω—ã–π –≤—ã–±–æ—Ä –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–æ–º –∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º –Ω–∞ –æ–¥–Ω–æ–º —Ö–æ—Å—Ç–µ.

    –û–Ω –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å Docker API, –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –ª–µ–π–±–ª—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç —Ä–æ—É—Ç–∏–Ω–≥.

!!! info "DNS –≤ Kubernetes: CoreDNS"

    –í —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π DNS –≤ Docker –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –æ–¥–Ω–æ–≥–æ —Ö–æ—Å—Ç–∞, –≤ –∫–ª–∞—Å—Ç–µ—Ä–∞—Ö Kubernetes —ç—Ç—É —Ä–æ–ª—å –≤—ã–ø–æ–ª–Ω—è–µ—Ç **CoreDNS**.

    –û–Ω —Å—Ç–∞–ª –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω—ã–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–º, –∑–∞–º–µ–Ω–∏–≤ –±–æ–ª–µ–µ —Ä–∞–Ω–Ω–∏–µ —Ä–µ—à–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, `kube-dns` –∏ `SkyDNS`), –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≥–∏–±–∫—É—é –∏ —Ä–∞—Å—à–∏—Ä—è–µ–º—É—é —Å–∏—Å—Ç–µ–º—É –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤.

---

## üîå –°–µ—Ç–µ–≤—ã–µ –ø–ª–∞–≥–∏–Ω—ã

!!! question "–ó–∞—á–µ–º –∑–¥–µ—Å—å CNI, –µ—Å–ª–∏ –º—ã –ø—Ä–æ Docker?"

    –•–æ—Ç—è CNI-–ø–ª–∞–≥–∏–Ω—ã –≤—Ä–æ–¥–µ Calico –∏ Cilium –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç —Å Docker –Ω–∞–ø—Ä—è–º—É—é, –æ–Ω–∏ —É–ø–æ–º–∏–Ω–∞—é—Ç—Å—è –∑–¥–µ—Å—å –ø–æ –¥–≤—É–º –ø—Ä–∏—á–∏–Ω–∞–º:

    1.  –û–Ω–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ production-—Å—Ä–µ–¥–∞—Ö, –∫—É–¥–∞ –æ–±—ã—á–Ω–æ –º–∏–≥—Ä–∏—Ä—É—é—Ç –ø–æ—Å–ª–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –≤ Docker.
    2.  –û–Ω–∏ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É—é—Ç, **–∫–∞–∫–∏–µ —Å–µ—Ç–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –µ—Å—Ç—å —É Kubernetes, –Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã –≤ Docker**.

    –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –ø–æ–Ω–∏–º–∞–Ω–∏–µ CNI –≤–∞–∂–Ω–æ –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ–π, –±–µ–∑–æ–ø–∞—Å–Ω–æ–π —Å–µ—Ç–µ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã ‚Äî –¥–∞–∂–µ –µ—Å–ª–∏ –≤—ã –ø–æ–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ —Ç–æ–ª—å–∫–æ Docker.

### üí• –ù–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

–í–∞–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å –∫–ª—é—á–µ–≤–æ–µ —Ä–∞–∑–ª–∏—á–∏–µ –≤ —Å–µ—Ç–µ–≤—ã—Ö –º–æ–¥–µ–ª—è—Ö:

-   **Docker Engine** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É **`libnetwork`** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥—Ä–∞–π–≤–µ—Ä–∞–º–∏ (`bridge`, `host` –∏ –¥—Ä.).
-   **Kubernetes** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç **CNI (Container Network Interface)**, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —Å—Ä–µ–¥–∞–º–∏ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è `containerd` –∏ `CRI-O`.

!!! info "–ö–æ–Ω—Ç–µ–∫—Å—Ç"

    –ù–∏ Calico, –Ω–∏ Cilium –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç —Å `docker engine` –Ω–∞–ø—Ä—è–º—É—é ‚Äî –æ–Ω–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –≤ Kubernetes-–∫–ª–∞—Å—Ç–µ—Ä–∞—Ö.

    –ù–æ –∑–Ω–∞–Ω–∏–µ –∏—Ö –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤ –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –ø–æ–ª–µ–∑–Ω–æ –¥–∞–∂–µ –ø—Ä–∏ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π, —á—Ç–æ–±—ã –ø–æ–Ω–∏–º–∞—Ç—å, **–≥–¥–µ –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—Ç—Å—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ Docker** –∏ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—å –≤ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π —Å–µ—Ç–µ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ.

!!! question "–ê –∫–∞–∫ –∂–µ Docker Swarm?"

    Docker Swarm –±—ã–ª –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º Docker, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–º `overlay` —Å–µ—Ç–∏ –¥–ª—è —Å–≤—è–∑–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –º–µ–∂–¥—É —Ö–æ—Å—Ç–∞–º–∏.

    –û–¥–Ω–∞–∫–æ —Å 2020-—Ö –≥–æ–¥–æ–≤ —Ä–∞–∑–≤–∏—Ç–∏–µ Swarm —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –æ—Å—Ç–∞–Ω–æ–≤–∏–ª–æ—Å—å, –∏ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ –ø–µ—Ä–µ—à–ª–æ –Ω–∞ Kubernetes –∫–∞–∫ –±–æ–ª–µ–µ –≥–∏–±–∫–æ–µ –∏ –º–æ—â–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ.

### ‚öñÔ∏è –°—Ä–∞–≤–Ω–µ–Ω–∏–µ CNI

| –ö—Ä–∏—Ç–µ—Ä–∏–π | **Flannel** | **Calico** | **Cilium** |
| :--- | :--- | :--- | :--- |
| **–¢–∏–ø –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏** | Overlay (VXLAN) | Layer 3 –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è (BGP / IPIP / WireGuard) | Kernel-level –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ eBPF |
| **Overlay-—Å–µ—Ç—å** | ‚úÖ –î–∞ | ‚ùå –ù–µ—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) | ‚ùå –ù–µ—Ç |
| **–°–µ—Ç–µ–≤—ã–µ –ø–æ–ª–∏—Ç–∏–∫–∏** | ‚ùå –ù–µ—Ç | ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è (Kubernetes NetworkPolicy + CalicoPolicy) | ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è (L3‚ÄìL7, –≤–∫–ª—é—á–∞—è HTTP/HTTPS) |
| **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ eBPF** | ‚ùå –ù–µ—Ç | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–∞—è (–≤ –Ω–æ–≤—ã—Ö –≤–µ—Ä—Å–∏—è—Ö –∫–∞–∫ –æ–ø—Ü–∏—è) | ‚úÖ –ü–æ–ª–Ω–∞—è eBPF-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) |
| **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** | ‚ö†Ô∏è –°—Ä–µ–¥–Ω—è—è (overlay –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã) | ‚úÖ –í—ã—Å–æ–∫–∞—è (–Ω–∞—Ç–∏–≤–Ω–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è) | üöÄ –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è (eBPF –±–µ–∑ iptables/OVS) |
| **–ù–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å (Observability)** | ‚ùå –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è | ‚ö†Ô∏è –ë–∞–∑–æ–≤–∞—è (—á–µ—Ä–µ–∑ Prometheus –∏ Flow Logs) | ‚úÖ –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è: Hubble, —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤, –≤–∏–¥–∏–º–æ—Å—Ç—å L7 |
| **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** | ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç | ‚úÖ –ó–∞—â–∏—Ç–∞ L3/L4 | ‚úÖ –ó–∞—â–∏—Ç–∞ L3‚ÄìL7 (–≤–∫–ª—é—á–∞—è TLS/HTTP –ø–æ–ª–∏—Ç–∏–∫–∏, identity-aware) |
| **Service Mesh –±–µ–∑ sidecar** | ‚ùå –ù–µ—Ç | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ (—á–µ—Ä–µ–∑ eBPF-based transparent proxy) |
| **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ Kubernetes** | ‚úÖ –ü–æ–ª–Ω–∞—è | ‚úÖ –ü–æ–ª–Ω–∞—è | ‚úÖ –ü–æ–ª–Ω–∞—è |
| **–°–ª–æ–∂–Ω–æ—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** | üü¢ –ù–∏–∑–∫–∞—è | üü° –°—Ä–µ–¥–Ω—è—è | üî¥ –í—ã—à–µ —Å—Ä–µ–¥–Ω–µ–π (–º–æ—â–Ω–æ, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç –ø–æ–Ω–∏–º–∞–Ω–∏—è eBPF –∏ –ø–æ–ª–∏—Ç–∏–∫–∏) |
| **–û—Å–Ω–æ–≤–Ω–æ–π —Å—Ü–µ–Ω–∞—Ä–∏–π** | –ü—Ä–æ—Å—Ç–æ–π –∫–ª–∞—Å—Ç–µ—Ä –±–µ–∑ –ø–æ–ª–∏—Ç–∏–∫ | –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ —Å—Ä–µ–¥—ã —Å –∂–µ—Å—Ç–∫–∏–º–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ | –ö–ª–∞—Å—Ç–µ—Ä—ã, –≥–¥–µ –≤–∞–∂–Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ L7-–∫–æ–Ω—Ç—Ä–æ–ª—å |

---

## üêù eBPF –∏ —Å–µ—Ç–∏ Docker

–•–æ—Ç—è *[eBPF](./../../linux/kernel/ebpf.md)* —è–≤–ª—è–µ—Ç—Å—è –æ—Å–Ω–æ–≤–æ–π –¥–ª—è –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö CNI-–ø–ª–∞–≥–∏–Ω–æ–≤ –≤ Kubernetes, –µ–≥–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —Å–µ—Ç–µ–π –≤ "—á–∏—Å—Ç–æ–º" Docker.

!!! info "–ö–∞–∫ eBPF –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å Docker"

    –ü—Ä–æ–≥—Ä–∞–º–º—ã eBPF –º–æ–≥—É—Ç –±—ã—Ç—å –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω—ã –∫ —Å–µ—Ç–µ–≤—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º —Ö–æ—Å—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `docker0` –∏–ª–∏ `veth`-–ø–∞—Ä–∞–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤) –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–ª–µ–¥—É—é—â–∏—Ö –∑–∞–¥–∞—á:

    -   **–í—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞**: –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π—Ä–≤–æ–ª–æ–≤ —Å –ø–æ–º–æ—â—å—é XDP (eXpress Data Path), –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å–µ—Ç–µ–≤–æ–≥–æ –¥—Ä–∞–π–≤–µ—Ä–∞, –¥–æ –≤—Ö–æ–¥–∞ –ø–∞–∫–µ—Ç–æ–≤ –≤ —Å–µ—Ç–µ–≤–æ–π —Å—Ç–µ–∫ —è–¥—Ä–∞.
    -   **–ù–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å (Observability)**: –°–±–æ—Ä –¥–µ—Ç–∞–ª—å–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫ –æ —Å–µ—Ç–µ–≤–æ–º —Ç—Ä–∞—Ñ–∏–∫–µ, –∑–∞–¥–µ—Ä–∂–∫–∞—Ö –∏ –æ—à–∏–±–∫–∞—Ö –±–µ–∑ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.
    –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã, —Ç–∞–∫–∏–µ –∫–∞–∫ **Pixie**, **bpftrace** –∏–ª–∏ **Hubble (–æ—Ç Cilium)**, –º–æ–≥—É—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–µ –≤—ã–∑–æ–≤—ã –∏ —Å–µ—Ç–µ–≤—ã–µ –ø–∞–∫–µ—Ç—ã, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏.
    -   **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ–π —Å–µ—Ç–µ–≤–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

---

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Å–µ—Ç–µ–π

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–µ—Ç–µ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Docker –º–æ–∂–µ—Ç –Ω–µ—Å—Ç–∏ —Ä–∏—Å–∫–∏.

!!! danger "–†–∏—Å–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏"

    - **Default bridge**: –í—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –≤ —Å–µ—Ç–∏ `bridge` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –º–æ–≥—É—Ç –æ–±—â–∞—Ç—å—Å—è –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–∫–æ–º–ø—Ä–æ–º–µ—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–º—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É –∞—Ç–∞–∫–æ–≤–∞—Ç—å —Å–æ—Å–µ–¥–Ω–∏–µ.
    - **Host network**: –°–Ω–∏–º–∞–µ—Ç –≤—Å—é —Å–µ—Ç–µ–≤—É—é –∏–∑–æ–ª—è—Ü–∏—é, –æ—Ç–∫—Ä—ã–≤–∞—è –ø–æ—Ä—Ç—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –Ω–∞ —Ö–æ—Å—Ç–µ –∏ –ø–æ–∑–≤–æ–ª—è—è –µ–º—É "—Å–ª—É—à–∞—Ç—å" —Ç—Ä–∞—Ñ–∏–∫ —Ö–æ—Å—Ç–∞.
    - **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ Firewall**: Docker –Ω–µ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –º–µ–∂–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—ã–π —Ñ–∞–π—Ä–≤–æ–ª.

### üõ°Ô∏è –ú–µ—Ç–æ–¥—ã –∑–∞—â–∏—Ç—ã

1.  **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–∞—Å—Ç–æ–º–Ω—ã–µ `bridge` —Å–µ—Ç–∏**: –ë–∞–∑–æ–≤—ã–π –∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π —à–∞–≥ –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ –≥—Ä—É–ø–ø –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤.
2.  **–§–ª–∞–≥ `--internal`**: –°–æ–∑–¥–∞–µ—Ç —Å–µ—Ç—å, –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –≤ –∫–æ—Ç–æ—Ä–æ–π –º–æ–≥—É—Ç –æ–±—â–∞—Ç—å—Å—è –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º, –Ω–æ –Ω–µ –∏–º–µ—é—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –≤–Ω–µ—à–Ω–µ–π —Å–µ—Ç–∏.
3.  **–°–µ—Ç–µ–≤—ã–µ –ø–æ–ª–∏—Ç–∏–∫–∏ (Kubernetes)**: –í Kubernetes –¥–ª—è –≥—Ä–∞–Ω—É–ª—è—Ä–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è —Ç—Ä–∞—Ñ–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è `NetworkPolicy`, —Ä–µ–∞–ª–∏–∑—É–µ–º—ã–µ CNI-–ø–ª–∞–≥–∏–Ω–∞–º–∏.
4.  **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ö–æ—Å—Ç–∞**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `iptables` –Ω–∞ —Ö–æ—Å—Ç–µ, –∞ —Ç–∞–∫–∂–µ –ø—Ä–æ—Ñ–∏–ª–∏ **AppArmor** –∏ **seccomp** –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ —è–¥—Ä–∞.

---

## üêõ –û—Ç–ª–∞–¥–∫–∞ —Å–µ—Ç–µ–π

### üíª `docker exec`

–ü–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ç–µ–≤—ã–µ —É—Ç–∏–ª–∏—Ç—ã –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–≤—è–∑–∏ "–∏–∑–Ω—É—Ç—Ä–∏".

-   **`ping <hostname>`**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑–æ–≤–æ–π –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∏–º–µ–Ω.
-   **`curl <hostname>:<port>`**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ TCP-–ø–æ—Ä—Ç–∞ –∏ —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
-   **`ip addr`** –∏–ª–∏ **`ifconfig`**: –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–µ—Ç–µ–≤—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.
-   **`getent hosts <hostname>`**: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ DNS Docker.

### ü¶à `tcpdump` –∏ `tshark`

–ú–æ—â–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ç—Ä–∞—Ñ–∏–∫–∞. –ò—Ö –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å:

-   **–ù–∞ —Ö–æ—Å—Ç–µ**, —Å–ª—É—à–∞—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `docker0` –∏–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π `veth` –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.
-   **–í–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞**, –µ—Å–ª–∏ –æ–Ω–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã, –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ç—Ä–∞—Ñ–∏–∫–∞ —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è —Å–∞–º–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

!!! example "‚öôÔ∏è –ü—Ä–∏–º–µ—Ä —Å `tcpdump` –Ω–∞ —Ö–æ—Å—Ç–µ"

    ```bash
    # –ü—Ä–æ—â–µ –≤—Å–µ–≥–æ —Å–ª—É—à–∞—Ç—å –º–æ—Å—Ç docker0
    sudo tcpdump -i docker0 -n 'port 80'
    ```

### üö™ `nsenter`

–ü–æ–∑–≤–æ–ª—è–µ—Ç –≤–æ–π—Ç–∏ –≤ —Å–µ—Ç–µ–≤–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –∏–º–µ–Ω (network namespace) —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ø—Ä—è–º–æ —Å —Ö–æ—Å—Ç–∞.

–≠—Ç–æ –¥–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Å–µ —Å–µ—Ç–µ–≤—ã–µ —É—Ç–∏–ª–∏—Ç—ã —Ö–æ—Å—Ç–∞ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ —Å–µ—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –∫–∞–∫ –µ—Å–ª–∏ –±—ã –≤—ã –Ω–∞—Ö–æ–¥–∏–ª–∏—Å—å –≤–Ω—É—Ç—Ä–∏ –Ω–µ–≥–æ.

!!! example "‚öôÔ∏è –ü—Ä–∏–º–µ—Ä —Å `nsenter`"

    ```bash
    # –ü–æ–ª—É—á–∞–µ–º PID –ø—Ä–æ—Ü–µ—Å—Å–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
    PID=$(docker inspect -f '{{.State.Pid}}' my-container)

    # –í—Ö–æ–¥–∏–º –≤ –µ–≥–æ —Å–µ—Ç–µ–≤–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –∏–º–µ–Ω
    sudo nsenter -t $PID -n ip addr
    ```

---

## üõ†Ô∏è –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã

### `docker network create`

–°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—É—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫—É—é —Å–µ—Ç—å.

!!! example "‚öôÔ∏è –ü—Ä–∏–º–µ—Ä"

    ```bash
    docker network create my-network
    ```

### `docker network ls`

–í—ã–≤–æ–¥–∏—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å–µ—Ç–µ–π.

!!! example "‚öôÔ∏è –ü—Ä–∏–º–µ—Ä"

    ```bash
    docker network ls
    ```

### `docker network inspect`

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–µ—Ç–∏.

!!! example "‚öôÔ∏è –ü—Ä–∏–º–µ—Ä"

    ```bash
    docker network inspect my-network
    ```

### `docker network connect`

–ü–æ–¥–∫–ª—é—á–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫ —Å–µ—Ç–∏.

!!! example "‚öôÔ∏è –ü—Ä–∏–º–µ—Ä"

    ```bash
    docker network connect my-network my-container
    ```

### `docker network disconnect`

–û—Ç–∫–ª—é—á–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –æ—Ç —Å–µ—Ç–∏.

!!! example "‚öôÔ∏è –ü—Ä–∏–º–µ—Ä"

    ```bash
    docker network disconnect my-network my-container
    ```

### `docker network rm`

–£–¥–∞–ª—è–µ—Ç –æ–¥–Ω—É –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å–µ—Ç–µ–π.

!!! example "‚öôÔ∏è –ü—Ä–∏–º–µ—Ä"

    ```bash
    docker network rm my-network
    ```
