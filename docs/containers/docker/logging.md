---
title: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Docker
---

# ü™µ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Docker

!!! abstract "–§–∏–ª–æ—Å–æ—Ñ–∏—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö"

    –í –º–∏—Ä–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å **–Ω–µ–∑–∞–≤–∏—Å–∏–º—ã –æ—Ç —Å–ø–æ—Å–æ–±–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è –ª–æ–≥–æ–≤**.

    –õ—É—á—à–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ ‚Äî –ø–∏—Å–∞—Ç—å –≤—Å–µ –ª–æ–≥–∏ –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –ø–æ—Ç–æ–∫–∏ –≤—ã–≤–æ–¥–∞ **STDOUT** –∏ **STDERR**.

    –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç Docker-–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞—Ç—å –∏—Ö –∏ –Ω–∞–ø—Ä–∞–≤–ª—è—Ç—å –∫—É–¥–∞ —É–≥–æ–¥–Ω–æ, –Ω–µ —Ç—Ä–µ–±—É—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∫–æ–¥–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

    –ó–∞–±—É–¥—å—Ç–µ –æ –∑–∞–ø–∏—Å–∏ –≤ —Ñ–∞–π–ª—ã –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ ‚Äî —ç—Ç–æ –∞–Ω—Ç–∏-–ø–∞—Ç—Ç–µ—Ä–Ω.

!!! info "–ö–æ–Ω—Ç–µ–∫—Å—Ç: –û–±–ª–∞–∫–æ > Docker > Kubernetes"

    –í Kubernetes –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–æ–≥-–¥—Ä–∞–π–≤–µ—Ä—ã Docker, –∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, **–Ω–µ —Å–ª–µ–¥—É–µ—Ç**.

    –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ä–µ–¥—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤, —Ç–∞–∫–∏–µ –∫–∞–∫ `containerd` –∏ `cri-o`, —á–∞—Å—Ç–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –¥—Ä–∞–π–≤–µ—Ä—ã Docker –≤–æ–≤—Å–µ. 
    
    –õ–æ–≥–∏–∫–∞ —Å–±–æ—Ä–∞ –ª–æ–≥–æ–≤ –≤ Kubernetes –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ –Ω–∞ –∞–≥–µ–Ω—Ç–∞—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, Fluent Bit, Promtail), –∫–æ—Ç–æ—Ä—ã–µ —á–∏—Ç–∞—é—Ç **STDOUT** –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤, –∞ –Ω–µ –Ω–∞ –¥—Ä–∞–π–≤–µ—Ä–∞—Ö, –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞—é—â–∏—Ö –≤—ã–≤–æ–¥.

---

## ‚öôÔ∏è –ú–µ—Ö–∞–Ω–∏–∑–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é Docker –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥—Ä–∞–π–≤–µ—Ä `json-file`, –∫–æ—Ç–æ—Ä—ã–π —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ª–æ–≥–∏ –∫–∞–∂–¥–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –≤ –≤–∏–¥–µ JSON-—Ñ–∞–π–ª–æ–≤ –Ω–∞ —Ö–æ—Å—Ç–æ–≤–æ–π –º–∞—à–∏–Ω–µ (–æ–±—ã—á–Ω–æ –≤ `/var/lib/docker/containers/<container-id>/`).

–ö–æ–º–∞–Ω–¥–∞ `docker logs` ‚Äî —ç—Ç–æ –≤–∞—à –æ—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —ç—Ç–∏–º –ª–æ–≥–∞–º.

!!! warning "–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ `docker logs`"

    –ö–æ–º–∞–Ω–¥–∞ `docker logs` —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å –¥—Ä–∞–π–≤–µ—Ä–∞–º–∏, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–º–∏ —á—Ç–µ–Ω–∏–µ –ª–æ–≥–æ–≤ —á–µ—Ä–µ–∑ Docker API (`json-file`, `journald`).

    –° –¥—Ä–∞–π–≤–µ—Ä–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ —Ç–æ–ª—å–∫–æ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç –ª–æ–≥–∏ (`fluentd`, `syslog`, `gelf`), –æ–Ω–∞ –Ω–µ –±—É–¥–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –≤—ã–≤–æ–¥.

!!! example "–ö–ª—é—á–µ–≤—ã–µ —Ñ–ª–∞–≥–∏ `docker logs`"

    ```bash
    # 1. –°–ª–µ–¥–∏—Ç—å –∑–∞ –ª–æ–≥–∞–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
    docker logs -f my-container

    # 2. –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫
    docker logs --tail 100 my-container

    # 3. –î–æ–±–∞–≤–∏—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏ (timestamps)
    docker logs -t my-container

    # 4. –ü–æ–∫–∞–∑–∞—Ç—å –ª–æ–≥–∏ –∑–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥
    docker logs --since 2023-10-27T10:00:00Z --until 2023-10-27T10:15:00Z my-container
    ```

!!! question "–û—Ç–∫—É–¥–∞ –±–µ—Ä—É—Ç—Å—è –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏?"

    –§–ª–∞–≥ `-t` –∑–∞—Å—Ç–∞–≤–ª—è–µ—Ç **–¥–µ–º–æ–Ω Docker**, –∞ –Ω–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –¥–æ–±–∞–≤–ª—è—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—É—é –º–µ—Ç–∫—É –∫ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–µ –ª–æ–≥–∞.

    –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –∏—Ö —Ç–æ—á–Ω–æ—Å—Ç—å, –¥–∞–∂–µ –µ—Å–ª–∏ –≤—Ä–µ–º—è –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.


!!! warning "–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è `json-file`"

    –≠—Ç–æ—Ç –¥—Ä–∞–π–≤–µ—Ä —É–¥–æ–±–µ–Ω –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, –Ω–æ **–Ω–µ–ø—Ä–∏–≥–æ–¥–µ–Ω –¥–ª—è production**, —Ç–∞–∫ –∫–∞–∫:

    - –õ–æ–≥–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –Ω–∞ –∫–∞–∂–¥–æ–º —Ö–æ—Å—Ç–µ –∏ –Ω–µ –∞–≥—Ä–µ–≥–∏—Ä—É—é—Ç—Å—è.
    - –ë–µ–∑ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–æ—Ç–∞—Ü–∏–∏ —Ñ–∞–π–ª—ã –ª–æ–≥–æ–≤ –º–æ–≥—É—Ç –±–µ—Å–∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–æ —Ä–∞—Å—Ç–∏, –∑–∞–Ω–∏–º–∞—è –≤—Å–µ –¥–∏—Å–∫–æ–≤–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ.
    - `docker logs` –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ª–æ–≥–∏ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤. –ï—Å–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –±—ã–ª —É–¥–∞–ª–µ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ CI/CD), –∞ –µ–≥–æ –ª–æ–≥-—Ñ–∞–π–ª –Ω–µ –±—ã–ª —Å–æ—Ö—Ä–∞–Ω–µ–Ω, **–ª–æ–≥–∏ –±—É–¥—É—Ç –ø–æ—Ç–µ—Ä—è–Ω—ã –Ω–∞–≤—Å–µ–≥–¥–∞**.
    - Docker **–Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è –ª–æ–≥–æ–≤**. –û–ø—Ü–∏–∏ `max-age` –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Ç–æ–ª—å–∫–æ —Ä–æ—Ç–∞—Ü–∏—é –ø–æ —Ä–∞–∑–º–µ—Ä—É (`max-size`) –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —Ñ–∞–π–ª–æ–≤ (`max-file`).

---

## üîå –î—Ä–∞–π–≤–µ—Ä—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

–î–ª—è —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–±–æ—Ä–∞ –ª–æ–≥–æ–≤ Docker –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–¥—Ä–∞–π–≤–µ—Ä—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è**.

!!! warning "–†–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤ –∏ –¥—Ä–∞–π–≤–µ—Ä—ã"

    –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –¥—Ä–∞–π–≤–µ—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç –ª–æ–≥–∏ –≤–æ –≤–Ω–µ—à–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã (`fluentd`, `gelf`, `syslog`), —Ä–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç **–≤–Ω–µ Docker**.

    –ï—ë –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –≤ —Å–∏—Å—Ç–µ–º–µ-–ø—Ä–∏–µ–º–Ω–∏–∫–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ Fluent Bit, `journald` –∏–ª–∏ –Ω–∞ syslog-—Å–µ—Ä–≤–µ—Ä–µ).

    Docker –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ —Ç–æ–ª—å–∫–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ª–æ–≥–∏, –Ω–æ –Ω–µ —É–ø—Ä–∞–≤–ª—è–µ—Ç –∏—Ö —Ö—Ä–∞–Ω–µ–Ω–∏–µ–º.

–í—ã –º–æ–∂–µ—Ç–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∏—Ö –≥–ª–æ–±–∞–ª—å–Ω–æ –≤ —Ñ–∞–π–ª–µ `/etc/docker/daemon.json` –∏–ª–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –æ—Ç–¥–µ–ª—å–Ω–æ —Å –ø–æ–º–æ—â—å—é —Ñ–ª–∞–≥–∞ `--log-driver`.

| –î—Ä–∞–π–≤–µ—Ä | –û–ø–∏—Å–∞–Ω–∏–µ |
| :--- | :--- |
| `json-file` | **–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é**. –ü–∏—à–µ—Ç –ª–æ–≥–∏ –≤ –ª–æ–∫–∞–ª—å–Ω—ã–µ JSON-—Ñ–∞–π–ª—ã. |
| `journald` | –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ª–æ–≥–∏ –≤ `systemd-journald`. –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è —Å–∏—Å—Ç–µ–º, –≥–¥–µ `journald` ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç. |
| `syslog` | –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ª–æ–≥–∏ –Ω–∞ `syslog`-—Å–µ—Ä–≤–µ—Ä. –ü—Ä–æ—Å—Ç–æ–π –∏ –Ω–∞–¥–µ–∂–Ω—ã–π —Å–ø–æ—Å–æ–±. |
| `fluentd` | –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ª–æ–≥–∏ –Ω–∞ `Fluentd` ‚Äî –ø–æ–ø—É–ª—è—Ä–Ω—ã–π –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä –ª–æ–≥–æ–≤. |
| `gelf` | –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ª–æ–≥–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ Graylog Extended Log Format (GELF). **–£—Å—Ç–∞—Ä–µ–≤–∞–µ—Ç –≤ –ø–æ–ª—å–∑—É OpenTelemetry.** |
| `awslogs` | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Amazon CloudWatch Logs. **–£—Å—Ç–∞—Ä–µ–≤–∞–µ—Ç –≤ –ø–æ–ª—å–∑—É OpenTelemetry.** |
| `gcplogs` | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Google Cloud Logging. |
| `splunk` | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–æ Splunk. |
| `none` | **–û—Ç–∫–ª—é—á–∞–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ, –∫–æ–≥–¥–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤–∞–∂–Ω–µ–µ –ª–æ–≥–æ–≤. |

!!! example "–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥—Ä–∞–π–≤–µ—Ä–∞"

    **–ì–ª–æ–±–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (–≤ `/etc/docker/daemon.json`):**

    ```json
    {
      "log-driver": "fluentd",
      "log-opts": {
        "fluentd-address": "fluentd.my-domain:24224",
        "mode": "non-blocking",
        "max-buffer-size": "4m"
      }
    }
    ```

!!! success "–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è Fluentd-–¥—Ä–∞–π–≤–µ—Ä–∞"

    –ü–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã –¥–≤–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞:

    - `mode=non-blocking`: –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –±—É–¥–µ—Ç –∂–¥–∞—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–æ—Å—Ç–∞–≤–∫–∏ –ª–æ–≥–∞.
    –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –Ω–æ **–º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –ø–æ—Ç–µ—Ä–µ –ª–æ–≥–æ–≤** –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ `fluentd`.
    - `max-buffer-size`: –£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –±—É—Ñ–µ—Ä–∞ –¥–ª—è –ª–æ–≥–æ–≤.
    –ü–æ–º–æ–≥–∞–µ—Ç —Å–≥–ª–∞–¥–∏—Ç—å –ø–∏–∫–æ–≤—ã–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –∏ –∏–∑–±–µ–∂–∞—Ç—å –ø–æ—Ç–µ—Ä—å –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `non-blocking` —Ä–µ–∂–∏–º–∞.

!!! success "–ë–æ–ª—å—à–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —Å –ø–æ–º–æ—â—å—é –º–µ—Ç–æ–∫"

    –û–ø—Ü–∏—è `tag` ‚Äî —ç—Ç–æ —Ç–æ–ª—å–∫–æ –Ω–∞—á–∞–ª–æ.

    –î–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –≤ –±–æ–ª—å—à–∏—Ö —Å–∏—Å—Ç–µ–º–∞—Ö –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ **–º–µ—Ç–∫–∏ (labels)**, —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∫ –ª–æ–≥–∞–º.

    **–ü—Ä–∏–º–µ—Ä —Å `docker run`:**

    ```bash
    docker run \
      --label com.example.service=frontend \
      --label com.example.environment=production \
      --log-driver=fluentd \
      my-app
    ```

    **–ü—Ä–∏–º–µ—Ä —Å `docker-compose.yml`:**

    ```yaml
    services:
      my-service:
        image: my-app
        labels:
          - "com.example.service=api"
          - "com.example.environment=staging"
        logging:
          driver: "gelf"
          options:
            gelf-address: "udp://1.2.3.4:12201"
    ```

    –≠—Ç–∏ –º–µ—Ç–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞—é—Ç—Å—è –º–Ω–æ–≥–∏–º–∏ –¥—Ä–∞–π–≤–µ—Ä–∞–º–∏ (`fluentd`, `gelf`, `awslogs`) –∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –≤ Kibana, Grafana –∏–ª–∏ Graylog —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏ –ø–æ —Å–µ—Ä–≤–∏—Å—É, –æ–∫—Ä—É–∂–µ–Ω–∏—é –∏–ª–∏ –ª—é–±–æ–π –¥—Ä—É–≥–æ–π –ª–æ–≥–∏—á–µ—Å–∫–æ–π –≥—Ä—É–ø–ø–µ.

---

## üìà –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏

–í —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ –ª–æ–≥–∏ –Ω—É–∂–Ω–æ —Å–æ–±–∏—Ä–∞—Ç—å –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ.

```txt
[ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä ]                             [ Docker Host ]
+----------------------------------+      +-------------------------------------------+
|                                  |      |                                           |
|  +------------+                  |      |                                           |
|  | –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ | -- STDOUT/STDERR |  ->  | Docker Engine --> –î—Ä–∞–π–≤–µ—Ä –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è --+ |
|  +------------+                  |      |                                           |
|                                  |      |                                           |
+----------------------------------+      +-------------------------------------------+
                                                                 |
                                     +---------------------------+---------------------------+
                                     |                           |                           |
                                     v                           v                           v
                              [ json-file ]                 [ syslog ]                  [ fluentd ]
                                     |                           |                           |
                                     v                           v                           v
                             [ –õ–æ–∫–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª ]         [ Syslog —Å–µ—Ä–≤–µ—Ä ]           [ –ê–≥—Ä–µ–≥–∞—Ç–æ—Ä –ª–æ–≥–æ–≤ ]
```

–í–æ—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã:

| –ü–æ–¥—Ö–æ–¥                      | –û–ø–∏—Å–∞–Ω–∏–µ                                                                                                         | –õ—É—á—à–µ –≤—Å–µ–≥–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è                                                              | –°–ª–æ–∂–Ω–æ—Å—Ç—å |
| :-------------------------- | :--------------------------------------------------------------------------------------------------------------- | :------------------------------------------------------------------------------------ | :-------- |
| **STDOUT + –ª–æ–≥-–¥—Ä–∞–π–≤–µ—Ä**    | –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–∏—à–µ—Ç –≤ **stdout**/**stderr**. Docker-–¥–µ–º–æ–Ω –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–ª—å—à–µ —á–µ—Ä–µ–∑ –¥—Ä–∞–π–≤–µ—Ä.                | –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–±–ª–∞—á–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, Kubernetes, –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã. **–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ–¥—Ö–æ–¥.**      | –ù–∏–∑–∫–∞—è    |
| **Sidecar-–∞–≥–µ–Ω—Ç**           | –û—Ç–¥–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä-–∞–≥–µ–Ω—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, Fluent Bit) —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –ø–∞—Ä–µ —Å –æ—Å–Ω–æ–≤–Ω—ã–º, —Å–æ–±–∏—Ä–∞—è –µ–≥–æ –ª–æ–≥–∏.                     | –°–∏—Å—Ç–µ–º—ã, –≥–¥–µ –Ω—É–∂–Ω–∞ –≥–∏–±–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ª–æ–≥–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –∏–ª–∏ –Ω–µ–ª—å–∑—è –º–µ–Ω—è—Ç—å –¥—Ä–∞–π–≤–µ—Ä. | –°—Ä–µ–¥–Ω—è—è   |
| **–õ–æ–≥ –≤ —Ñ–∞–π–ª + `tail`**     | –õ–µ–≥–∞—Å–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–∏—à–µ—Ç –≤ —Ñ–∞–π–ª –Ω–∞ –æ–±—â–µ–º `volume`. –°–∞–π–¥–∫–∞—Ä-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —á–∏—Ç–∞–µ—Ç —ç—Ç–æ—Ç —Ñ–∞–π–ª (`tail -F`) –∏ –≤—ã–≤–æ–¥–∏—Ç –≤ **stdout**. | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å—Ç–∞—Ä—ã—Ö (legacy) –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —É–º–µ—é—Ç –ø–∏—Å–∞—Ç—å –≤ **stdout**.             | –°—Ä–µ–¥–Ω—è—è   |
| **–ü—Ä—è–º–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –∏–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è** | –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **SDK** –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –ª–æ–≥–æ–≤ –Ω–∞–ø—Ä—è–º—É—é –≤ —Å–∏—Å—Ç–µ–º—É –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ (Elastic, Loki).                      | –°–∏—Å—Ç–µ–º—ã, –≥–¥–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –∏ –æ–±–æ–≥–∞—â–µ–Ω–∏–µ–º –ª–æ–≥–æ–≤ –∏–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. | –í—ã—Å–æ–∫–∞—è   |

1.  **–ê–≥–µ–Ω—Ç –Ω–∞ —É—Ä–æ–≤–Ω–µ —Ö–æ—Å—Ç–∞**: –ù–∞ –∫–∞–∂–¥–æ–º Docker-—Ö–æ—Å—Ç–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –æ–¥–∏–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä-–∞–≥–µ–Ω—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, **Fluent Bit** –∏–ª–∏ **Vector**), –∫–æ—Ç–æ—Ä—ã–π —Å–æ–±–∏—Ä–∞–µ—Ç –ª–æ–≥–∏ —Å–æ –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –Ω–∞ —ç—Ç–æ–º —Ö–æ—Å—Ç–µ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏—Ö –¥–∞–ª—å—à–µ.

    –≠—Ç–æ —Å–∞–º—ã–π –ø–æ–ø—É–ª—è—Ä–Ω—ã–π –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π –ø–æ–¥—Ö–æ–¥.

2.  **–ü—Ä–æ—Ü–µ—Å—Å-–ø–æ—Å—Ä–µ–¥–Ω–∏–∫ (Sidecar)**: –í –∫–∞–∂–¥—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (–∏–ª–∏ Pod –≤ Kubernetes) –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤—Ç–æ—Ä–æ–π, –ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä-–∞–≥–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π —á–∏—Ç–∞–µ—Ç –ª–æ–≥–∏ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –ø–µ—Ä–µ—Å—ã–ª–∞–µ—Ç –∏—Ö –≤ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ.

    –≠—Ç–æ –≥–∏–±–∫–∏–π, –Ω–æ —Ä–µ—Å—É—Ä—Å–æ–µ–º–∫–∏–π –ø–æ–¥—Ö–æ–¥.

3.  **–ü—Ä—è–º–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –∏–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**: –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–∞–º–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ª–æ–≥–∏ –≤ —Å–∏—Å—Ç–µ–º—É –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, ELK –∏–ª–∏ Splunk) —á–µ—Ä–µ–∑ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É.

    –≠—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥ —É—Å–ª–æ–∂–Ω—è–µ—Ç –∫–æ–¥ –∏ –ø—Ä–∏–≤—è–∑—ã–≤–∞–µ—Ç –µ–≥–æ –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è.

    !!! warning "–ù–∞—Ä—É—à–µ–Ω–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø–∞ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏"

        –ü–æ–¥—Ö–æ–¥ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∏–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è **–Ω–∞—Ä—É—à–∞–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏**, —Ç–∞–∫ –∫–∞–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞—á–∏–Ω–∞–µ—Ç –∑–∞–Ω–∏–º–∞—Ç—å—Å—è –≤–æ–ø—Ä–æ—Å–∞–º–∏ –¥–æ—Å—Ç–∞–≤–∫–∏ –ª–æ–≥–æ–≤.

        –≠—Ç–æ —É—Å–ª–æ–∂–Ω—è–µ—Ç CI/CD (—Ç—Ä–µ–±—É–µ—Ç—Å—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π) –∏ –ø—Ä–∏–≤—è–∑—ã–≤–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è.

### üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–æ–≤

!!! warning "Fluentd —É—Å—Ç–∞—Ä–µ–≤–∞–µ—Ç"

    **Fluentd** –±—ã–ª –∑–æ–ª–æ—Ç—ã–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–º, –Ω–æ —Å–µ–π—á–∞—Å –∞–∫—Ç–∏–≤–Ω–æ –≤—ã—Ç–µ—Å–Ω—è–µ—Ç—Å—è —Å–≤–æ–∏–º –ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–º –∏ –±–æ–ª–µ–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–º –ø—Ä–µ–µ–º–Ω–∏–∫–æ–º ‚Äî **Fluent Bit**.

    –î–ª—è –Ω–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Fluent Bit.

| –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç | –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å | –ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ | –ì–∏–±–∫–æ—Å—Ç—å | –ü—Ä–æ—Å—Ç–æ—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è | –û—Å–Ω–æ–≤–Ω–æ–π —Å—Ü–µ–Ω–∞—Ä–∏–π |
| :--- | :--- | :--- | :--- | :--- | :--- |
| **Fluent Bit** | –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è (C) | –û—á–µ–Ω—å –Ω–∏–∑–∫–æ–µ | –°—Ä–µ–¥–Ω—è—è | –í—ã—Å–æ–∫–∞—è | –°–±–æ—Ä –ª–æ–≥–æ–≤ –Ω–∞ edge-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö, –≤—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö –∏ –∫–∞–∫ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ñ–æ—Ä–≤–∞—Ä–¥–µ—Ä –≤ Kubernetes. |
| **Vector** | –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è (Rust) | –ù–∏–∑–∫–æ–µ | –í—ã—Å–æ–∫–∞—è | –°—Ä–µ–¥–Ω—è—è | –í—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∏ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è –ª–æ–≥–æ–≤ –∏ –º–µ—Ç—Ä–∏–∫. |
| **Logstash** | –°—Ä–µ–¥–Ω—è—è (JVM) | –í—ã—Å–æ–∫–æ–µ | –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è | –ù–∏–∑–∫–∞—è | –°–ª–æ–∂–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏ –æ–±–æ–≥–∞—â–µ–Ω–∏–µ –ª–æ–≥–æ–≤, –∫–æ–≥–¥–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –≥–ª–∞–≤–Ω—ã–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º. |

---

## üìù –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–æ–≤

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤ **JSON**-—Ñ–æ—Ä–º–∞—Ç–µ, —á—Ç–æ–±—ã —Å–∏—Å—Ç–µ–º—ã –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –º–æ–≥–ª–∏ –ø–∞—Ä—Å–∏—Ç—å –ª–æ–≥–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±–µ–∑ —Å–ª–æ–∂–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª.

!!! example "–ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ª–æ–≥–∞"

    ```json
    {
      "level": "info",
      "msg": "User created",
      "user_id": 123,
      "ts": "2025-08-01T10:00:00Z"
    }
    ```

    Fluentd, Logstash –∏ –¥—Ä—É–≥–∏–µ –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä—ã —É–º–µ—é—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–∞—Ä—Å–∏—Ç—å —Ç–∞–∫–∏–µ –ª–æ–≥–∏, –ø—Ä–µ–≤—Ä–∞—â–∞—è –∏—Ö –≤ —Ñ–∏–ª—å—Ç—Ä—É–µ–º—ã–µ –ø–æ–ª—è –≤ Kibana –∏–ª–∏ Grafana Loki.

    –≠—Ç–æ —Ç–∞–∫–∂–µ —É–ø—Ä–æ—â–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É –º–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω—ã—Ö –ª–æ–≥–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, **stack traces**).

---

## üìú –ú–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω—ã–µ –ª–æ–≥–∏

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –Ω–∞–ø—Ä–∏–º–µ—Ä Java, –≤—ã–≤–æ–¥—è—Ç **stack trace** –≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫.

–ë–µ–∑ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ª–æ–≥-–∞–≥—Ä–µ–≥–∞—Ç–æ—Ä—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, Fluent Bit) —Ä–∞–∑–æ–±—å—é—Ç —Ç–∞–∫–æ–π –ª–æ–≥ –Ω–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π.

!!! example "–ü—Ä–∏–º–µ—Ä –¥–ª—è Fluent Bit"

    ```ini
    [MULTILINE_PARSER]
        name          java
        type          regex
        flush_timeout 1000
        rule          "start_state" "^[ERROR]" "cont"
        rule          "cont"        "^\s+"       "cont"
    ```

---

## üîÑ –†–æ—Ç–∞—Ü–∏—è –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ

–ï—Å–ª–∏ –≤—ã –≤—Å–µ –∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ `json-file` –¥—Ä–∞–π–≤–µ—Ä, **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ** –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ —Ä–æ—Ç–∞—Ü–∏—é –ª–æ–≥–æ–≤.

!!! success "–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–æ—Ç–∞—Ü–∏–∏"

    **–ì–ª–æ–±–∞–ª—å–Ω–æ (–≤ `/etc/docker/daemon.json`):**

    ```json
    {
      "log-driver": "json-file",
      "log-opts": {
        "max-size": "10m",
        "max-file": "3"
      }
    }
    ```

    **–î–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:**

    ```bash
    docker run --log-opt max-size=5m --log-opt max-file=2 my-app
    ```

!!! warning "–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ñ–∞–π–ª –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞"

    –ï—Å–ª–∏ —É –≤–∞—Å –ª–µ–≥–∞—Å–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ —É–º–µ–µ—Ç –ø–∏—Å–∞—Ç—å –ª–æ–≥–∏ —Ç–æ–ª—å–∫–æ –≤ —Ñ–∞–π–ª, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ **—Å–∞–π–¥–∫–∞—Ä-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä**:

    1.  –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–∏—à–µ—Ç –ª–æ–≥–∏ –≤ —Ñ–∞–π–ª –≤–Ω—É—Ç—Ä–∏ –æ–±—â–µ–≥–æ `volume`.
    2.  –í—Ç–æ—Ä–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤ —Ç–æ–π –∂–µ –≥—Ä—É–ø–ø–µ (`--volumes-from` –∏–ª–∏ Pod) –∑–∞–ø—É—Å–∫–∞–µ—Ç `tail -F` –Ω–∞ —ç—Ç–æ—Ç —Ñ–∞–π–ª –∏ –≤—ã–≤–æ–¥–∏—Ç –µ–≥–æ –≤ **STDOUT**.

---

## üîî –°–æ–±—ã—Ç–∏—è vs. –õ–æ–≥–∏

–ù–µ –ø—É—Ç–∞–π—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å —Å–æ–±—ã—Ç–∏—è–º–∏ Docker-–¥–µ–º–æ–Ω–∞.

- `docker logs`: –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—ã–≤–æ–¥ (**STDOUT**/**STDERR**) **–≤–Ω—É—Ç—Ä–∏** –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.
- `docker events`: –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å **—Å–∞–º–∏–º–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏** (—Å–æ–∑–¥–∞–Ω–∏–µ, –∑–∞–ø—É—Å–∫, –æ—Å—Ç–∞–Ω–æ–≤–∫–∞, —É–¥–∞–ª–µ–Ω–∏–µ).

–≠—Ç–æ –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Å–∞–º–æ–≥–æ Docker-—Ö–æ—Å—Ç–∞.

!!! example "–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π"

    ```bash
    docker events --filter 'type=container'
    ```

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å

–õ–æ–≥–∏ ‚Äî —ç—Ç–æ —Ç–æ, —á—Ç–æ *–ø—Ä–æ–∏–∑–æ—à–ª–æ*.

M–µ—Ç—Ä–∏–∫–∏ ‚Äî —ç—Ç–æ —Ç–æ, —á—Ç–æ *–ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å–µ–π—á–∞—Å*.

- **`docker stats`**: –ë—ã—Å—Ç—Ä–∞—è –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è CPU, –ø–∞–º—è—Ç–∏, —Å–µ—Ç–∏ –∏ I/O –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏. –ï—Å–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –º–Ω–æ–≥–æ, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `docker stats <container>` –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –º–µ—Ç—Ä–∏–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.
- **cAdvisor (Container Advisor)**: –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –æ—Ç Google, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–±–∏—Ä–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤.
- **Prometheus**: –î–µ-—Ñ–∞–∫—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç –¥–ª—è —Å–±–æ—Ä–∞ –∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä—è–¥–æ–≤ (–º–µ—Ç—Ä–∏–∫).
Prometheus "—Å–∫—Ä–∞–ø–∏—Ç" (—Å–æ–±–∏—Ä–∞–µ—Ç) –º–µ—Ç—Ä–∏–∫–∏ —Å cAdvisor –∏–ª–∏ –Ω–∞–ø—Ä—è–º—É—é —Å Docker-–¥–µ–º–æ–Ω–∞ –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å—Ç—Ä–æ–∏—Ç—å –Ω–∞ –∏—Ö –æ—Å–Ω–æ–≤–µ –¥–∞—à–±–æ—Ä–¥—ã (–≤ Grafana) –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –∞–ª–µ—Ä—Ç—ã.

!!! warning "cAdvisor —É—Å—Ç–∞—Ä–µ–≤–∞–µ—Ç"

    **cAdvisor** –ø–æ–ª–µ–∑–µ–Ω –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫ –ø–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º, –Ω–æ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ö–æ—Å—Ç–∞ –≤ —Ü–µ–ª–æ–º —Å–µ–π—á–∞—Å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–º —è–≤–ª—è–µ—Ç—Å—è **Node Exporter**.

    –û–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ –æ —Å–∞–º–æ–º —Ö–æ—Å—Ç–µ (CPU, RAM, –¥–∏—Å–∫, —Å–µ—Ç—å), –∫–æ—Ç–æ—Ä—ã–µ cAdvisor –Ω–µ –ø–æ–∫—Ä—ã–≤–∞–µ—Ç.

    –í Kubernetes-—Å—Ä–µ–¥–∞—Ö cAdvisor –≤—Å—Ç—Ä–æ–µ–Ω –≤ `kubelet`, –Ω–æ –¥–ª—è Docker-—Ö–æ—Å—Ç–æ–≤ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–≤—è–∑–∫—É **Node Exporter** (–º–µ—Ç—Ä–∏–∫–∏ —Ö–æ—Å—Ç–∞) –∏ –º–µ—Ç—Ä–∏–∫ —Å–∞–º–æ–≥–æ Docker-–¥–µ–º–æ–Ω–∞.

### üö® –ê–ª–µ—Ä—Ç—ã –¥–ª—è –ª–æ–≥–æ–≤

–ü—Ä–∞–≤–∏–ª–∞ –¥–ª—è Alertmanager –ø–æ–∑–≤–æ–ª—è—é—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –æ–ø–æ–≤–µ—â–µ–Ω–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–æ–º–∞–ª–∏–π –≤ –ª–æ–≥–∞—Ö. –ù–∞–ø—Ä–∏–º–µ—Ä, –º–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –≤—Å–ø–ª–µ—Å–∫ –æ—à–∏–±–æ–∫.

```yaml
groups:
- name: logs.rules
  rules:
  - alert: HighErrorRate
    expr: rate(container_logs{stream="stderr"}[5m]) > 0.1
    for: 1m
    labels:
      severity: critical
    annotations:
      summary: "High error rate in container {{ $labels.container_name }}"
      description: "The container {{ $labels.container_name }} on {{ $labels.instance }} is logging errors to stderr at a high rate."
```

!!! success "–î–æ—Å—Ç–∞–≤–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤ –∫—É–¥–∞ —É–≥–æ–¥–Ω–æ"

    Alertmanager –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ –¥–µ—Å—è—Ç–∫–∏ —Å–∏—Å—Ç–µ–º, –≤–∫–ª—é—á–∞—è:

    - **–ú–µ—Å—Å–µ–Ω–¥–∂–µ—Ä—ã**: Slack, Telegram, Microsoft Teams.
    - **–°–∏—Å—Ç–µ–º—ã –∏–Ω—Ü–∏–¥–µ–Ω—Ç-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç–∞**: PagerDuty, Opsgenie.
    - **Email** –∏ **Webhook** –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å —á–µ–º —É–≥–æ–¥–Ω–æ.

### üé® –î–∞—à–±–æ—Ä–¥—ã Grafana

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ª–æ–≥–æ–≤ —Å Grafana (—á–µ—Ä–µ–∑ Loki –∏–ª–∏ Elasticsearch/OpenSearch) –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –¥–∞—à–±–æ—Ä–¥—ã, –∫–æ—Ç–æ—Ä—ã–µ –∫–æ—Ä—Ä–µ–ª–∏—Ä—É—é—Ç –º–µ—Ç—Ä–∏–∫–∏ –∏ –ª–æ–≥–∏.

–í—ã –º–æ–∂–µ—Ç–µ:

- –í–∏–∑—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —á–∞—Å—Ç–æ—Ç—É –æ—à–∏–±–æ–∫ (–∏–∑ –ª–æ–≥–æ–≤) —Ä—è–¥–æ–º —Å –≥—Ä–∞—Ñ–∏–∫–æ–º CPU (–∏–∑ –º–µ—Ç—Ä–∏–∫).
- –°–æ–∑–¥–∞–≤–∞—Ç—å –ø–∞–Ω–µ–ª–∏ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ª–æ–≥–æ–≤ –ø–æ —Å–µ—Ä–≤–∏—Å—É, –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É –∏–ª–∏ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º.
- –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –æ—Ç –≥—Ä–∞—Ñ–∏–∫–∞ –º–µ—Ç—Ä–∏–∫ –Ω–∞–ø—Ä—è–º—É—é –∫ –ª–æ–≥–∞–º –∑–∞ —Ç–æ—Ç –∂–µ –ø–µ—Ä–∏–æ–¥ –≤—Ä–µ–º–µ–Ω–∏.

### üî≠ OpenTelemetry

**OpenTelemetry** ‚Äî —ç—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç –¥–ª—è —Å–±–æ—Ä–∞ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏ (–ª–æ–≥–æ–≤, –º–µ—Ç—Ä–∏–∫ –∏ —Ç—Ä–µ–π—Å–æ–≤).

–í—ã –º–æ–∂–µ—Ç–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –ª–æ–≥–æ–≤ –≤ OpenTelemetry Collector, –∫–æ—Ç–æ—Ä—ã–π –∑–∞—Ç–µ–º –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç –∏—Ö –≤ –ª—é–±—É—é —Å–∏—Å—Ç–µ–º—É –±—ç–∫–µ–Ω–¥–∞ (Jaeger, Prometheus, Loki –∏ —Ç.–¥.).

–≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤–µ–Ω–¥–æ—Ä-–Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π –ø–æ–¥—Ö–æ–¥ –∫ –Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç–∏.

---

## üèÜ –û–∫—Ä—É–∂–µ–Ω–∏—è

| –°—Ä–µ–¥–∞ | –ü–æ–¥—Ö–æ–¥ |
| :--- | :--- |
| **Local/dev** | `json-file` —Å —Ä–æ—Ç–∞—Ü–∏–µ–π, `docker logs`, `docker compose logs`, `stdout`. |
| **Staging** | –ê–≥–µ–Ω—Ç **Fluent Bit** –∏–ª–∏ **Vector** –Ω–∞ —Ö–æ—Å—Ç–µ, —Å–æ–±–∏—Ä–∞—é—â–∏–π –ª–æ–≥–∏ —Å–æ –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `tag` –¥–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –ª–æ–≥–æ–≤ –ø–æ —Å–µ—Ä–≤–∏—Å–∞–º. |
| **Production** | **OpenTelemetry Collector** + **Fluent Bit** –Ω–∞ –∫–∞–∂–¥–æ–º —É–∑–ª–µ. –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (Loki, OpenSearch, ClickHouse). –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –æ–±–æ–≥–∞—â–µ–Ω–∏–µ –ª–æ–≥–æ–≤ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ (—Ç–µ–≥–∏, –ª–µ–π–±–ª—ã). |

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ª–æ–≥–æ–≤

- **–ù–µ –ª–æ–≥–∏—Ä—É–π—Ç–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**: –ø–∞—Ä–æ–ª–∏, —Ç–æ–∫–µ–Ω—ã, –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (**PII**).
- **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∏–ª—å—Ç—Ä—ã**: –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–π—Ç–µ –≤ Logstash –∏–ª–∏ Fluent Bit –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è –º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏—è –∏–ª–∏ —É–¥–∞–ª–µ–Ω–∏—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.
- **–ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞**: –•—Ä–∞–Ω–∏—Ç–µ –ª–æ–≥–∏ –≤ —Å–∏—Å—Ç–µ–º–∞—Ö —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π **RBAC** (–Ω–∞–ø—Ä–∏–º–µ—Ä, Elasticsearch —Å Security –ø–ª–∞–≥–∏–Ω–æ–º).

---

## üõ†Ô∏è –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

!!! danger "–ü—Ä–æ–±–ª–µ–º–∞: –ü–æ—Ç–µ—Ä—è –ª–æ–≥–æ–≤ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ö"

    **–°–∏–º–ø—Ç–æ–º—ã:** –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–µ–≥–æ —Ä–µ–∂–∏–º–∞ (`non-blocking`) –∏ –±—ã—Å—Ç—Ä–æ–º –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –ª–æ–≥–∏ –∏–∑ –±—É—Ñ–µ—Ä–∞ –º–æ–≥—É—Ç –±—ã—Ç—å —É—Ç–µ—Ä—è–Ω—ã.

    **–†–µ—à–µ–Ω–∏–µ:**

    - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–ª–æ–∫–∏—Ä—É—é—â–∏–π —Ä–µ–∂–∏–º (`mode=blocking`), –µ—Å–ª–∏ –¥–æ—Å—Ç–∞–≤–∫–∞ –∫–∞–∂–¥–æ–≥–æ –ª–æ–≥–∞ –∫—Ä–∏—Ç–∏—á–Ω–∞.
    - –£–≤–µ–ª–∏—á—å—Ç–µ —Ä–∞–∑–º–µ—Ä –±—É—Ñ–µ—Ä–∞ (`max-buffer-size`), —á—Ç–æ–±—ã –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Ç–µ—Ä–∏.
    - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ `storage.path` –¥–ª—è Fluent Bit, —á—Ç–æ–±—ã –æ–Ω –º–æ–≥ –±—É—Ñ–µ—Ä–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏ –Ω–∞ –¥–∏—Å–∫–µ.

!!! danger "–ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ª–æ–≥–æ–≤"

    **–°–∏–º–ø—Ç–æ–º—ã:** –ê–≥—Ä–µ–≥–∞—Ç–æ—Ä –Ω–µ –º–æ–∂–µ—Ç —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å JSON-–ª–æ–≥–∏, –µ—Å–ª–∏ –≤ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ –æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ JSON-–æ–±—ä–µ–∫—Ç–æ–≤ –∏–ª–∏ –ª–∏—à–Ω–∏–π —Ç–µ–∫—Å—Ç.

    **–†–µ—à–µ–Ω–∏–µ:**

    - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–∏—à–µ—Ç **–æ–¥–∏–Ω** JSON-–æ–±—ä–µ–∫—Ç –Ω–∞ **–æ–¥–Ω—É** —Å—Ç—Ä–æ–∫—É.
    - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ –ª–æ–≥–∞—Ö –Ω–µ—Ç –ª–∏—à–Ω–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤ –¥–æ –∏–ª–∏ –ø–æ—Å–ª–µ JSON.
    - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –≤—Ä–æ–¥–µ `jq` –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ JSON.

!!! danger "–ü—Ä–æ–±–ª–µ–º–∞: –ó–∞–¥–µ—Ä–∂–∫–∏ –¥–æ—Å—Ç–∞–≤–∫–∏ –∏ –æ—Ç–±—Ä–æ—Å –ª–æ–≥–æ–≤"

    **–°–∏–º–ø—Ç–æ–º—ã:** –õ–æ–≥–∏ –ø—Ä–∏—Ö–æ–¥—è—Ç —Å –±–æ–ª—å—à–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π –∏–ª–∏ –æ—Ç–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è –∏–∑-–∑–∞ –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è –∫–≤–æ—Ç –≤ —Å–∏—Å—Ç–µ–º–µ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Elasticsearch –∏–ª–∏ Loki).

    **–†–µ—à–µ–Ω–∏–µ:**

    - **–û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –∞–≥–µ–Ω—Ç–∞:** –£–≤–µ–ª–∏—á—å—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ `workers` –≤ Fluent Bit –∏–ª–∏ Logstash.
    - **–£–º–µ–Ω—å—à–∏—Ç–µ –æ–±—ä–µ–º:** –§–∏–ª—å—Ç—Ä—É–π—Ç–µ –∏–ª–∏ —Å–µ–º–ø–ª–∏—Ä—É–π—Ç–µ –º–µ–Ω–µ–µ –≤–∞–∂–Ω—ã–µ –ª–æ–≥–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ –∞–≥–µ–Ω—Ç–∞.
    - **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–π—Ç–µ –±—ç–∫–µ–Ω–¥:** –£–≤–µ–ª–∏—á—å—Ç–µ —Ä–µ—Å—É—Ä—Å—ã –≤–∞—à–µ–π —Å–∏—Å—Ç–µ–º—ã —Ö—Ä–∞–Ω–µ–Ω–∏—è –ª–æ–≥–æ–≤.

---

## üóÑÔ∏è –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã

### ü™µ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

!!! abstract "–°—Ç–µ–∫"

    - **Identidock**: –ü—Ä–∏–º–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –≥–µ–Ω–µ—Ä–∏—Ä—É—é—â–µ–≥–æ –ª–æ–≥–∏.
    - **Docker (`json-file`)**: –ü–∏—à–µ—Ç **STDOUT**/**STDERR** –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –≤ `.log`-—Ñ–∞–π–ª—ã.
    - **Fluent Bit**: –ê–≥–µ–Ω—Ç –Ω–∞ —Ö–æ—Å—Ç–µ, —á–∏—Ç–∞–µ—Ç –ª–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏—Ö.
    - **OpenTelemetry Collector**: –ü–æ–ª—É—á–∞–µ—Ç –ª–æ–≥–∏ –ø–æ **OTLP** –∏ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –∏—Ö –≤ –±—ç–∫–µ–Ω–¥—ã.
    - **OpenSearch**: –•—Ä–∞–Ω–∏—Ç –∏ –∏–Ω–¥–µ–∫—Å–∏—Ä—É–µ—Ç –ª–æ–≥–∏.
    - **OpenSearch Dashboards**: –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –ª–æ–≥–æ–≤.

!!! info "–°—Ö–µ–º–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è"

    ```txt

    [ Identidock (App) ]
             ‚îÇ
             ‚ñº
      STDOUT / STDERR
             ‚îÇ
             ‚ñº
    [ Docker log driver: json-file ]
             ‚îÇ
             ‚ñº
    [ Fluent Bit (–∞–≥–µ–Ω—Ç –Ω–∞ —Ö–æ—Å—Ç–µ) ]
       ‚îî‚îÄ input: tail /var/lib/docker/containers/*/*.log
       ‚îî‚îÄ –ø–∞—Ä—Å–∏–Ω–≥, –æ–±–æ–≥–∞—â–µ–Ω–∏–µ (labels, env, etc.)
       ‚îî‚îÄ output: OTLP (gRPC / HTTP)
             ‚îÇ
             ‚ñº
    [ OpenTelemetry Collector ]
       ‚îî‚îÄ receiver: otlp
       ‚îî‚îÄ processor: (batch, resource, etc.)
       ‚îî‚îÄ exporter: OpenSearch
             ‚îÇ
             ‚ñº
    [ OpenSearch ]
             ‚îÇ
             ‚ñº
    [ OpenSearch Dashboards ]
    ```

    –ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é (–±–µ–∑ OTEL Collector):

    ```txt
    [ Fluent Bit ]
       ‚îî‚îÄ output: opensearch
             ‚ñº
    [ OpenSearch ]
    ```

!!! example "docker-compose.yml"

    ```yaml
    version: "3.7"
    services:
      otel-collector:
        image: otel/opentelemetry-collector-contrib:0.87.0
        volumes:
          - ./otel-collector-config.yml:/etc/otelcol-contrib/config.yaml
        ports:
          - "4317:4317" # OTLP gRPC

      opensearch:
        image: opensearchproject/opensearch:2.11.1
        environment:
          - discovery.type=single-node
          - "OPENSEARCH_JAVA_OPTS=-Xms512m -Xmx512m"
        ports:
          - "9200:9200"
        volumes:
          - opensearch-data:/usr/share/opensearch/data

      opensearch-dashboards:
        image: opensearchproject/opensearch-dashboards:2.11.1
        ports:
          - "5601:5601"
        depends_on:
          - opensearch

      fluent-bit:
        image: cr.fluentbit.io/fluent/fluent-bit:3.0.3
        volumes:
          - ./fluent-bit.conf:/fluent-bit/etc/fluent-bit.conf:ro
          - /var/lib/docker/containers:/var/lib/docker/containers:ro
          - /var/log:/var/log:rw
        depends_on:
          - otel-collector

      identidock:
        image: amouat/identidock:1.0
        logging:
          driver: "json-file"
        depends_on:
          - fluent-bit

    volumes:
      opensearch-data:
    ```

!!! example "fluent-bit.conf"

    ```ini
    [SERVICE]
        Flush        5
        Daemon       Off
        Log_Level    info

    [INPUT]
        Name              tail
        Path              /var/lib/docker/containers/*/*.log
        Parser            docker
        Docker_Mode       On
        Tag               container.*
        Refresh_Interval  10

    [OUTPUT]
        Name              otlp
        Match             container.*
        Host              otel-collector
        Port              4317
        Retry_Limit       False
    ```
!!! success "–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –¥–ª—è OpenSearch >= 2.x"

    –í–º–µ—Å—Ç–æ `logstash_format` –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `opensearch_data_stream` –≤ Otel Collector –∏–ª–∏ Fluent Bit, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∞—Ç—å –Ω–∞—Ç–∏–≤–Ω—ã–µ data streams –∏ –∏–∑–±–µ–≥–∞—Ç—å legacy-—Ñ–æ—Ä–º–∞—Ç–æ–≤.

### üñ•Ô∏è –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

!!! abstract "–°—Ç–µ–∫"

    - **VictoriaMetrics**: –õ–µ–≥–∫–æ–≤–µ—Å–Ω–∞—è time-series –±–∞–∑–∞, –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ Prometheus.
    - **Node Exporter**: –ú–µ—Ç—Ä–∏–∫–∏ —Ö–æ—Å—Ç–∞.
    - **Grafana**: –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –¥–∞—à–±–æ—Ä–¥–æ–≤.

!!! info "–°—Ö–µ–º–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è"

    ```txt
    [ Docker Host ]
           ‚îÇ
           ‚ñº
    [ Node Exporter ]
           ‚îÇ
           ‚ñº
    [ VictoriaMetrics ]
           ‚îÇ
           ‚ñº
    [ Grafana ]
    ```

!!! example "docker-compose.yml"

    ```yaml
    version: '3.7'
    services:
      victoria-metrics:
        image: victoriametrics/victoria-metrics:v1.93.5
        ports:
          - "8428:8428"
        volumes:
          - vm-data:/victoria-metrics-data
          - ./prometheus.yml:/etc/prometheus/prometheus.yml

      node-exporter:
        image: prom/node-exporter:v1.7.0
        volumes:
          - /proc:/host/proc:ro
          - /sys:/host/sys:ro
          - /:/rootfs:ro
        command:
          - '--path.procfs=/host/proc'
          - '--path.sysfs=/host/sys'
          - '--path.rootfs=/rootfs'
          - '--collector.filesystem.mount-points-exclude=^/(sys|proc|dev|host|etc)($|/)'
        ports:
          - "9100:9100"

      grafana:
        image: grafana/grafana:10.2.2
        ports:
          - "3000:3000"
        depends_on:
          - victoria-metrics

    volumes:
      vm-data:
    ```

!!! example "prometheus.yml"

    ```yaml
    global:
      scrape_interval: 15s

    scrape_configs:
      - job_name: 'node-exporter'
        static_configs:
          - targets: ['node-exporter:9100']
    ```
