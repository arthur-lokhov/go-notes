---
title: BuildKit
---

# ‚öôÔ∏è BuildKit

!!! question "–ß—Ç–æ —Ç–∞–∫–æ–µ BuildKit"

    **BuildKit** ‚Äî —ç—Ç–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –¥–≤–∏–∂–æ–∫ –¥–ª—è —Å–±–æ—Ä–∫–∏ Docker-–æ–±—Ä–∞–∑–æ–≤, —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π –∫–æ–º–∞–Ω–¥–æ–π **Moby Project** –∫–∞–∫ –∑–∞–º–µ–Ω–∞ —É—Å—Ç–∞—Ä–µ–≤—à–µ–≥–æ `legacy builder`, –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ –≤ Docker –¥–æ –≤–µ—Ä—Å–∏–∏ 18.09.

    –û–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç:

    - –≤—ã—Å–æ–∫—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å,
    - —É–ª—É—á—à–µ–Ω–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ,
    - –ø–æ–¥–¥–µ—Ä–∂–∫—É —Å–µ–∫—Ä–µ—Ç–æ–≤,
    - –±–µ–∑–æ–ø–∞—Å–Ω—É—é —Ä–∞–±–æ—Ç—É —Å SSH,
    - –º—É–ª—å—Ç–∏–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã–µ —Å–±–æ—Ä–∫–∏.

---

## üöÄ –ü–æ—á–µ–º—É BuildKit –ª—É—á—à–µ

| –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å | Legacy Builder | BuildKit |
| :--- | :--- | :--- |
| –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ —Å—Ç–∞–¥–∏–∏ —Å–±–æ—Ä–∫–∏ | ‚ùå | ‚úÖ |
| –ì—Ä–∞–Ω—É–ª—è—Ä–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (`RUN`, `COPY`) | ‚ùå (—Ç–æ–ª—å–∫–æ —Å–ª–æ–π) | ‚úÖ (–ø–æ–æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ) |
| –ú—É–ª—å—Ç–∏–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–∞—è —Å–±–æ—Ä–∫–∞ | ‚ùå | ‚úÖ |
| –°–µ–∫—Ä–µ—Ç—ã –∏ SSH –≤–æ –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏ | ‚ùå | ‚úÖ |
| –ö—ç—à-–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ | ‚ùå | ‚úÖ |
| –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—ã–≤–æ–¥–æ–º (–≤ `tar`, `oci`) | ‚ùå | ‚úÖ |
| –û—Ç–ª–∞–¥–∫–∞ —Å–±–æ—Ä–∫–∏ (`progress`, `trace`) | ‚ùå | ‚úÖ |
| –†–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ –∏ —É–¥–∞–ª—ë–Ω–Ω—ã–µ builder'—ã | ‚ùå | ‚úÖ |

## üß¨ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ BuildKit

!!! info "–ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã"

    BuildKit –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **DAG (–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∞—Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–π –≥—Ä–∞—Ñ)** –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Å—Ç–∞–¥–∏–π —Å–±–æ—Ä–∫–∏.
    –û–Ω –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–µ–∂–¥—É —à–∞–≥–∞–º–∏ Dockerfile –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ —à–∞–≥–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ.

    –ö—ç—à —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞, –∞ –Ω–µ —Å–ª–æ—è.
    –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –¥–∞–∂–µ –æ–¥–Ω–∞ –∏–∑–º–µ–Ω—ë–Ω–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ `RUN` –Ω–µ –∑–∞—Ç—Ä–æ–Ω–µ—Ç —Å–æ—Å–µ–¥–Ω–∏–µ, –µ—Å–ª–∏ –æ–Ω–∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã.

    –í –æ—Å–Ω–æ–≤–µ BuildKit ‚Äî **LLB (Low-Level Build)** ‚Äî –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ Dockerfile.
    –≠—Ç–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —è–∑—ã–∫ –æ–ø–∏—Å–∞–Ω–∏—è —Å–±–æ—Ä–∫–∏, –∫–æ—Ç–æ—Ä—ã–π BuildKit –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≥—Ä–∞—Ñ–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.

!!! example "‚öôÔ∏è –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã BuildKit"

    ```txt
    [docker CLI / docker buildx]
               ‚Üì  (gRPC API)
           [buildkitd]  ‚Äî‚Äî‚Äî‚Äî DAG & LLB ‚Äî‚Äî‚Äî‚Äî
             ‚Üì          (LLB execution & cache)
       [solver] ‚Äî‚Äî‚Äî‚Üí [cache manager]
             ‚Üì
       [frontend]  (–ø–∞—Ä—Å–∏—Ç Dockerfile, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç LLB)
             ‚Üì
       [workers]  (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—ã–µ —Ä–∞–Ω—Ç–∞–π–º—ã –∏–ª–∏ rootless)
             ‚Üì
       [executor] (–≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥: RUN, COPY –∏ —Ç.–¥.)
             ‚Üì
       [snapshotter] (—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–ª–æ–∏ –∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã)
             ‚Üì
          –§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ / –û–±—Ä–∞–∑—ã
    ```

    1.  **docker CLI / docker buildx** ‚Äî –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–±–æ—Ä–∫–∏. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç gRPC-–∑–∞–ø—Ä–æ—Å—ã –≤ buildkitd.
    2.  **buildkitd** ‚Äî –¥–µ–º–æ–Ω BuildKit, –∫–æ—Ç–æ—Ä—ã–π —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å–±–æ—Ä–∫–∞–º–∏.
    3.  **frontend** ‚Äî –ø–∞—Ä—Å–µ—Ä Dockerfile (–∏–ª–∏ –¥—Ä—É–≥–∏—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤), –∫–æ—Ç–æ—Ä—ã–π –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç DAG –≤ –≤–∏–¥–µ LLB (–Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤–æ–≥–æ —è–∑—ã–∫–∞ —Å–±–æ—Ä–∫–∏).
    4.  **solver** ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç DAG, –∏—â–µ—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω —Å–±–æ—Ä–∫–∏ —Å —É—á—ë—Ç–æ–º –∫—ç—à–∞.
    5.  **cache manager** ‚Äî –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤.
    6.  **workers** ‚Äî –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –µ–¥–∏–Ω–∏—Ü—ã, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–ø—É—Å–∫–∞—é—Ç –∫–æ–º–∞–Ω–¥—ã, –º–æ–≥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö –∏–ª–∏ –Ω–∞ —Ö–æ—Å—Ç–µ.
    7.  **executor** ‚Äî –∑–∞–ø—É—Å–∫–∞–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –≤ —Ä–∞–º–∫–∞—Ö —Å—Ç–∞–¥–∏–∏ —Å–±–æ—Ä–∫–∏.
    8.  **snapshotter** ‚Äî —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞ (—Å–ª–æ–∏) –≤ –∫—ç—à –∏ —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É.

---

## üõ†Ô∏è –ê–∫—Ç–∏–≤–∞—Ü–∏—è BuildKit

!!! tip "–°–ø–æ—Å–æ–±—ã –∞–∫—Ç–∏–≤–∞—Ü–∏–∏"

    –ß—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–æ–≤—ã–π –¥–≤–∏–∂–æ–∫ —Å–±–æ—Ä–∫–∏:

    - **–î–ª—è `docker build`**: `DOCKER_BUILDKIT=1`.
    - **–î–ª—è `docker compose`**: `COMPOSE_DOCKER_CLI_BUILD=1`.

!!! success "–í–∫–ª—é—á–∏—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é"

    BuildKit —Ç–∞–∫–∂–µ –º–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å —á–µ—Ä–µ–∑ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Docker CLI.

    ```json
    {
      "features": {
        "buildkit": true
      }
    }
    ```

    –í–∫–ª—é—á–∏—Ç–µ BuildKit –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Docker, —á—Ç–æ–±—ã –≤—Å–µ `docker build` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –¥–≤–∏–∂–æ–∫.

---

## üß© `buildctl`

!!! note "–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π CLI"

    –•–æ—Ç—è —á–∞—â–µ –≤—Å–µ–≥–æ BuildKit –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ `docker buildx`, –µ–≥–æ –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–π –¥–µ–º–æ–Ω –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å —á–µ—Ä–µ–∑ gRPC API –∏–ª–∏ `buildctl`.

!!! example "‚öôÔ∏è –ü—Ä–∏–º–µ—Ä —Å–±–æ—Ä–∫–∏ –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ buildctl"

    ```bash
    buildctl build \
      --frontend=dockerfile.v0 \
      --local context=. \
      --local dockerfile=. \
      --output type=docker,name=myapp | docker load
    ```

---

## üõ†Ô∏è Docker Buildx

!!! question "–ß—Ç–æ —Ç–∞–∫–æ–µ `docker-buildx`"

    **`docker-buildx`** ‚Äî —ç—Ç–æ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π CLI-–ø–ª–∞–≥–∏–Ω Docker, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—â–∏–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º —Å–±–æ—Ä–æ—á–Ω–æ–≥–æ –¥–≤–∏–∂–∫–∞ **BuildKit**.

    –û–Ω –∑–∞–º–µ–Ω—è–µ—Ç —É—Å—Ç–∞—Ä–µ–≤—à—É—é –∫–æ–º–∞–Ω–¥—É `docker build` –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç:

    - –º—É–ª—å—Ç–∏–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—É—é —Å–±–æ—Ä–∫—É,
    - —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ,
    - –±–µ–∑–æ–ø–∞—Å–Ω—É—é —Ä–∞–±–æ—Ç—É —Å —Å–µ–∫—Ä–µ—Ç–∞–º–∏,
    - —Å–±–æ—Ä–∫—É –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∑–∞–ø—É—Å–∫–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π –¥–µ–º–æ–Ω Docker.

### ü§î –û—Ç–ª–∏—á–∏—è –æ—Ç `build`

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | `DOCKER_BUILDKIT=1 docker build` | `docker buildx build` |
| :--- | :--- | :--- |
| **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å** | –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ Docker CLI | –ü–ª–∞–≥–∏–Ω `buildx` (`docker build` –Ω–∞ —Å—Ç–µ—Ä–æ–∏–¥–∞—Ö) |
| **–í–∫–ª—é—á–µ–Ω–∏–µ BuildKit** | –ß–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è | BuildKit –≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é |
| **–ú—É–ª—å—Ç–∏–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–∞—è —Å–±–æ—Ä–∫–∞** | ‚ùå –ù–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è | ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è (—á–µ—Ä–µ–∑ `--platform`) |
| **–ö–∞—Å—Ç–æ–º–Ω—ã–µ –±–∏–ª–¥-–¥–≤–∏–∂–∫–∏ (builder instance)** | ‚ùå –¢–æ–ª—å–∫–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π | ‚úÖ –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å —á–µ—Ä–µ–∑ `buildx create` |
| **–§–æ—Ä–º–∞—Ç—ã –≤—ã–≤–æ–¥–∞ (exporter)** | –¢–æ–ª—å–∫–æ Docker-–æ–±—Ä–∞–∑ | ‚úÖ `docker`, `oci`, `local`, `tar`, `image` –∏ –¥—Ä. |
| **–°–µ—Ç–µ–≤—ã–µ –∏ SSH-—Ñ–∏—á–∏** (`--secret`, `--ssh`) | ‚úÖ –ß–∞—Å—Ç–∏—á–Ω–æ | ‚úÖ –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ |
| **–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—É—à–∏—Ç—å –≤–æ –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏** | ‚ùå –¢–æ–ª—å–∫–æ `docker push` –ø–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏ | ‚úÖ –°–±–æ—Ä–∫–∞ –∏ push –≤ –æ–¥–∏–Ω —à–∞–≥ (`--push`) |
| **–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –≤ CI/CD** | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∞ | ‚úÖ –£–¥–æ–±–Ω–∞ –¥–ª—è headless/CI |
| **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—ç—à–µ–º (–∏–º–ø–æ—Ä—Ç/—ç–∫—Å–ø–æ—Ä—Ç)** | ‚ùå –ù–µ—Ç `--cache-to/from` | ‚úÖ –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ |
| **–ò–∑–æ–ª—è—Ü–∏—è –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** | –û–¥–∏–Ω –≥–ª–æ–±–∞–ª—å–Ω—ã–π BuildKit –≤ Docker Engine | –ù–µ—Å–∫–æ–ª—å–∫–æ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –±–∏–ª–¥-–∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ (`builder`) |
| **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ rootless-—Ä–µ–∂–∏–º–∞** | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ | ‚úÖ –•–æ—Ä–æ—à–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å rootless BuildKit |

!!! success "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ buildx"

    –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `docker buildx` –≤–º–µ—Å—Ç–æ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–≥–æ `docker build` ‚Äî **—Å—Ç–∞–Ω–¥–∞—Ä—Ç –Ω–∞ 2024+** –≤ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ.

---

## üìõ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ BuildKit

### üß¨ –ú—É–ª—å—Ç–∏-—Å–±–æ—Ä–∫–∞

!!! info "–ö—Ä–æ—Å—Å-–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–∞—è —Å–±–æ—Ä–∫–∞"

    BuildKit –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–±–∏—Ä–∞—Ç—å –æ–±—Ä–∞–∑—ã –ø–æ–¥ —Ä–∞–∑–Ω—ã–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –Ω–∞ –æ–¥–Ω–æ–π –º–∞—à–∏–Ω–µ ‚Äî –¥–∞–∂–µ –µ—Å–ª–∏ —Å–∞–º–∞ –º–∞—à–∏–Ω–∞ –Ω–∞ `x86_64`.

!!! example "‚öôÔ∏è –ü—Ä–∏–º–µ—Ä: —Å–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞ –ø–æ–¥ amd64 –∏ arm64"

    ```bash
    docker buildx build \
      --platform linux/amd64,linux/arm64 \
      -t registry.io/my/image:latest \
      --push \
      .
    ```

!!! warning "–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ --load"

    –§–ª–∞–≥ `--load` –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —Å –º—É–ª—å—Ç–∏–∞—Ä—Ö–∏—Ç–µ–∫—Ç—Ä—É–Ω–æ–π —Å–±–æ—Ä–∫–æ–π.

    –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `--push` –∏–ª–∏ `--output`.

### üîê –†–∞–±–æ—Ç–∞ —Å —Å–µ–∫—Ä–µ—Ç–∞–º–∏

!!! info "–ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã —Å–µ–∫—Ä–µ—Ç–æ–≤"

    –°–µ–∫—Ä–µ—Ç –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫ –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª –≤ `/run/secrets/<id>` –≤–Ω—É—Ç—Ä–∏ –∫–æ–º–∞–Ω–¥—ã **RUN**.

    –û–Ω —É–¥–∞–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ —Å–ª–æ–∏ –æ–±—Ä–∞–∑–∞.

!!! example "‚öôÔ∏è –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–µ–∫—Ä–µ—Ç–∞"

    Dockerfile:

    ```dockerfile
    RUN --mount=type=secret,id=mysecret \
        cat /run/secrets/mysecret > /app/secret.txt
    ```

    CLI:

    ```bash
    docker buildx build \
      --secret id=mysecret,src=secret.txt \
      -t my-app \
      .
    ```

!!! danger "–ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ ENV –¥–ª—è —Å–µ–∫—Ä–µ—Ç–æ–≤"

    1.  `type=secret` —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ **RUN**.
    2.  –ù–µ –ø–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã —á–µ—Ä–µ–∑ **ENV** - –æ–Ω–∏ –ø–æ–ø–∞–¥—É—Ç –≤ –æ–±—Ä–∞–∑ –Ω–∞–≤—Å–µ–≥–¥–∞.

### üîë –†–∞–±–æ—Ç–∞ —Å SSH

!!! example "‚öôÔ∏è –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã —Å SSH"

    Dockerfile:

    ```dockerfile
    RUN --mount=type=ssh git clone git@github.com:private/repo.git
    ```

    CLI:

    ```bash
    docker buildx build \
        --ssh default \
        -t my-app \
        .
    ```

!!! tip "–ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSH-–∞–≥–µ–Ω—Ç–∞"
    –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ SSH-–∞–≥–µ–Ω—Ç –∑–∞–ø—É—â–µ–Ω, –∏ –∫–ª—é—á–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã.

    ```bash
    eval "$(ssh-agent -s)"
    ssh-add ~/.ssh/id_rsa
    ```

!!! warning "–ü—Ä–æ–±–ª–µ–º—ã —Å QEMU"

    –í —Å–±–æ—Ä–∫–∞—Ö –ø–æ–¥ —á—É–∂—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, arm64) —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω QEMU.

    –ò–Ω–∞—á–µ `git clone` –º–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å.

### üíæ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

!!! tip "–£—Å–∫–æ—Ä–µ–Ω–∏–µ —Å–±–æ—Ä–æ–∫"

    –ö—ç—à —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —É—Å–∫–æ—Ä—è–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ —Å–±–æ—Ä–∫–∏, –æ—Å–æ–±–µ–Ω–Ω–æ –¥–ª—è —è–∑—ã–∫–æ–≤ —Å dependency management (Go, Node.js, Python, Rust –∏ —Ç.–¥.).

!!! note "–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è --mount=type=cache"

    `type=cache` —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ **RUN**.

    –û–Ω –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ **COPY** –∏–ª–∏ **ADD**.


!!! example "‚öôÔ∏è –ü—Ä–∏–º–µ—Ä –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π"

    ```dockerfile
    # Go-–º–æ–¥—É–ª–∏
    RUN --mount=type=cache,target=/go/pkg/mod \
        go mod download

    # npm
    RUN --mount=type=cache,target=/root/.npm \
        npm ci
    ```

!!! example "‚öôÔ∏è –û–±—â–∏–π –∫—ç—à –º–µ–∂–¥—É —à–∞–≥–∞–º–∏"

    –î–ª—è –æ–±—â–µ–≥–æ –∫—ç—à–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `id=`.

    ```dockerfile
    RUN --mount=type=cache,id=gomod,target=/go/pkg/mod go mod download
    RUN --mount=type=cache,id=gomod,target=/go/pkg/mod go build ./...
    ```

!!! example "‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–Ω–µ—à–Ω–µ–≥–æ –∫—ç—à–∞ (`--cache-to/--cache-from`)"

    ```bash
    docker buildx build \
      --cache-from=type=registry,ref=my-registry/cache:my-app \
      --cache-to=type=registry,ref=my-registry/cache:my-app,mode=max \
      -t my-app:latest \
      .
    ```

### üì¶ –í—ã–≤–æ–¥ —Å–±–æ—Ä–∫–∏

| –¢–∏–ø –≤—ã–≤–æ–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
| :--- | :--- |
| `type=docker` | –ó–∞–≥—Ä—É–∂–∞–µ—Ç –æ–±—Ä–∞–∑ –≤ Docker daemon (`--load`). |
| `type=image` | –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ BuildKit (–≤ —Å–æ—á–µ—Ç–∞–Ω–∏–∏ —Å `--push`). |
| `type=local` | –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã —Å–±–æ—Ä–∫–∏ –Ω–∞ —Ö–æ—Å—Ç–µ –∫–∞–∫ –æ–±—ã—á–Ω—ã–µ —Ñ–∞–π–ª—ã. |
| `type=tar` | –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –æ–±—Ä–∞–∑ –∫–∞–∫ `.tar`-–∞—Ä—Ö–∏–≤. |
| `type=oci` | –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –∫–∞–∫ OCI image layout. |

!!! example "‚öôÔ∏è –°–±–æ—Ä–∫–∞ –≤ tar-—Ñ–∞–π–ª"

    ```bash
    docker buildx build \
      -o type=tar,dest=./app.tar \
      .
    ```

!!! example "‚öôÔ∏è –í—ã–≤–æ–¥ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é"

    ```bash
    docker buildx build \
      -o type=local,dest=./build-output \
      .
    ```

!!! tip "–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å local –∏ tar"

    –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ:

    - `local`, –∫–æ–≥–¥–∞ –Ω—É–∂–Ω—ã —Ç–æ–ª—å–∫–æ –±–∏–Ω–∞—Ä–Ω–∏–∫–∏ –∏–ª–∏ frontend-–∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã.
    - `tar`, –∫–æ–≥–¥–∞ —Å–±–æ—Ä–∫–∞ –∏–¥–µ—Ç –¥–ª—è –æ—Ñ—Ñ–ª–∞–π–Ω-—É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏–ª–∏ air-gapped-—Å–∏—Å—Ç–µ–º.

---

## üê≥ `docker-buildx`

### `build`

!!! abstract "üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ"

    –û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–±–æ—Ä–∫–∏ –æ–±—Ä–∞–∑–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º BuildKit.

!!! example "üéØ –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è"

    **–õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ –æ—Ç–ª–∞–¥–∫–∞**

    *–ó–∞–¥–∞—á–∞: –±—ã—Å—Ç—Ä–æ —Å–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞–∑ –¥–ª—è —Ç–µ–∫—É—â–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ –∑–∞–≥—Ä—É–∑–∏—Ç—å –µ–≥–æ –≤ –ª–æ–∫–∞–ª—å–Ω—ã–π Docker –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.*

    ```bash
    docker buildx build \
      --platform=local \
      -t my-app:dev \
      --load \
      .
    ```

    - `--platform=local`: –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç —Å–±–æ—Ä–∫—É –¥–ª—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –≤–∞—à–µ–≥–æ —Ö–æ—Å—Ç–∞.
    - `-t my-app:dev`: –ü—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç —É–¥–æ–±–Ω—ã–π —Ç–µ–≥ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.
    - `--load`: –ó–∞–≥—Ä—É–∂–∞–µ—Ç –≥–æ—Ç–æ–≤—ã–π –æ–±—Ä–∞–∑ –ø—Ä—è–º–æ –≤ –ª–æ–∫–∞–ª—å–Ω—ã–π Docker daemon, –¥–µ–ª–∞—è –µ–≥–æ –¥–æ—Å—Ç—É–ø–Ω—ã–º –¥–ª—è `docker run`.

    **CI/CD: –°–±–æ—Ä–∫–∞ –∏ –ø—É—à –≤ —Ä–µ–µ—Å—Ç—Ä**

    *–ó–∞–¥–∞—á–∞: —Å–æ–±—Ä–∞—Ç—å production-ready –æ–±—Ä–∞–∑, –∏—Å–ø–æ–ª—å–∑—É—è –≤–Ω–µ—à–Ω–∏–π –∫—ç—à, –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –µ–≥–æ –≤ —Ä–µ–µ—Å—Ç—Ä.*

    ```bash
    docker buildx build \
      -t my-registry/my-app:latest \
      -t my-registry/my-app:v1.2.3 \
      --cache-from=type=registry,ref=my-registry/my-app:cache \
      --cache-to=type=registry,ref=my-registry/my-app:cache,mode=max \
      --push \
      .
    ```

    - `-t ...`: –ü—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–µ–≥–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `latest` –∏ –≤–µ—Ä—Å–∏–æ–Ω–Ω—ã–π).
    - `--cache-from`: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∫—ç—à –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Å–±–æ—Ä–æ–∫, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–π –≤ —Ä–µ–µ—Å—Ç—Ä–µ.
    - `--cache-to`: –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫—ç—à —ç—Ç–æ–π —Å–±–æ—Ä–∫–∏ –æ–±—Ä–∞—Ç–Ω–æ –≤ —Ä–µ–µ—Å—Ç—Ä –¥–ª—è –±—É–¥—É—â–∏—Ö –∑–∞–ø—É—Å–∫–æ–≤.
    - `mode=max`: –í–∫–ª—é—á–∞–µ—Ç –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ —Å–ª–æ–∏ –≤ –∫—ç—à, –¥–µ–ª–∞—è –µ–≥–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–º.
    - `--push`: –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ–±—Ä–∞–∑ –≤ —Ä–µ–µ—Å—Ç—Ä —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Å–±–æ—Ä–∫–∏.

    **–ú—É–ª—å—Ç–∏–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–∞—è —Å–±–æ—Ä–∫–∞**

    *–ó–∞–¥–∞—á–∞: —Å–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞–∑ –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä (amd64 –∏ arm64) –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –µ–≥–æ –≤ —Ä–µ–µ—Å—Ç—Ä —Å –µ–¥–∏–Ω—ã–º –º–∞–Ω–∏—Ñ–µ—Å—Ç–æ–º.*

    ```bash
    docker buildx build \
      --platform linux/amd64,linux/arm64 \
      -t my-registry/my-app:latest \
      --provenance=false \
      --push \
      .
    ```

    - `--platform linux/amd64,linux/arm64`: –£–∫–∞–∑—ã–≤–∞–µ—Ç —Ü–µ–ª–µ–≤—ã–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã.
    - `--provenance=false`: –û—Ç–∫–ª—é—á–∞–µ—Ç SLSA/provenance –∞—Ç—Ç–µ—Å—Ç–∞—Ü–∏—é, –µ—Å–ª–∏ –æ–Ω–∞ –Ω–µ –Ω—É–∂–Ω–∞ (–º–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å –Ω–µ–∫–æ—Ç–æ—Ä—ã–º–∏ —Ä–µ–µ—Å—Ç—Ä–∞–º–∏).
    - `--push`: –û–±—è–∑–∞—Ç–µ–ª–µ–Ω, —Ç–∞–∫ –∫–∞–∫ –º—É–ª—å—Ç–∏–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã–µ –æ–±—Ä–∞–∑—ã –Ω–µ–ª—å–∑—è –∑–∞–≥—Ä—É–∑–∏—Ç—å –≤ –ª–æ–∫–∞–ª—å–Ω—ã–π Docker daemon.

    **–°–±–æ—Ä–∫–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–µ–∫—Ä–µ—Ç–æ–≤ –∏ SSH**

    *–ó–∞–¥–∞—á–∞: —Å–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞–∑, –∫–æ—Ç–æ—Ä–æ–º—É –Ω—É–∂–µ–Ω –¥–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–≤–∞—Ç–Ω–æ–º—É Git-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—é –∏ —Å–µ–∫—Ä–µ—Ç–Ω–æ–º—É —Ç–æ–∫–µ–Ω—É.*

    ```bash
    docker buildx build \
      -t my-app:with-secrets \
      --secret id=npmrc,src=$HOME/.npmrc \
      --ssh default \
      --load \
      .
    ```

    - `--secret id=npmrc,src=...`: –ë–µ–∑–æ–ø–∞—Å–Ω–æ –º–æ–Ω—Ç–∏—Ä—É–µ—Ç —Ñ–∞–π–ª —Å–µ–∫—Ä–µ—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `.npmrc`) –≤ —Å–±–æ—Ä–∫—É. –û–Ω –Ω–µ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Å–ª–æ—è—Ö –æ–±—Ä–∞–∑–∞.
    - `--ssh default`: –ü—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ—Ç –≤–∞—à —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π SSH-–∞–≥–µ–Ω—Ç –≤ –ø—Ä–æ—Ü–µ—Å—Å —Å–±–æ—Ä–∫–∏ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –ø—Ä–∏–≤–∞—Ç–Ω—ã–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º.

    **–≠–∫—Å–ø–æ—Ä—Ç —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã**

    *–ó–∞–¥–∞—á–∞: –ø–æ–ª—É—á–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–±–æ—Ä–∫–∏ –≤ –≤–∏–¥–µ –ª–æ–∫–∞–ª—å–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏, –∞ –Ω–µ Docker-–æ–±—Ä–∞–∑–∞.*

    ```bash
    docker buildx build \
      --output type=local,dest=./build-output \
      .
    ```

    - `--output type=local,dest=...`: –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã —Å–±–æ—Ä–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –±–∏–Ω–∞—Ä–Ω—ã–π —Ñ–∞–π–ª) –≤ —É–∫–∞–∑–∞–Ω–Ω—É—é –ø–∞–ø–∫—É –Ω–∞ —Ö–æ—Å—Ç–µ.

### `create`

!!! abstract "üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ"

    –°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä builder'–∞.
    Builder ‚Äî —ç—Ç–æ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ä–µ–¥–∞ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–±–æ—Ä–æ–∫.

```bash
# –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π builder —Å –¥—Ä–∞–π–≤–µ—Ä–æ–º docker-container
docker buildx create --name mybuilder --driver docker-container

# –°–æ–∑–¥–∞—Ç—å –∏ —Å—Ä–∞–∑—É –Ω–∞—á–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–æ–≤—ã–π builder
docker buildx create --name mybuilder --use
```

!!! tip "–î—Ä–∞–π–≤–µ—Ä docker-container"

    –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥—Ä–∞–π–≤–µ—Ä–∞ `docker-container` –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è –º—É–ª—å—Ç–∏–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã—Ö —Å–±–æ—Ä–æ–∫, —Ç–∞–∫ –∫–∞–∫ –æ–Ω –∑–∞–ø—É—Å–∫–∞–µ—Ç BuildKit –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π QEMU –¥–ª—è —ç–º—É–ª—è—Ü–∏–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä.

### `ls`

!!! abstract "üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ"

    –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö builder'–æ–≤.

```bash
# –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ builder'—ã –∏ –∏—Ö —Å—Ç–∞—Ç—É—Å
docker buildx ls
```

!!! note "–ê–∫—Ç–∏–≤–Ω—ã–π builder"

    –ê–∫—Ç–∏–≤–Ω—ã–π builder, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –±—É–¥–µ—Ç –æ—Ç–º–µ—á–µ–Ω –∑–≤–µ–∑–¥–æ—á–∫–æ–π (`*`).

### `use`

!!! abstract "üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ"

    –ü–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã–π builder.

```bash
# –°–¥–µ–ª–∞—Ç—å 'mybuilder' –∞–∫—Ç–∏–≤–Ω—ã–º
docker buildx use mybuilder

# –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ builder'—É –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
docker buildx use default
```

### `inspect`

!!! abstract "üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ"

    –í—ã–≤–æ–¥–∏—Ç –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ builder'–µ.

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Ç–µ–∫—É—â–µ–≥–æ builder'–∞
docker buildx inspect

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å builder, –µ—Å–ª–∏ –æ–Ω –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω
docker buildx inspect --bootstrap mybuilder
```

### `stop`

!!! abstract "üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ"

    –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —É–∫–∞–∑–∞–Ω–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä builder'–∞.

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å builder —Å –∏–º–µ–Ω–µ–º 'mybuilder'
docker buildx stop mybuilder
```

!!! note "–û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤"

    –û—Å—Ç–∞–Ω–æ–≤–∫–∞ builder'–∞ –ø–æ–ª–µ–∑–Ω–∞ –¥–ª—è –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤, –æ—Å–æ–±–µ–Ω–Ω–æ –µ—Å–ª–∏ –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ.

### `rm`

!!! abstract "üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ"

    –£–¥–∞–ª—è–µ—Ç –æ–¥–∏–Ω –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ builder'–æ–≤.

```bash
# –£–¥–∞–ª–∏—Ç—å builder —Å –∏–º–µ–Ω–µ–º 'mybuilder'
docker buildx rm mybuilder

# –£–¥–∞–ª–∏—Ç—å –≤—Å–µ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ builder'—ã
docker buildx rm
```

!!! warning "–£–¥–∞–ª–µ–Ω–∏–µ –∫—ç—à–∞"

    –£–¥–∞–ª–µ–Ω–∏–µ builder'–∞ —Ç–∞–∫–∂–µ —É–Ω–∏—á—Ç–æ–∂–∞–µ—Ç –µ–≥–æ –∫—ç—à.

### `prune`

!!! abstract "üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ"

    –û—á–∏—â–∞–µ—Ç –∫—ç—à —Å–±–æ—Ä–∫–∏.

```bash
# –£–¥–∞–ª–∏—Ç—å –≤–µ—Å—å –∫—ç—à —Å–±–æ—Ä–∫–∏ –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ builder'–∞
docker buildx prune

# –£–¥–∞–ª–∏—Ç—å –∫—ç—à, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –±–æ–ª–µ–µ 7 –¥–Ω–µ–π (168 —á–∞—Å–æ–≤)
docker buildx prune --filter 'until=168h'
```

!!! success "–†–µ–≥—É–ª—è—Ä–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞"

    –†–µ–≥—É–ª—è—Ä–Ω–æ –æ—á–∏—â–∞–π—Ç–µ –∫—ç—à –≤ CI/CD-—Å–∏—Å—Ç–µ–º–∞—Ö, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏—è –¥–∏—Å–∫–∞.

### `du`

!!! abstract "üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ"

    –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –∫—ç—à–µ–º —Å–±–æ—Ä–∫–∏.

```bash
# –ü–æ–∫–∞–∑–∞—Ç—å —Ä–∞–∑–º–µ—Ä –∫—ç—à–∞
docker buildx du
```

### `bake`

!!! abstract "üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ"

    –í—ã–ø–æ–ª–Ω—è–µ—Ç —Å–±–æ—Ä–∫—É –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∏–∑ —Ñ–∞–π–ª–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `docker-compose.yml` –∏–ª–∏ HCL).
    –≠—Ç–æ –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–ª–æ–∂–Ω—ã–º–∏ —Å—Ü–µ–Ω–∞—Ä–∏—è–º–∏ —Å–±–æ—Ä–∫–∏.

```bash
# –°–æ–±—Ä–∞—Ç—å —Ü–µ–ª–∏, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –≤ docker-compose.yml
docker buildx bake

# –°–æ–±—Ä–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Ü–µ–ª—å
docker buildx bake my-service

# –°–æ–±—Ä–∞—Ç—å –∏–∑ —Ñ–∞–π–ª–∞ HCL
docker buildx bake --file=build.hcl
```

!!! example "‚öôÔ∏è –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è HCL-—Ñ–∞–π–ª–∞"

    ```hcl
    target "myapp" {
      context = "./"
      dockerfile = "Dockerfile"
      tags = ["myapp:latest"]
      platforms = ["linux/amd64", "linux/arm64"]
    }
    ```

### `imagetools`

!!! abstract "üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ"

    –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–∞–Ω–∏—Ñ–µ—Å—Ç–∞–º–∏ –æ–±—Ä–∞–∑–æ–≤ –≤ —Ä–µ–µ—Å—Ç—Ä–µ.
    –ü–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –º—É–ª—å—Ç–∏–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã –∏ –∏–Ω—Å–ø–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –æ–±—Ä–∞–∑—ã –±–µ–∑ –∏—Ö –ø–æ–ª–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏.

```bash
# –°–æ–∑–¥–∞—Ç—å –º–∞–Ω–∏—Ñ–µ—Å—Ç, –æ–±—ä–µ–¥–∏–Ω—è—é—â–∏–π –æ–±—Ä–∞–∑—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä
docker buildx imagetools create \
  -t myregistry/myapp:latest \
  myregistry/myapp:linux-amd64 \
  myregistry/myapp:linux-arm64

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –º–∞–Ω–∏—Ñ–µ—Å—Ç–µ –≤ —Ä–µ–µ—Å—Ç—Ä–µ
docker buildx imagetools inspect myregistry/myapp:latest
```

### `version`

!!! abstract "üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ"

    –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤–µ—Ä—Å–∏—é –ø–ª–∞–≥–∏–Ω–∞ `buildx`.

```bash
docker buildx version
```