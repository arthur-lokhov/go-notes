# üß± –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã

!!! question "–ß—Ç–æ —Ç–∞–∫–æ–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã"

    **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä** ‚Äî —ç—Ç–æ –ª–µ–≥–∫–æ–≤–µ—Å–Ω–∞—è –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ä–µ–¥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –Ω–∞ –ø—Ä–∏–Ω—Ü–∏–ø–∞—Ö —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ –≤–Ω—É—Ç—Ä–∏ –æ–¥–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã.

–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –≤–∫–ª—é—á–∞—é—Ç –≤ —Å–µ–±—è:

- –ø—Ä–∏–∫–ª–∞–¥–Ω–æ–π –∫–æ–¥ (–±–∏–Ω–∞—Ä–Ω–∏–∫–∏, —Å–∫—Ä–∏–ø—Ç—ã),
- –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–±–∏–±–ª–∏–æ—Ç–µ–∫–∏, —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø–∞–∫–µ—Ç—ã),
- –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏,
- –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫—É—é/—Å–µ—Ç–µ–≤—É—é –∏–∑–æ–ª—è—Ü–∏—é –∏ –ø—Å–µ–≤–¥–æ—Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É.

!!! note "–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ"

    –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞ **–æ–±—â–µ–º —è–¥—Ä–µ** —Ö–æ—Å—Ç-–û–°, –∏—Å–ø–æ–ª—å–∑—É—è —Ç–∞–∫–∏–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã, –∫–∞–∫ `namespaces`, `cgroups`, `seccomp`, `AppArmor/SELinux`.

    –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–æ–±–∏—Ç—å—Å—è –ø–æ—á—Ç–∏ –ø–æ–ª–Ω–æ–π –∏–∑–æ–ª—è—Ü–∏–∏ –±–µ–∑ –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏–∏ ¬´–∂–µ–ª–µ–∑–∞¬ª.

### üéØ –ó–∞—á–µ–º –æ–Ω–∏ –Ω—É–∂–Ω—ã

–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã ‚Äî –Ω–µ –ø—Ä–æ ¬´–º–æ–¥–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏¬ª, –∞ –ø—Ä–æ –∏–Ω–∂–µ–Ω–µ—Ä–Ω—É—é –ø—Ä–∞–∫—Ç–∏—á–Ω–æ—Å—Ç—å:

- **–ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ**: —Ä–∞–∑–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π/—Å–µ—Ä–≤–∏—Å–æ–≤ –±–µ–∑ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤.
- **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å —Å—Ä–µ–¥—ã**: –æ–¥–Ω–∞ –∏ —Ç–∞ –∂–µ —Å—Ä–µ–¥–∞ –Ω–∞ **Dev**, **CI**, **Staging**, **Prod**.
- **–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç**: –∑–∞–ø—É—Å–∫ –∑–∞ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã ‚Äî –≤–∞–∂–µ–Ω –ø—Ä–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–∏.
- **–ò–º–º—É—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å**: –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞–∫ –∫–æ–¥ ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–µ –ø–∞—Ç—á–∞—Ç—Å—è, –æ–Ω–∏ –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞—é—Ç—Å—è.
- **–ù–∞–≥—Ä—É–∑–æ—á–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏**: –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å –ø–æ–¥ –∞–≤—Ç–æ—à–∞—Ä–¥–∏–Ω–≥ –∏ failover.

!!! abstract "–ö–ª—é—á–µ–≤–æ–π —Ç–µ–∑–∏—Å"

    –í —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º DevOps-–∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã ‚Äî —ç—Ç–æ –µ–¥–∏–Ω–∏—Ü–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ü–û.

---

## ‚öñÔ∏è –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã vs –í–ú

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã | –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –º–∞—à–∏–Ω—ã |
| :--- | :--- | :--- |
| **–ò–∑–æ–ª—è—Ü–∏—è** | –ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –∏–º—ë–Ω –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å –≥—Ä—É–ø–ø (—è–¥—Ä–æ –û–°) | –ì–∏–ø–µ—Ä–≤–∏–∑–æ—Ä, –ø–æ–ª–Ω–∞—è —ç–º—É–ª—è—Ü–∏—è –û–° |
| **–û–≤–µ—Ä—Ö–µ–¥** | –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π | –°—É—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–π (—è–¥—Ä–æ, —ç–º—É–ª—è—Ü–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤) |
| **–ó–∞–ø—É—Å–∫** | –ü–æ—á—Ç–∏ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ | –°–µ–∫—É–Ω–¥—ã –∏ –≤—ã—à–µ |
| **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –û–°** | –¢–æ–ª—å–∫–æ –û–° —Ö–æ—Å—Ç–∞ (–æ–±—ã—á–Ω–æ Linux) | –õ—é–±–∞—è –û–° –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ–π –≥–∏–ø–µ—Ä–≤–∏–∑–æ—Ä–æ–º |
| **–ì–∏–±–∫–æ—Å—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π** | –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞ | –ü–∞—Ç—á–∏–Ω–≥ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ–ª–≥–æ–∂–∏–≤—É—â–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ |
| **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** | –¢—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –∫–æ–Ω—Ç—Ä–æ–ª—è | –ñ—ë—Å—Ç–∫–∞—è –∏–∑–æ–ª—è—Ü–∏—è ¬´–∏–∑ –∫–æ—Ä–æ–±–∫–∏¬ª |
| **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ** | CI/CD, –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã, ephemeral-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ | Legacy-—Å–∏—Å—Ç–µ–º—ã, –º–æ–Ω–æ–ª–∏—Ç—ã, –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –û–° |

!!! note "–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ"

    –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –≤—ã–∏–≥—Ä—ã–≤–∞—é—Ç –ø–æ —Å–∫–æ—Ä–æ—Å—Ç–∏, –ª—ë–≥–∫–æ—Å—Ç–∏ –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏.

    –í–ú –æ—Å—Ç–∞—é—Ç—Å—è –∞–∫—Ç—É–∞–ª—å–Ω—ã–º–∏ –¥–ª—è legacy-—Å–∏—Å—Ç–µ–º, —Ö–æ—Å—Ç–∏–Ω–≥–∞ —Å –ø–æ–ª–Ω–æ–π –∏–∑–æ–ª—è—Ü–∏–µ–π –∏–ª–∏ –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –û–°.

---

## üõ†Ô∏è OCI —Å—Ç–∞–Ω–¥–∞—Ä—Ç

!!! info "–°—Ç–∞–Ω–¥–∞—Ä—Ç OCI"

    –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä ‚Äî —ç—Ç–æ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –ø–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—É [*OCI (Open Container Initiative)*](https://opencontainers.org/).

    –î–∞–Ω–Ω—ã–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç —Å–æ–∑–¥–∞–≤–∞–ª—Å—è, —á—Ç–æ–±—ã –æ–±–µ—Å–ø–µ—á–∏—Ç—å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –∏ –ø–µ—Ä–µ–Ω–æ—Å–∏–º–æ—Å—Ç—å –º–µ–∂–¥—É —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è–º–∏.

    –û—Å–Ω–æ–≤–∞–Ω –Ω–∞ —Ç—Ä–µ—Ö —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è—Ö:

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
| :--- | :--- |
| **OCI Image Format** | –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω–æ–≥–æ –æ–±—Ä–∞–∑–∞ (–º–∞–Ω–∏—Ñ–µ—Å—Ç, —Å–ª–æ–∏, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è). |
| **OCI Runtime Spec** | –û–ø–∏—Å—ã–≤–∞–µ—Ç, –∫–∞–∫ –∏—Å–ø–æ–ª–Ω—è–µ—Ç—Å—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–∞ —Ö–æ—Å—Ç–µ (–∏–∑–æ–ª—è—Ü–∏—è, rootfs, env –∏ —Ç.–¥.). |
| **OCI Distribution** | –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä—É–µ—Ç –æ–±–º–µ–Ω –æ–±—Ä–∞–∑–∞–º–∏ (—Ä–µ–≥–∏—Å—Ç—Ä, push/pull, digest, –ø–æ–¥–ø–∏—Å–∫–∏). |

–õ—é–±–∞—è —Å–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–∏, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∞—è **OCI**, –¥–æ–ª–∂–Ω–∞ –∏–º–µ—Ç—å **—Ç—Ä–∏ —É—Ä–æ–≤–Ω—è**:

| –£—Ä–æ–≤–µ–Ω—å | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä—ã –∏–∑ Docker | –ü—Ä–∏–º–µ—Ä—ã –∏–∑ LXC |
| :--- | :--- | :--- | :--- |
| **Image Builder** | –°–±–æ—Ä–∫–∞ OCI-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã—Ö –æ–±—Ä–∞–∑–æ–≤ | `Dockerfile` + `BuildKit` | `lxc-create` + —à–∞–±–ª–æ–Ω—ã |
| **Image Store / Registry** | –•—Ä–∞–Ω–µ–Ω–∏–µ –∏ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –æ–±—Ä–∞–∑–æ–≤ | Docker Hub, Harbor | LXC templates, tarball-—Ä–µ–ø–æ |
| **Runtime** | –ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å–æ–≥–ª–∞—Å–Ω–æ `runtime-spec` | `runc`, `containerd` | `lxc-start` (–Ω–µ OCI runtime) |

---

## üß™ –†–∞–±–æ—Ç–∞ —Å LXC

!!! question "–ß—Ç–æ —Ç–∞–∫–æ–µ LXC"

    **LXC** ‚Äî —ç—Ç–æ –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–∏, –∏—Å–ø–æ–ª—å–∑—É—é—â–∞—è –Ω–∞–ø—Ä—è–º—É—é —Å–∏—Å—Ç–µ–º–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã —è–¥—Ä–∞ Linux –±–µ–∑ –Ω–∞–¥—Å—Ç—Ä–æ–µ–∫.

    –û–Ω–∞ –±–ª–∏–∂–µ –≤—Å–µ–≥–æ –∫ —Ä–∞–±–æ—Ç–µ —Å –ª–µ–≥–∫–æ–≤–µ—Å–Ω–æ–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–æ–π.

LXC —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑:

- `namespaces` (PID, net, IPC, mount, user),
- `cgroups` (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤),
- `chroot` + overlay FS (–∏–∑–æ–ª—è—Ü–∏—è –§–°),
- —Å–µ—Ç–µ–≤—ã–µ bridge‚Äô–∏ (veth, NAT),
- –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –≤–º–µ—Å—Ç–æ –æ–±—Ä–∞–∑–æ–≤.

!!! note "–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ"

    –í –æ—Ç–ª–∏—á–∏–∏ –æ—Ç Docker, LXC - —ç—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —É—Ä–æ–≤–Ω—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã, –∞ –Ω–µ —É—Ä–æ–≤–Ω—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.

    –ú–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å `systemd`, `sshd`, `apt`, –∫–∞–∫ –≤ –æ–±—ã—á–Ω–æ–π Linux-–º–∞—à–∏–Ω–µ.

!!! example "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ LXC"

    ```bash
    sudo apt update
    sudo apt install lxc lxc-templates uidmap bridge-utils
    ```

### üõ†Ô∏è –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

| –ö–æ–º–∞–Ω–¥–∞ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
| :--- | :--- |
| `lxc-create -n myct -t download` | –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å —à–∞–±–ª–æ–Ω–æ–º |
| `lxc-start -n myct` | –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ |
| `lxc-attach -n myct` | –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (–∫–∞–∫ `docker exec`) |
| `lxc-stop -n myct` | –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ |
| `lxc-destroy -n myct` | –£–¥–∞–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ |
| `lxc-ls -f` | –°–ø–∏—Å–æ–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ |


!!! example "–°–æ–∑–¥–∞–Ω–∏–µ –æ–±—Ä–∞–∑–∞ Ubuntu"

    ```bash
    lxc-create -n ubuntu-test -t download

    # Distribution: ubuntu
    # Release: jammy
    # Architecture: amd64

    lxc-start -n ubuntu-test # –ó–∞–ø—É—Å–∫–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
    lxc-info -n ubuntu-test # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
    lxc-attach -n ubuntu-test # –í—Ö–æ–¥–∏–º –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
    ```

### üìÇ –§–∞–π–ª—ã LXC

| –ü—É—Ç—å | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
| :--- | :--- |
| `/var/lib/lxc/<name>/` | –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä: –∫–æ–Ω—Ñ–∏–≥–∏, rootfs –∏ metadata |
| `/etc/lxc/default.conf` | –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ |
| `~/.config/lxc/default.conf` | –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ |

!!! note "–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ"

    LXC –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –≤ `/var/lib/lxc/<name>/config`.
