# Пробы (Probes)

## Что такое Kubernetes probes?

Проверки состояния контейнера - механизмы для мониторинга состояния приложений и контейнеров.

Kubernetes поддерживает три вида проверок:

1. **Startup probe** - проверка, которая используется для определения, когда контейнер полностью инициализировался. Если эта проверка не проходит, другие пробы не выполняются.
2. **Readiness probe** - проверка готовности контейнера к обслуживанию трафика.
Если она не проходит, контейнер не будет получать трафик.
3. **Liveness probe** - проверка живости контейнера.
Если она не проходит, контейнер перезапускается.

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: myapp-pod
spec:
  containers:
  - name: myapp
    image: myapp:v1
    livenessProbe:
      httpGet:
        path: /health
        port: 8080
      initialDelaySeconds: 3
      periodSeconds: 5
    readinessProbe:
      httpGet:
        path: /readiness
        port: 8080
      initialDelaySeconds: 5
      periodSeconds: 5
```

### Какие хорошие практики существуют при создании проб?

- Пробы должны проверять рабочие и критические компоненты приложения, чтобы гарантировать, что приложение может обрабатывать запросы пользователя.
- Пробы не должны быть слишком частыми или тяжелыми, чтобы не создавать дополнительную нагрузку на систему.
- Пробы не должны зависеть от внешних сервисов, если только это не критично для работы приложения.
- Используйте сквозные проверки, если приложение имеет несколько взаимосвязанных сервисов.
